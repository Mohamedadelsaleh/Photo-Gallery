/*! For license information please see main.3e43e409.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,V=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function j(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return V({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return V({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Se=null;function Ee(e){if(e=yi(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var De=!1;function Ne(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==_e||null!==Se)&&(Ae(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Re=!1}function Oe(e,t,n,r,i,a,o,u,s){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Me=!1,Ve=null,Fe=!1,Ue=null,Be={onError:function(e){Me=!0,Ve=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Ve=null,Oe.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var lt=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function mt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,xt,_t,St,Et=!1,Tt=[],It=null,Ct=null,At=null,Dt=new Map,Nt=new Map,Pt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=yi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=pi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Vt(e)&&n.delete(t)}function Ut(){Et=!1,null!==It&&Vt(It)&&(It=null),null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),Dt.forEach(Ft),Nt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Bt(It,e),null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),Dt.forEach(t),Nt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var zt=b.ReactCurrentBatchConfig;function qt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=1,Gt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Kt(e,t,n,r){var i=gt,a=zt.transition;zt.transition=null;try{gt=4,Gt(e,t,n,r)}finally{gt=i,zt.transition=a}}function Gt(e,t,n,r){var i=Wt(e,t,n,r);if(null===i)zr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Ot(It,e,t,n,r,i),!0;case"dragenter":return Ct=Ot(Ct,e,t,n,r,i),!0;case"mouseover":return At=Ot(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Ot(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Nt.set(a,Ot(Nt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var a=yi(i);if(null!==a&&bt(a),null===(a=Wt(e,t,n,r))&&zr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else zr(e,t,r,null,n)}var Ht=null;function Wt(e,t,n,r){if(Ht=null,null!==(e=pi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,$t=null;function Jt(){if($t)return $t;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return V(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),ln=V({},un,{view:0,detail:0}),cn=nn(ln),fn=V({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(V({},fn,{dataTransfer:0})),vn=nn(V({},ln,{relatedTarget:0})),pn=nn(V({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=V({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mn=nn(yn),gn=nn(V({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function _n(){return xn}var Sn=V({},ln,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?bn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=nn(Sn),Tn=nn(V({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=nn(V({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),Cn=nn(V({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=V({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=nn(An),Nn=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Rn,On=c&&(!Pn||Rn&&8<Rn&&11>=Rn),Mn=String.fromCharCode(32),Vn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var jn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jn[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Hn(e){Mr(e,0)}function Wn(e){if(W(mi(e)))return e}function Qn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Xn;if(c){var $n="oninput"in document;if(!$n){var Jn=document.createElement("div");Jn.setAttribute("oninput","return;"),$n="function"===typeof Jn.oninput}Xn=$n}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function Zn(){Kn&&(Kn.detachEvent("onpropertychange",er),Gn=Kn=null)}function er(e){if("value"===e.propertyName&&Wn(Gn)){var t=[];qn(t,Gn,e,we(e)),Ne(Hn,t)}}function tr(e,t,n){"focusin"===e?(Zn(),Gn=n,(Kn=t).attachEvent("onpropertychange",er)):"focusout"===e&&Zn()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Wn(Gn)}function rr(e,t){if("click"===e)return Wn(t)}function ir(e,t){if("input"===e||"change"===e)return Wn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function lr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?lr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function cr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=cr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,pr=null,yr=null,mr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;mr||null==vr||vr!==Q(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Kr(pr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var br={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},wr={},xr={};function _r(e){if(wr[e])return wr[e];if(!br[e])return e;var t,n=br[e];for(t in n)if(n.hasOwnProperty(t)&&t in xr)return wr[e]=n[t];return e}c&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);var Sr=_r("animationend"),Er=_r("animationiteration"),Tr=_r("animationstart"),Ir=_r("transitionend"),Cr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Cr.set(e,t),s(t,[e])}for(var Nr=0;Nr<Ar.length;Nr++){var Pr=Ar[Nr];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Sr,"onAnimationEnd"),Dr(Er,"onAnimationIteration"),Dr(Tr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,l){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var c=Ve;Me=!1,Ve=null,Fe||(Fe=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,l=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Or(i,u,l),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,l=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Or(i,u,l),a=s}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Vr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(jr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),jr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Fr("selectionchange",!1,t))}}function jr(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=pi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Cr.get(e);if(void 0!==u){var s=sn,l=e;switch(e){case"keypress":if(0===Zt(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":l="focus",s=vn;break;case"focusout":l="blur",s=vn;break;case"beforeblur":case"afterblur":s=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=In;break;case Sr:case Er:case Tr:s=pn;break;case Ir:s=Cn;break;case"scroll":s=cn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=mn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var c=0!==(4&t),f=!c&&"scroll"===e,h=c?null!==u?u+"Capture":null:u;c=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Pe(v,h))&&c.push(qr(v,p,d)))),f)break;v=v.return}0<c.length&&(u=new s(u,l,null,n,i),o.push({event:u,listeners:c}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!pi(l)&&!l[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(l=(l=n.relatedTarget||n.toElement)?pi(l):null)&&(l!==(f=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(s=null,l=r),s!==l)){if(c=hn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:mi(s),d=null==l?u:mi(l),(u=new c(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,pi(i)===r&&((c=new c(h,v+"enter",l,n,i)).target=d,c.relatedTarget=f,p=c),f=p,s&&l)e:{for(h=l,v=0,d=c=s;d;d=Gr(d))v++;for(d=0,p=h;p;p=Gr(p))d++;for(;0<v-d;)c=Gr(c),v--;for(;0<d-v;)h=Gr(h),d--;for(;v--;){if(c===h||null!==h&&c===h.alternate)break e;c=Gr(c),h=Gr(h)}c=null}else c=null;null!==s&&Hr(o,u,s,c,!1),null!==l&&null!==f&&Hr(o,f,l,c,!0)}if("select"===(s=(u=r?mi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Qn;else if(zn(u))if(Yn)y=ir;else{y=nr;var m=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=rr);switch(y&&(y=y(e,r))?qn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?mi(r):window,e){case"focusin":(zn(m)||"true"===m.contentEditable)&&(vr=m,pr=r,yr=null);break;case"focusout":yr=pr=vr=null;break;case"mousedown":mr=!0;break;case"contextmenu":case"mouseup":case"dragend":mr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Fn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(On&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=Jt()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Bn=!0)),0<(m=Kr(r,k)).length&&(k=new gn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Un(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Vn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Fn(e,t)?(e=Jt(),$t=Xt=Yt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(qr(e,a,i)),null!=(a=Pe(e,t))&&r.push(qr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,l=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==l&&(u=l,i?null!=(s=Pe(n,a))&&o.unshift(qr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(qr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Wr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Wr,"\n").replace(Qr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function $r(){}var Jr=null;function Zr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),li="__reactFiber$"+si,ci="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,vi="__reactHandles$"+si;function pi(e){var t=e[li];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[li]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[li])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function yi(e){return!(e=e[li]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function mi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[ci]||null}var ki=[],bi=-1;function wi(e){return{current:e}}function xi(e){0>bi||(e.current=ki[bi],ki[bi]=null,bi--)}function _i(e,t){bi++,ki[bi]=e.current,e.current=t}var Si={},Ei=wi(Si),Ti=wi(!1),Ii=Si;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){xi(Ti),xi(Ei)}function Ni(e,t,n){if(Ei.current!==Si)throw Error(a(168));_i(Ei,t),_i(Ti,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return V({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ii=Ei.current,_i(Ei,e),_i(Ti,Ti.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,xi(Ti),xi(Ei),_i(Ei,e)):xi(Ti),_i(Ti,n)}var Oi=null,Mi=!1,Vi=!1;function Fi(e){null===Oi?Oi=[e]:Oi.push(e)}function Ui(){if(!Vi&&null!==Oi){Vi=!0;var e=0,t=gt;try{var n=Oi;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,Mi=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),We(Ze,Ui),i}finally{gt=t,Vi=!1}}return null}var Bi=b.ReactCurrentBatchConfig;function ji(e,t){if(e&&e.defaultProps){for(var n in t=V({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var zi=wi(null),qi=null,Ki=null,Gi=null;function Hi(){Gi=Ki=qi=null}function Wi(e){var t=zi.current;xi(zi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Yi(e,t){qi=e,Gi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(mu=!0),e.firstContext=null)}function Xi(e){var t=e._currentValue;if(Gi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ki){if(null===qi)throw Error(a(308));Ki=e,qi.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var $i=null,Ji=!1;function Zi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=n.interleaved)?(t.next=t,null===$i?$i=[n]:$i.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Ji=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,l=s.next;s.next=null,null===o?a=l:o.next=l,o=s;var c=e.alternate;null!==c&&((u=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===u?c.firstBaseUpdate=l:u.next=l,c.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,c=l=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=V({},f,h);break e;case 2:Ji=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===c?(l=c=d,s=f):c=c.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(s=f),i.baseState=s,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:V({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=zs(),i=qs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=zs(),i=qs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=zs(),r=qs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ks(e,r,n))&&ra(t,e,r)}};function ca(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Xi(a):(i=Ai(t)?Ii:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,Zi(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Xi(a):(a=Ai(t)?Ii:Ei.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&la.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var va=[],pa=0,ya=null,ma=0,ga=[],ka=0,ba=null,wa=1,xa="";function _a(e,t){va[pa++]=ma,va[pa++]=ya,ya=e,ma=t}function Sa(e,t,n){ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,ba=e;var r=wa;e=xa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wa=1<<32-ot(t)+i|n<<i|r,xa=a+e}else wa=1<<a|n<<i|r,xa=e}function Ea(e){null!==e.return&&(_a(e,1),Sa(e,1,0))}function Ta(e){for(;e===ya;)ya=va[--pa],va[pa]=null,ma=va[--pa],va[pa]=null;for(;e===ba;)ba=ga[--ka],ga[ka]=null,xa=ga[--ka],ga[ka]=null,wa=ga[--ka],ga[ka]=null}var Ia=null,Ca=null,Aa=!1,Da=null;function Na(e,t){var n=bl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Pa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ia=e,Ca=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ia=e,Ca=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ba?{id:wa,overflow:xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=bl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ia=e,Ca=null,!0);default:return!1}}function Ra(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function La(e){if(Aa){var t=Ca;if(t){var n=t;if(!Pa(e,t)){if(Ra(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ia;t&&Pa(e,t)?Na(r,n):(e.flags=-4097&e.flags|2,Aa=!1,Ia=e)}}else{if(Ra(e))throw Error(a(418));e.flags=-4097&e.flags|2,Aa=!1,Ia=e}}}function Oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ia=e}function Ma(e){if(e!==Ia)return!1;if(!Aa)return Oa(e),Aa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!Zr(e.type,e.memoizedProps)),t&&(t=Ca)){if(Ra(e)){for(e=Ca;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Na(e,t),t=oi(t.nextSibling)}if(Oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ca=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ca=null}}else Ca=Ia?oi(e.stateNode.nextSibling):null;return!0}function Va(){Ca=Ia=null,Aa=!1}function Fa(e){null===Da?Da=[e]:Da.push(e)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ba(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ja(e){return(0,e._init)(e._payload)}function za(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=xl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Tl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&ja(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=_l(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Il(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Sl(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Tl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=_l(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case x:return(t=Il(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Sl(t,e.mode,n,null)).return=e,t;Ba(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:f(e,t,n,r,null);Ba(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return f(t,e=e.get(n)||null,r,i,null);Ba(t,r)}return null}function p(i,a,u,s){for(var l=null,c=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===c?l=m:c.sibling=m,c=m,f=y}if(p===u.length)return n(i,f),Aa&&_a(i,p),l;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===c?l=f:c.sibling=f,c=f);return Aa&&_a(i,p),l}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===c?l=y:c.sibling=y,c=y);return e&&f.forEach((function(e){return t(i,e)})),Aa&&_a(i,p),l}function y(i,u,s,l){var c=O(s);if("function"!==typeof c)throw Error(a(150));if(null==(s=c.call(s)))throw Error(a(151));for(var f=c=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,l);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?c=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),Aa&&_a(i,y),c;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,l))&&(u=o(g,u,y),null===f?c=g:f.sibling=g,f=g);return Aa&&_a(i,y),c}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,l))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?c=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),Aa&&_a(i,y),c}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var l=o.key,c=a;null!==c;){if(c.key===l){if((l=o.type)===_){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===P&&ja(l)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Ua(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===_?((a=Sl(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=_l(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Il(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(c=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(O(o))return y(r,a,o,s);Ba(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Tl(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var qa=za(!0),Ka=za(!1),Ga={},Ha=wi(Ga),Wa=wi(Ga),Qa=wi(Ga);function Ya(e){if(e===Ga)throw Error(a(174));return e}function Xa(e,t){switch(_i(Qa,t),_i(Wa,e),_i(Ha,Ga),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xi(Ha),_i(Ha,t)}function $a(){xi(Ha),xi(Wa),xi(Qa)}function Ja(e){Ya(Qa.current);var t=Ya(Ha.current),n=se(t,e.type);t!==n&&(_i(Wa,e),_i(Ha,n))}function Za(e){Wa.current===e&&(xi(Ha),xi(Wa))}var eo=wi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,ao=b.ReactCurrentBatchConfig,oo=0,uo=null,so=null,lo=null,co=!1,fo=!1,ho=0,vo=0;function po(){throw Error(a(321))}function yo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function mo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Jo,t=null!==so&&null!==so.next,oo=0,lo=so=uo=null,co=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?uo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?uo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?uo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,l=null,c=o;do{var f=c.lane;if((oo&f)===f)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(s=l=h,u=r):l=l.next=h,uo.lanes|=f,Es|=f}c=c.next}while(null!==c&&c!==o);null===l?u=r:l.next=s,ar(r,t.memoizedState)||(mu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(mu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Eo(e,t){var n=uo,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,mu=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,No(9,Io.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,Ao(t)&&Ks(e,1,-1)}function Co(e,t,n){return n((function(){Ao(t)&&Ks(e,1,-1)}))}function Ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Do(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Wo.bind(null,uo,e),[t.memoizedState,e]}function No(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return bo().memoizedState}function Ro(e,t,n,r){var i=ko();uo.flags|=e,i.memoizedState=No(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=bo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&yo(r,o.deps))return void(i.memoizedState=No(t,n,a,r))}uo.flags|=e,i.memoizedState=No(1|t,n,a,r)}function Oo(e,t){return Ro(8390656,8,e,t)}function Mo(e,t){return Lo(2048,8,e,t)}function Vo(e,t){return Lo(4,2,e,t)}function Fo(e,t){return Lo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Uo.bind(null,t,e),n)}function jo(){}function zo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Go(){return bo().memoizedState}function Ho(e,t,n){var r=qs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Yo(t,n):(Xo(e,t,n),null!==(e=Ks(e,r,n=zs()))&&$o(e,t,r))}function Wo(e,t,n){var r=qs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Yo(t,i);else{Xo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ks(e,r,n=zs()))&&$o(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Yo(e,t){fo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ms)?(null===(e=t.interleaved)?(n.next=n,null===$i?$i=[t]:$i.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function $o(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,mt(e,n)}}var Jo={readContext:Xi,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Xi,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Xi,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ro(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ro(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ro(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Do,useDebugValue:jo,useDeferredValue:function(e){var t=Do(e),n=t[0],r=t[1];return Oo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=Do(!1),t=e[0];return e=Ko.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=ko();if(Aa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Oo(Co.bind(null,r,o,e),[e]),r.flags|=2048,No(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=gs.identifierPrefix;if(Aa){var n=xa;t=":"+t+"R"+(n=(wa&~(1<<32-ot(wa)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Xi,useCallback:zo,useContext:Xi,useEffect:Mo,useImperativeHandle:Bo,useInsertionEffect:Vo,useLayoutEffect:Fo,useMemo:qo,useReducer:xo,useRef:Po,useState:function(){return xo(wo)},useDebugValue:jo,useDeferredValue:function(e){var t=xo(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1},tu={readContext:Xi,useCallback:zo,useContext:Xi,useEffect:Mo,useImperativeHandle:Bo,useInsertionEffect:Vo,useLayoutEffect:Fo,useMemo:qo,useReducer:_o,useRef:Po,useState:function(){return _o(wo)},useDebugValue:jo,useDeferredValue:function(e){var t=_o(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[_o(wo)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Go,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ps||(Ps=!0,Rs=r),ru(0,t)},n}function lu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Ls?Ls=new Set([this]):Ls.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function cu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=vl.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Aa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function vu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pu(e,t,n){var r=t.pendingProps;switch(Ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vu(t),null;case 1:case 17:return Ai(t.type)&&Di(),vu(t),null;case 3:return r=t.stateNode,$a(),xi(Ti),xi(Ei),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(Ys(Da),Da=null))),vu(t),null;case 5:Za(t);var i=Ya(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return vu(t),null}if(e=Ya(Ha.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[li]=t,r[ci]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Vr(Rr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var l=o[s];"children"===s?"string"===typeof l?r.textContent!==l&&(Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(Xr(r.textContent,l,e),i=["children",""+l]):u.hasOwnProperty(s)&&null!=l&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[li]=t,e[ci]=r,iu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Vr(Rr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=V({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),l=i)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ye(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&k(e,o,c,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return vu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Qa.current),Ya(Ha.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[li]=t,(o=r.nodeValue!==n)&&null!==(e=Ia))switch(s=0!==(1&e.mode),e.tag){case 3:Xr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Xr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[li]=t,t.stateNode=r}return vu(t),null;case 13:if(xi(eo),r=t.memoizedState,Aa&&null!==Ca&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ca;r;)r=oi(r.nextSibling);return Va(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[li]=t}else Va(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return vu(t),null}return null!==Da&&(Ys(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===_s&&(_s=3):il())),null!==t.updateQueue&&(t.flags|=4),vu(t),null);case 4:return $a(),null===e&&Br(t.stateNode.containerInfo),vu(t),null;case 10:return Wi(t.type._context),vu(t),null;case 19:if(xi(eo),null===(o=t.memoizedState))return vu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==_s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _i(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>Ns&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Aa)return vu(t),null}else 2*$e()-o.renderingStartTime>Ns&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=eo.current,_i(eo,r?1&n|2:1&n),t):(vu(t),null);case 22:case 23:return el(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ws)&&(vu(t),6&t.subtreeFlags&&(t.flags|=8192)):vu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ha.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=V({},i,{value:void 0}),r=V({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ge(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(u.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(null!=l||null!=s))if("style"===c)if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(u.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Vr("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var yu=b.ReactCurrentOwner,mu=!1;function gu(e,t,n,r){t.child=null===e?Ka(t,null,n,r):qa(t,e.child,n,r)}function ku(e,t,n,r,i){n=n.render;var a=t.ref;return Yi(t,i),r=mo(e,t,n,r,a,i),n=go(),null===e||mu?(Aa&&n&&Ea(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function bu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||wl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=_l(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Uu(e,t,i)}return t.flags|=1,(e=xl(a,r)).ref=t.ref,e.return=t,t.child=e}function wu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(mu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Uu(e,t,i);0!==(131072&e.flags)&&(mu=!0)}return Su(e,t,n,r,i)}function xu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},_i(xs,ws),ws|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,_i(xs,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,_i(xs,ws),ws|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_i(xs,ws),ws|=r;return gu(e,t,i,n),t.child}function _u(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Ai(n)?Ii:Ei.current;return a=Ci(t,a),Yi(t,i),n=mo(e,t,n,r,a,i),r=go(),null===e||mu?(Aa&&r&&Ea(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function Eu(e,t,n,r,i){if(Ai(n)){var a=!0;Ri(t)}else a=!1;if(Yi(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Xi(l):l=Ci(t,l=Ai(n)?Ii:Ei.current);var c=n.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==l)&&ha(t,o,r,l),Ji=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ti.current||Ji?("function"===typeof c&&(sa(t,n,c,r),s=t.memoizedState),(u=Ji||ca(t,n,u,r,h,s,l))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=l,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,l=t.type===t.elementType?u:ji(t.type,u),o.props=l,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Xi(s):s=Ci(t,s=Ai(n)?Ii:Ei.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Ji=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Ti.current||Ji?("function"===typeof d&&(sa(t,n,d,r),v=t.memoizedState),(l=Ji||ca(t,n,l,r,h,v,s)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=l):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Tu(e,t,n,r,a,i)}function Tu(e,t,n,r,i,a){_u(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Li(t,n,!1),Uu(e,t,a);r=t.stateNode,yu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=qa(t,e.child,null,a),t.child=qa(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Iu(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),Xa(e,t.containerInfo)}function Cu(e,t,n,r,i){return Va(),Fa(i),t.flags|=256,gu(e,t,n,r),t.child}var Au={dehydrated:null,treeContext:null,retryLane:0};function Du(e){return{baseLanes:e,cachePool:null}}function Nu(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_i(eo,1&o),null===e)return La(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=El(o,i,0,null),e=Sl(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Du(n),t.memoizedState=Au,e):Pu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Ou(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=El({mode:"visible",children:i.children},o,0,null),(u=Sl(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&qa(t,e.child,null,n),t.child.memoizedState=Du(n),t.memoizedState=Au,u);if(0===(1&t.mode))t=Ou(e,t,n,null);else if("$!"===r.data)t=Ou(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),mu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ks(e,i,-1))}il(),t=Ou(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=yl.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ca=oi(r.nextSibling),Ia=t,Aa=!0,Da=null,null!==n&&(ga[ka++]=wa,ga[ka++]=xa,ga[ka++]=ba,wa=n.id,xa=n.overflow,ba=t),(t=Pu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Lu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Du(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Au,i):(n=Ru(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Lu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Du(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Au,i):(n=Ru(e,t,i.children,n),t.memoizedState=null,n)}function Pu(e,t){return(t=El({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ru(e,t,n,r){var i=e.child;return e=i.sibling,n=xl(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Lu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=xl(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=xl(o,r):(r=Sl(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ou(e,t,n,r){return null!==r&&Fa(r),qa(t,e.child,null,n),(e=Pu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Vu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Fu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_i(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vu(t,!0,n,null,a);break;case"together":Vu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=xl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=xl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bu(e,t){switch(Ta(t),t.tag){case 1:return Ai(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $a(),xi(Ti),xi(Ei),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(xi(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Va()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xi(eo),null;case 4:return $a(),null;case 10:return Wi(t.type._context),null;case 22:case 23:return el(),null;default:return null}}var ju=!1,zu=!1,qu="function"===typeof WeakSet?WeakSet:Set,Ku=null;function Gu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dl(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){dl(e,t,r)}}var Wu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Hu(t,n,a)}i=i.next}while(i!==r)}}function Yu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Xu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function $u(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Hu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Gu(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dl(t,n,o)}break;case 5:Gu(t,n);break;case 4:is(e,t,n)}}function Ju(e){var t=e.alternate;null!==t&&(e.alternate=null,Ju(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[li],delete t[ci],delete t[hi],delete t[di],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zu(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Zu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if(Zu(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,l=o,c=n,f=l;;)if($u(s,f,c),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===l)break e;for(;null===f.sibling;){if(null===f.return||f.return===l)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,l=o.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,l=o.stateNode,8===s.nodeType?ai(s.parentNode,l):1===s.nodeType&&ai(s,l),jt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if($u(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),Yu(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&$(n,r),ke(e,i),t=ke(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?ye(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):k(n,u,s,t)}switch(e){case"input":J(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[ci]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&jt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new qu),t.forEach((function(t){var r=ml.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Ku=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Ku;){var i=Ku,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||ju;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||zu;u=ju;var l=zu;if(ju=o,(zu=s)&&!l)for(Ku=i;null!==Ku;)s=(o=Ku).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Ku=s):fs(i);for(;null!==a;)Ku=a,ss(a,t,n),a=a.sibling;Ku=i,ju=u,zu=l}ls(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ku=a):ls(e)}}function ls(e){for(;null!==Ku;){var t=Ku;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:zu||Yu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!zu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ji(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(a(163))}zu||512&t.flags&&Xu(t)}catch(d){dl(t,t.return,d)}}if(t===e){Ku=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}function cs(e){for(;null!==Ku;){var t=Ku;if(t===e){Ku=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ku=n;break}Ku=t.return}}function fs(e){for(;null!==Ku;){var t=Ku;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Yu(4,t)}catch(s){dl(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dl(t,i,s)}}var a=t.return;try{Xu(t)}catch(s){dl(t,a,s)}break;case 5:var o=t.return;try{Xu(t)}catch(s){dl(t,o,s)}}}catch(s){dl(t,t.return,s)}if(t===e){Ku=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ku=u;break}Ku=t.return}}var hs,ds=Math.ceil,vs=b.ReactCurrentDispatcher,ps=b.ReactCurrentOwner,ys=b.ReactCurrentBatchConfig,ms=0,gs=null,ks=null,bs=0,ws=0,xs=wi(0),_s=0,Ss=null,Es=0,Ts=0,Is=0,Cs=null,As=null,Ds=0,Ns=1/0,Ps=!1,Rs=null,Ls=null,Os=!1,Ms=null,Vs=0,Fs=0,Us=null,Bs=-1,js=0;function zs(){return 0!==(6&ms)?$e():-1!==Bs?Bs:Bs=$e()}function qs(e){return 0===(1&e.mode)?1:0!==(2&ms)&&0!==bs?bs&-bs:null!==Bi.transition?(0===js&&(e=lt,0===(4194240&(lt<<=1))&&(lt=64),js=e),js):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ks(e,t,n){if(50<Fs)throw Fs=0,Us=null,Error(a(185));var r=Gs(e,t);return null===r?null:(yt(r,t,n),0!==(2&ms)&&r===gs||(r===gs&&(0===(2&ms)&&(Ts|=t),4===_s&&Xs(r,bs)),Hs(r,n),1===t&&0===ms&&0===(1&e.mode)&&(Ns=$e()+500,Mi&&Ui())),r)}function Gs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Hs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?bs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Fi(e)}($s.bind(null,e)):Fi($s.bind(null,e)),ri((function(){0===ms&&Ui()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gl(n,Ws.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ws(e,t){if(Bs=-1,js=0,0!==(6&ms))throw Error(a(327));var n=e.callbackNode;if(fl()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?bs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=al(e,r);else{t=r;var i=ms;ms|=2;var o=rl();for(gs===e&&bs===t||(Ns=$e()+500,tl(e,t));;)try{ul();break}catch(s){nl(e,s)}Hi(),vs.current=o,ms=i,null!==ks?t=0:(gs=null,bs=0,t=_s)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=Ss,tl(e,0),Xs(e,r),Hs(e,$e()),n;if(6===t)Xs(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=al(e,r))&&(0!==(o=vt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=Ss,tl(e,0),Xs(e,r),Hs(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:cl(e,As);break;case 3:if(Xs(e,r),(130023424&r)===r&&10<(t=Ds+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){zs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(cl.bind(null,e,As),t);break}cl(e,As);break;case 4:if(Xs(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(cl.bind(null,e,As),r);break}cl(e,As);break;default:throw Error(a(329))}}}return Hs(e,$e()),e.callbackNode===n?Ws.bind(null,e):null}function Qs(e,t){var n=Cs;return e.current.memoizedState.isDehydrated&&(tl(e,t).flags|=256),2!==(e=al(e,t))&&(t=As,As=n,null!==t&&Ys(t)),e}function Ys(e){null===As?As=e:As.push.apply(As,e)}function Xs(e,t){for(t&=~Is,t&=~Ts,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function $s(e){if(0!==(6&ms))throw Error(a(327));fl();var t=ht(e,0);if(0===(1&t))return Hs(e,$e()),null;var n=al(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=Ss,tl(e,0),Xs(e,t),Hs(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cl(e,As),Hs(e,$e()),null}function Js(e,t){var n=ms;ms|=1;try{return e(t)}finally{0===(ms=n)&&(Ns=$e()+500,Mi&&Ui())}}function Zs(e){null!==Ms&&0===Ms.tag&&0===(6&ms)&&fl();var t=ms;ms|=1;var n=ys.transition,r=gt;try{if(ys.transition=null,gt=1,e)return e()}finally{gt=r,ys.transition=n,0===(6&(ms=t))&&Ui()}}function el(){ws=xs.current,xi(xs)}function tl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(Ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:$a(),xi(Ti),xi(Ei),ro();break;case 5:Za(r);break;case 4:$a();break;case 13:case 19:xi(eo);break;case 10:Wi(r.type._context);break;case 22:case 23:el()}n=n.return}if(gs=e,ks=e=xl(e.current,null),bs=ws=t,_s=0,Ss=null,Is=Ts=Es=0,As=Cs=null,null!==$i){for(t=0;t<$i.length;t++)if(null!==(r=(n=$i[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}$i=null}return e}function nl(e,t){for(;;){var n=ks;try{if(Hi(),io.current=Jo,co){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}co=!1}if(oo=0,lo=so=uo=null,fo=!1,ho=0,ps.current=null,null===n||null===n.return){_s=1,Ss=t,ks=null;break}e:{var o=e,u=n.return,s=n,l=t;if(t=bs,s.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=fu(u);if(null!==v){v.flags&=-257,hu(v,u,s,0,t),1&v.mode&&cu(o,c,t),l=c;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(l),t.updateQueue=y}else p.add(l);break e}if(0===(1&t)){cu(o,c,t),il();break e}l=Error(a(426))}else if(Aa&&1&s.mode){var m=fu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),hu(m,u,s,0,t),Fa(l);break e}}o=l,4!==_s&&(_s=2),null===Cs?Cs=[o]:Cs.push(o),l=nu(l,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,l,t));break e;case 1:o=l;var g=s.type,k=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ls||!Ls.has(k)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,lu(s,o,t));break e}}s=s.return}while(null!==s)}ll(n)}catch(b){t=b,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function rl(){var e=vs.current;return vs.current=Jo,null===e?Jo:e}function il(){0!==_s&&3!==_s&&2!==_s||(_s=4),null===gs||0===(268435455&Es)&&0===(268435455&Ts)||Xs(gs,bs)}function al(e,t){var n=ms;ms|=2;var r=rl();for(gs===e&&bs===t||tl(e,t);;)try{ol();break}catch(i){nl(e,i)}if(Hi(),ms=n,vs.current=r,null!==ks)throw Error(a(261));return gs=null,bs=0,_s}function ol(){for(;null!==ks;)sl(ks)}function ul(){for(;null!==ks&&!Ye();)sl(ks)}function sl(e){var t=hs(e.alternate,e,ws);e.memoizedProps=e.pendingProps,null===t?ll(e):ks=t,ps.current=null}function ll(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=pu(n,t,ws)))return void(ks=n)}else{if(null!==(n=Bu(n,t)))return n.flags&=32767,void(ks=n);if(null===e)return _s=6,void(ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(ks=t);ks=t=e}while(null!==t);0===_s&&(_s=5)}function cl(e,t){var n=gt,r=ys.transition;try{ys.transition=null,gt=1,function(e,t,n){do{fl()}while(null!==Ms);if(0!==(6&ms))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(ks=gs=null,bs=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Os||(Os=!0,gl(tt,(function(){return fl(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ys.transition,ys.transition=null;var u=gt;gt=1;var s=ms;ms|=4,ps.current=null,function(e,t){if(fr(e=cr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var u=0,s=-1,l=-1,c=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(l=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++c===i&&(s=u),d===o&&++f===r&&(l=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jr={focusedElem:e,selectionRange:n},Ku=t;null!==Ku;)if(e=(t=Ku).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ku=e;else for(;null!==Ku;){t=Ku;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ji(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(x){dl(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Ku=e;break}Ku=t.return}p=Wu,Wu=!1}(e,r),function(e,t){for(Ku=t;null!==Ku;){var n=(t=Ku).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(S){dl(i,t,S)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Ku=n;else for(;null!==Ku;){t=Ku;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var l=t.alternate;null!==l&&null!==l.memoizedState||(Ds=$e())}break;case 22:var c=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=c;for(var d=null,v=r=n=t;;){if(5===v.tag){if(null===d){d=v;var p=v.stateNode;if(i){var y=p.style;"function"===typeof y.setProperty?y.setProperty("display","none","important"):y.display="none"}else{var m=v.stateNode,g=v.memoizedProps.style,k=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;m.style.display=pe("display",k)}}}else if(6===v.tag)null===d&&(v.stateNode.nodeValue=i?"":v.memoizedProps);else if((22!==v.tag&&23!==v.tag||null===v.memoizedState||v===r)&&null!==v.child){v.child.return=v,v=v.child;continue}if(v===r)break;for(;null===v.sibling;){if(null===v.return||v.return===r)break e;d===v&&(d=null),v=v.return}d===v&&(d=null),v.sibling.return=v.return,v=v.sibling}}if(c&&!h&&0!==(1&n.mode)){Ku=n;for(var b=n.child;null!==b;){for(n=Ku=b;null!==Ku;){var w=(r=Ku).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Gu(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var _=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(S){dl(r,_,S)}}break;case 5:Gu(r,r.return);break;case 22:if(null!==r.memoizedState){cs(n);continue}}null!==w?(w.return=r,Ku=w):cs(n)}b=b.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(S){dl(t,t.return,S)}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}}(e,r),hr(Jr),Jr=null,e.current=r,us(r,e,i),Xe(),ms=s,gt=u,ys.transition=o}else e.current=r;if(Os&&(Os=!1,Ms=e,Vs=i),0===(o=e.pendingLanes)&&(Ls=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Hs(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Ps)throw Ps=!1,e=Rs,Rs=null,e;0!==(1&Vs)&&0!==e.tag&&fl(),0!==(1&(o=e.pendingLanes))?e===Us?Fs++:(Fs=0,Us=e):Fs=0,Ui()}(e,t,n)}finally{ys.transition=r,gt=n}return null}function fl(){if(null!==Ms){var e=kt(Vs),t=ys.transition,n=gt;try{if(ys.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Vs=0,0!==(6&ms))throw Error(a(331));var i=ms;for(ms|=4,Ku=e.current;null!==Ku;){var o=Ku,u=o.child;if(0!==(16&Ku.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var c=s[l];for(Ku=c;null!==Ku;){var f=Ku;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ku=h;else for(;null!==Ku;){var d=(f=Ku).sibling,v=f.return;if(Ju(f),f===c){Ku=null;break}if(null!==d){d.return=v,Ku=d;break}Ku=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Ku=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ku=u;else e:for(;null!==Ku;){if(0!==(2048&(o=Ku).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ku=g;break e}Ku=o.return}}var k=e.current;for(Ku=k;null!==Ku;){var b=(u=Ku).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ku=b;else e:for(u=k;null!==Ku;){if(0!==(2048&(s=Ku).flags))try{switch(s.tag){case 0:case 11:case 15:Yu(9,s)}}catch(x){dl(s,s.return,x)}if(s===u){Ku=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ku=w;break e}Ku=s.return}}if(ms=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{gt=n,ys.transition=t}}return!1}function hl(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=zs(),null!==(e=Gs(e,1))&&(yt(e,1,t),Hs(e,t))}function dl(e,t,n){if(3===e.tag)hl(e,e,n);else for(;null!==t;){if(3===t.tag){hl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ls||!Ls.has(r))){na(t,e=lu(t,e=nu(n,e),1)),e=zs(),null!==(t=Gs(t,1))&&(yt(t,1,e),Hs(t,e));break}}t=t.return}}function vl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=zs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(bs&n)===n&&(4===_s||3===_s&&(130023424&bs)===bs&&500>$e()-Ds?tl(e,0):Is|=n),Hs(e,t)}function pl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=zs();null!==(e=Gs(e,t))&&(yt(e,t,n),Hs(e,n))}function yl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pl(e,n)}function ml(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),pl(e,n)}function gl(e,t){return We(e,t)}function kl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bl(e,t,n,r){return new kl(e,t,n,r)}function wl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function xl(e,t){var n=e.alternate;return null===n?((n=bl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _l(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)wl(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Sl(n.children,i,o,t);case S:u=8,i|=8;break;case E:return(e=bl(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=bl(13,n,t,i)).elementType=A,e.lanes=o,e;case D:return(e=bl(19,n,t,i)).elementType=D,e.lanes=o,e;case R:return El(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=bl(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Sl(e,t,n,r){return(e=bl(7,e,r,t)).lanes=n,e}function El(e,t,n,r){return(e=bl(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={},e}function Tl(e,t,n){return(e=bl(6,e,null,t)).lanes=n,e}function Il(e,t,n){return(t=bl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Al(e,t,n,r,i,a,o,u,s){return e=new Cl(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=bl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Zi(a),e}function Dl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Nl(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Pi(e,n,t)}return t}function Pl(e,t,n,r,i,a,o,u,s){return(e=Al(n,r,!0,e,0,a,0,u,s)).context=Nl(null),n=e.current,(a=ta(r=zs(),i=qs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,yt(e,i,r),Hs(e,r),e}function Rl(e,t,n,r){var i=t.current,a=zs(),o=qs(i);return n=Nl(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ks(i,o,a))&&ra(e,i,o),o}function Ll(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ol(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ml(e,t){Ol(e,t),(e=e.alternate)&&Ol(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)mu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return mu=!1,function(e,t,n){switch(t.tag){case 3:Iu(t),Va();break;case 5:Ja(t);break;case 1:Ai(t.type)&&Ri(t);break;case 4:Xa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_i(zi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_i(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Nu(e,t,n):(_i(eo,1&eo.current),null!==(e=Uu(e,t,n))?e.sibling:null);_i(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Fu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),_i(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,xu(e,t,n)}return Uu(e,t,n)}(e,t,n);mu=0!==(131072&e.flags)}else mu=!1,Aa&&0!==(1048576&t.flags)&&Sa(t,ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ci(t,Ei.current);Yi(t,n),i=mo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Zi(t),i.updater=la,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=Tu(null,t,r,!0,o,n)):(t.tag=0,Aa&&o&&Ea(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return wl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ji(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=ku(null,t,r,e,n);break e;case 14:t=bu(null,t,r,ji(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 3:e:{if(Iu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Cu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Cu(e,t,r,n,i=Error(a(424)));break e}for(Ca=oi(t.stateNode.containerInfo.firstChild),Ia=t,Aa=!0,Da=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Va(),r===i){t=Uu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&La(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,Zr(r,i)?u=null:null!==o&&Zr(r,o)&&(t.flags|=32),_u(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&La(t),null;case 13:return Nu(e,t,n);case 4:return Xa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qa(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ku(e,t,r,i=t.elementType===r?i:ji(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,_i(zi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!Ti.current){t=Uu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=ta(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?l.next=l:(l.next=f.next,f.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Yi(t,n),r=r(i=Xi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=ji(r=t.type,t.pendingProps),bu(e,t,r,i=ji(r.type,i),n);case 15:return wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ai(r)?(e=!0,Ri(t)):e=!1,Yi(t,n),fa(t,r,i),da(t,r,i,n),Tu(null,t,r,!0,e,n);case 19:return Fu(e,t,n);case 22:return xu(e,t,n)}throw Error(a(156,t.tag))};var Vl="function"===typeof reportError?reportError:function(e){console.error(e)};function Fl(e){this._internalRoot=e}function Ul(e){this._internalRoot=e}function Bl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function zl(){}function ql(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Ll(o);u.call(e)}}Rl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Ll(o);a.call(e)}}var o=Pl(t,r,e,0,null,!1,0,"",zl);return e._reactRootContainer=o,e[fi]=o.current,Br(8===e.nodeType?e.parentNode:e),Zs(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Ll(s);u.call(e)}}var s=Al(e,0,!1,null,0,!1,0,"",zl);return e._reactRootContainer=s,e[fi]=s.current,Br(8===e.nodeType?e.parentNode:e),Zs((function(){Rl(t,s,n,r)})),s}(n,t,e,i,r);return Ll(o)}Ul.prototype.render=Fl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Rl(e,t,null,null)},Ul.prototype.unmount=Fl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zs((function(){Rl(null,e,null,null)})),t[fi]=null}},Ul.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(mt(t,1|n),Hs(t,$e()),0===(6&ms)&&(Ns=$e()+500,Ui()))}break;case 13:var r=zs();Zs((function(){return Ks(e,1,r)})),Ml(e,1)}},wt=function(e){13===e.tag&&(Ks(e,134217728,zs()),Ml(e,134217728))},xt=function(e){if(13===e.tag){var t=zs(),n=qs(e);Ks(e,n,t),Ml(e,n)}},_t=function(){return gt},St=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=Js,Ae=Zs;var Kl={usingClientEntryPoint:!1,Events:[yi,mi,gi,Te,Ie,Js]},Gl={findFiberByHostInstance:pi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Hl={bundleType:Gl.bundleType,version:Gl.version,rendererPackageName:Gl.rendererPackageName,rendererConfig:Gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:Gl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wl.isDisabled&&Wl.supportsFiber)try{it=Wl.inject(Hl),at=Wl}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Bl(t))throw Error(a(200));return Dl(e,t,null,n)},t.createRoot=function(e,t){if(!Bl(e))throw Error(a(299));var n=!1,r="",i=Vl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Al(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Fl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return Zs(e)},t.hydrate=function(e,t,n){if(!jl(t))throw Error(a(200));return ql(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Bl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Vl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Pl(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ul(t)},t.render=function(e,t,n){if(!jl(t))throw Error(a(200));return ql(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!jl(e))throw Error(a(40));return!!e._reactRootContainer&&(Zs((function(){ql(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Js,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!jl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ql(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:a,_owner:u.current}}t.jsx=l,t.jsxs=l},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];a.children=l}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var l=0;l<e.length;l++){var c=a+C(u=e[l],l);s+=A(u,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,c=a+C(u,l++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function D(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:D,forEach:function(e,t,n){D(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return D(e,(function(){t++})),t},toArray:function(e){return D(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)x.call(t,l)&&!S.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},329:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===v){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=c(e,t,n);if("normal"===s.type){if(r=n.done?v:h,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=l;var f="suspendedStart",h="suspendedYield",d="executing",v="completed",p={};function y(){}function m(){}function g(){}var k={};s(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==n&&r.call(w,a)&&(k=w);var x=g.prototype=y.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(S.prototype),s(S.prototype,o,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),s(x,u,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],l=u+1,c=e[l];if(0>a(s,n))l<i&&0>a(c,s)?(e[r]=c,e[l]=n,r=l):(e[r]=s,e[u]=n,r=u);else{if(!(l<i&&0>a(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var l=[],c=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(y=!1,b(e),!p)if(null!==r(l))p=!0,R(x);else{var t=r(c);null!==t&&L(w,t.startTime-e)}}function x(e,n){p=!1,y&&(y=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(l)&&i(l),b(n)}else i(l);h=r(l)}if(null!==h)var s=!0;else{var f=r(c);null!==f&&L(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function D(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof k)_=function(){k(D)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=D,_=function(){P.postMessage(null)}}else _=function(){m(D,0)};function R(e){E=e,S||(S=!0,_())}function L(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(l)&&e===r(c)&&(y?(g(T),T=-1):y=!0,L(w,a-o))):(e.sortIndex=u,n(l,e),p||v||(p=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Photo-Gallery/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return F},SDK_VERSION:function(){return Pe},_DEFAULT_ENTRY_NAME:function(){return ke},_addComponent:function(){return _e},_addOrOverwriteComponent:function(){return Se},_apps:function(){return we},_clearComponents:function(){return Ce},_components:function(){return xe},_getProvider:function(){return Te},_registerComponent:function(){return Ee},_removeServiceInstance:function(){return Ie},deleteApp:function(){return Me},getApp:function(){return Le},getApps:function(){return Oe},initializeApp:function(){return Re},onLog:function(){return Ue},registerVersion:function(){return Fe},setLogLevel:function(){return Be}});var t=n(791),r=n(164);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=n.p+"static/media/1.ac4a90ed6f3ec23f6a8b.png",s=n(329),l=function(){return(0,s.jsxs)("div",{className:"title",children:[(0,s.jsx)("img",{className:"logo",src:u,alt:"logo"}),(0,s.jsx)("h2",{children:"Your Pictures"}),(0,s.jsx)("p",{children:"Add Your Pictures Here"})]})};function c(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){c(a,r,i,o,u,"next",e)}function u(e){c(a,r,i,o,u,"throw",e)}o(void 0)}))}}var h=n(757),d=n.n(h);function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){if(t&&("object"===S(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function T(e){var t=_();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E(this,n)}}function I(e,t,n){return I=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i},I.apply(null,arguments)}function C(e){var t="function"===typeof Map?new Map:void 0;return C=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,x(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},C(e)}var A=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,c=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|l>>6,d=63&l;s||(d=64,o||(h=64)),r.push(n[c],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(A(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var l=a<<2|o>>4;if(r.push(l),64!==u){var c=o<<4&240|u>>2;if(r.push(c),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N=function(e){return function(e){var t=A(e);return D.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function P(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=P(e[n],t[n]));return e}var R=function(){function e(){var t=this;p(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function L(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[N(JSON.stringify({alg:"none",type:"JWT"})),N(JSON.stringify(a)),""].join(".")}function O(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function M(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V(){return"object"===typeof indexedDB}var F=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),U.prototype.create),a}return m(n)}(C(Error)),U=function(){function e(t,n,r){p(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?B(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new F(n,a,t);return o}}]),e}();function B(e,t){return e.replace(j,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var j=/\{\$([^}]+)}/g;function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function q(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(K(u)&&K(s)){if(!q(u,s))return!1}else if(u!==s)return!1}for(var l=0,c=r;l<c.length;l++){var f=c[l];if(!n.includes(f))return!1}return!0}function K(e){return null!==e&&"object"===typeof e}function G(e,t){var n=new H(e,t);return n.subscribe.bind(n)}var H=function(){function e(t,n){var r=this;p(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function W(){}function Q(e){return e&&e._delegate?e._delegate:e}function Y(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var X=function(){function e(t){p(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return m(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new $(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new J(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),$=function(){function e(t){var n=this;p(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return m(e,[{key:"objectStore",value:function(e){return new J(this._transaction.objectStore(e))}}]),e}(),J=function(){function e(t){p(this,e),this._store=t}return m(e,[{key:"index",value:function(e){return new Z(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Z(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Y(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Y(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Y(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Y(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Z=function(){function e(t){p(this,e),this._index=t}return m(e,[{key:"get",value:function(e){return Y(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function ee(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=function(){function e(t,n,r){p(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ne="[DEFAULT]",re=function(){function e(t,n){p(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new R;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(l){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=o(t.value,2),i=r[0],a=r[1],u=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:u});a.resolve(s)}catch(l){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=f(h.mark((function e(){var t;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ee(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ee(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=g(this.instancesDeferred.entries());try{for(u.s();!(i=u.n()).done;){var s=o(i.value,2),l=s[0],c=s[1],f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}}catch(h){u.e(h)}finally{u.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(hy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ne?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(hy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne;return this.component?this.component.multipleInstances?e:ne:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ie,ae,oe=function(){function e(t){p(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new re(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ue=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ae||(ae={}));var se,le,ce={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},fe=ae.INFO,he=(v(ie={},ae.DEBUG,"log"),v(ie,ae.VERBOSE,"log"),v(ie,ae.INFO,"info"),v(ie,ae.WARN,"warn"),v(ie,ae.ERROR,"error"),ie),de=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=he[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ve=function(){function e(t){p(this,e),this.name=t,this._logLevel=fe,this._logHandler=de,this._userLogHandler=null,ue.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ae))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ce[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.DEBUG].concat(t)),this._logHandler.apply(this,[this,ae.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ae.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.INFO].concat(t)),this._logHandler.apply(this,[this,ae.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.WARN].concat(t)),this._logHandler.apply(this,[this,ae.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ae.ERROR].concat(t)),this._logHandler.apply(this,[this,ae.ERROR].concat(t))}}]),e}();var pe=function(){function e(t){p(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var ye="@firebase/app",me="0.7.22",ge=new ve("@firebase/app"),ke="[DEFAULT]",be=(v(se={},ye,"fire-core"),v(se,"@firebase/app-compat","fire-core-compat"),v(se,"@firebase/analytics","fire-analytics"),v(se,"@firebase/analytics-compat","fire-analytics-compat"),v(se,"@firebase/app-check","fire-app-check"),v(se,"@firebase/app-check-compat","fire-app-check-compat"),v(se,"@firebase/auth","fire-auth"),v(se,"@firebase/auth-compat","fire-auth-compat"),v(se,"@firebase/database","fire-rtdb"),v(se,"@firebase/database-compat","fire-rtdb-compat"),v(se,"@firebase/functions","fire-fn"),v(se,"@firebase/functions-compat","fire-fn-compat"),v(se,"@firebase/installations","fire-iid"),v(se,"@firebase/installations-compat","fire-iid-compat"),v(se,"@firebase/messaging","fire-fcm"),v(se,"@firebase/messaging-compat","fire-fcm-compat"),v(se,"@firebase/performance","fire-perf"),v(se,"@firebase/performance-compat","fire-perf-compat"),v(se,"@firebase/remote-config","fire-rc"),v(se,"@firebase/remote-config-compat","fire-rc-compat"),v(se,"@firebase/storage","fire-gcs"),v(se,"@firebase/storage-compat","fire-gcs-compat"),v(se,"@firebase/firestore","fire-fst"),v(se,"@firebase/firestore-compat","fire-fst-compat"),v(se,"fire-js","fire-js"),v(se,"firebase","fire-js-all"),se),we=new Map,xe=new Map;function _e(e,t){try{e.container.addComponent(t)}catch(n){ge.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Se(e,t){e.container.addOrOverwriteComponent(t)}function Ee(e){var t=e.name;if(xe.has(t))return ge.debug("There were multiple attempts to register component ".concat(t,".")),!1;xe.set(t,e);var n,r=g(we.values());try{for(r.s();!(n=r.n()).done;){_e(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Te(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ke;Te(e,t).clearInstance(n)}function Ce(){xe.clear()}var Ae=(v(le={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(le,"bad-app-name","Illegal App name: '{$appName}"),v(le,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),v(le,"app-deleted","Firebase App named '{$appName}' already deleted"),v(le,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),v(le,"invalid-log-argument","First argument to `onLog` must be null or a function."),v(le,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),v(le,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),v(le,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),v(le,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),le),De=new U("app","Firebase",Ae),Ne=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new te("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw De.create("app-deleted",{appName:this._name})}}]),e}(),Pe="9.7.0";function Re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:ke,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw De.create("bad-app-name",{appName:String(i)});var a=we.get(i);if(a){if(q(e,a.options)&&q(r,a.config))return a;throw De.create("duplicate-app",{appName:i})}var o,u=new oe(i),s=g(xe.values());try{for(s.s();!(o=s.n()).done;){var l=o.value;u.addComponent(l)}}catch(f){s.e(f)}finally{s.f()}var c=new Ne(e,r,u);return we.set(i,c),c}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=we.get(e);if(!t)throw De.create("no-app",{appName:e});return t}function Oe(){return Array.from(we.values())}function Me(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=f(h.mark((function e(t){var n;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!we.has(n)){e.next=6;break}return we.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t,n){var r,i=null!==(r=be[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ge.warn(u.join(" "))}Ee(new te("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ue(e,t){if(null!==e&&"function"!==typeof e)throw De.create("invalid-log-argument");!function(e,t){var n,r=g(ue);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ce[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ae[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Be(e){var t;t=e,ue.forEach((function(e){e.setLogLevel(t)}))}var je="firebase-heartbeat-store",ze=null;function qe(){var e,t,n;return ze||(ze=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(je)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new X(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new X(a.result),e.oldVersion,e.newVersion,new $(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw De.create("storage-open",{originalErrorMessage:e.message})}))),ze}function Ke(e){return Ge.apply(this,arguments)}function Ge(){return Ge=f(h.mark((function e(t){var n;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe();case 3:return n=e.sent,e.abrupt("return",n.transaction(je).objectStore(je).get(Qe(t)));case 7:throw e.prev=7,e.t0=e.catch(0),De.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Ge.apply(this,arguments)}function He(e,t){return We.apply(this,arguments)}function We(){return We=f(h.mark((function e(t,n){var r,i,a;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe();case 3:return r=e.sent,i=r.transaction(je,"readwrite"),a=i.objectStore(je),e.next=8,a.put(n,Qe(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),De.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),We.apply(this,arguments)}function Qe(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ye=function(){function e(t){var n=this;p(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new et(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=f(h.mark((function e(){var t,n,r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Xe(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=f(h.mark((function e(){var t,n,r,i,a;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Xe(),n=$e(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=N(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Xe(){return(new Date).toISOString().substring(0,10)}function $e(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=g(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),tt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),tt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Je,Ze,et=function(){function e(t){p(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=f(h.mark((function e(){return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=f(h.mark((function e(){var t;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Ke(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=f(h.mark((function e(t){var n,r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",He(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=f(h.mark((function e(t){var n,r;return h.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",He(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ee(r.heartbeats),ee(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function tt(e){return N(JSON.stringify({version:2,heartbeats:e})).length}Je="",Ee(new te("platform-logger",(function(e){return new pe(e)}),"PRIVATE")),Ee(new te("heartbeat",(function(e){return new Ye(e)}),"PRIVATE")),Fe(ye,me,Je),Fe(ye,me,"esm2017"),Fe("fire-js","");var nt=function(){function e(t,n){var r=this;p(this,e),this._delegate=t,this.firebase=n,_e(t,new te("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Me(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ke;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){_e(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Se(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),rt=(v(Ze={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(Ze,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ze),it=new U("app-compat","Firebase",rt);var at=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Re(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(z(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Fe,setLogLevel:Be,onLog:Ue,apps:null,SDK_VERSION:Pe,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ee(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw it.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&P(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!z(n,e=e||ke))throw it.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(nt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){P(n,e)},createSubscribe:G,ErrorFactory:U,deepExtend:P}),n}(),ot=new ve("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ot.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ut=self.firebase.SDK_VERSION;ut&&ut.indexOf("LITE")>=0&&ot.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var st=at;!function(e){Fe("@firebase/app-compat","0.1.23",e)}();st.registerVersion("firebase","9.7.0","app-compat");var lt="firebasestorage.googleapis.com",ct=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,ft(e),"Firebase Storage: ".concat(r," (").concat(ft(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return m(n,[{key:"_codeEquals",value:function(e){return ft(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(F);function ft(e){return"storage/"+e}function ht(){return new ct("unknown","An unknown error occurred, please check the error payload for server response.")}function dt(){return new ct("canceled","User canceled the upload/download.")}function vt(){return new ct("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function pt(e){return new ct("invalid-argument",e)}function yt(){return new ct("app-deleted","The Firebase app was deleted.")}function mt(e){return new ct("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gt(e,t){return new ct("invalid-format","String does not match format '"+e+"': "+t)}function kt(e){throw new ct("internal-error","Internal error: "+e)}var bt,wt=function(){function e(t,n){p(this,e),this.bucket=t,this.path_=n}return m(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new ct("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===lt?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],l=0;l<s.length;l++){var c=s[l],f=c.regex.exec(t);if(f){var h=f[c.indices.bucket],d=f[c.indices.path];d||(d=""),r=new e(h,d),c.postModify(r);break}}if(null==r)throw function(e){return new ct("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),xt=function(){function e(t){p(this,e),this.promise_=Promise.reject(t)}return m(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function _t(e){return"string"===typeof e||e instanceof String}function St(e){return Et()&&e instanceof Blob}function Et(){return"undefined"!==typeof Blob}function Tt(e,t,n,r){if(r<t)throw pt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw pt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function It(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Ct(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(bt||(bt={}));var At=function(){function e(t,n,r,i,a,o,u,s,l,c,f){var h=this;p(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return m(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=ht();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?yt():dt());else i(new ct("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new Dt(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(l)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void c.call.apply(c,[null,e].concat(n));var a;if(s()||o)return h(),void c.call.apply(c,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),l||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Dt(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===bt.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new Dt(o,r))}else{var u=r.getErrorCode()===bt.ABORT;t(!1,new Dt(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),Dt=m((function e(t,n,r){p(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Nt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Pt(){for(var e=Nt(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Et())return new Blob(n);throw new ct("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Rt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Lt=m((function e(t,n){p(this,e),this.data=t,this.contentType=n||null}));function Ot(e,t){switch(e){case Rt.RAW:return new Lt(Mt(t));case Rt.BASE64:case Rt.BASE64URL:return new Lt(Vt(e,t));case Rt.DATA_URL:return new Lt(function(e){var t=new Ft(e);return t.base64?Vt(Rt.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw gt(Rt.DATA_URL,"Malformed data URL.")}return Mt(t)}(t.rest)}(t),new Ft(t).contentType)}throw ht()}function Mt(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Vt(e,t){switch(e){case Rt.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw gt(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Rt.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw gt(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(l){throw gt(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var Ft=m((function e(t){p(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw gt(Rt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Ut=function(){function e(t,n){p(this,e);var r=0,i="";St(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return m(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(St(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Et()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Pt.apply(null,i))}var a=n.map((function(e){return _t(e)?Ot(Rt.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function Bt(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function jt(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function zt(e,t){return t}var qt=m((function e(t,n,r,i){p(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||zt})),Kt=null;function Gt(){if(Kt)return Kt;var e=[];e.push(new qt("bucket")),e.push(new qt("generation")),e.push(new qt("metageneration")),e.push(new qt("name","fullPath",!0));var t=new qt("name");t.xform=function(e,t){return function(e){return!_t(e)||e.length<2?e:jt(e)}(t)},e.push(t);var n=new qt("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new qt("timeCreated")),e.push(new qt("updated")),e.push(new qt("md5Hash",null,!0)),e.push(new qt("cacheControl",null,!0)),e.push(new qt("contentDisposition",null,!0)),e.push(new qt("contentEncoding",null,!0)),e.push(new qt("contentLanguage",null,!0)),e.push(new qt("contentType",null,!0)),e.push(new qt("metadata","customMetadata",!0)),Kt=e}function Ht(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new wt(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Wt(e,t,n){var r=Bt(t);return null===r?null:Ht(e,r,n)}function Qt(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Yt(e,t,n){var r=Bt(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=g(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new wt(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var s,l=g(n.items);try{for(l.s();!(s=l.n()).done;){var c=s.value,f=e._makeStorageReference(new wt(t,c.name));r.items.push(f)}}catch(h){l.e(h)}finally{l.f()}}return r}(e,t,r)}var Xt=m((function e(t,n,r,i){p(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function $t(e){if(!e)throw ht()}function Jt(e,t){return function(n,r){var i=Wt(e,r,t);return $t(null!==i),i}}function Zt(e,t){return function(n,r){var i=Wt(e,r,t);return $t(null!==i),function(e,t,n,r){var i=Bt(t);if(null===i)return null;if(!_t(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return It("/b/"+o(i)+"/o/"+o(a),n,r)+Ct({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function en(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ct("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ct("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new ct("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ct("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function tn(e){var t=en(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new ct("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function nn(e,t,n){var r=It(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Xt(r,"GET",Jt(e,n),i);return a.errorHandler=tn(t),a}function rn(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=It(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Xt(o,"GET",function(e,t){return function(n,r){var i=Yt(e,t,r);return $t(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=en(t),s}function an(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function on(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=an(t,r,i),l="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qt(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",c="\r\n--"+u+"--",f=Ut.getBlob(l,r,c);if(null===f)throw vt();var h={name:s.fullPath},d=It(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new Xt(d,"POST",Jt(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=en(t),p}var un=m((function e(t,n,r,i){p(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function sn(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){$t(!1)}return $t(!!n&&-1!==(t||["active"]).indexOf(n)),n}var ln=262144;function cn(e,t,n,r,i,a,o,u){var s=new un(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new ct("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=s.total-s.current,c=l;i>0&&(c=Math.min(c,i));var f=s.current,h=f+c,d={"X-Goog-Upload-Command":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw vt();var p=t.maxUploadRetryTime,y=new Xt(n,"POST",(function(e,n){var i,o=sn(e,["active","final"]),u=s.current+c,l=r.size();return i="final"===o?Jt(t,a)(e,n):null,new un(u,l,"final"===o,i)}),p);return y.headers=d,y.body=v.uploadData(),y.progressCallback=u||null,y.errorHandler=en(e),y}var fn={STATE_CHANGED:"state_changed"},hn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dn(e){switch(e){case"running":case"pausing":case"canceling":return hn.RUNNING;case"paused":return hn.PAUSED;case"success":return hn.SUCCESS;case"canceled":return hn.CANCELED;default:return hn.ERROR}}var vn=m((function e(t,n,r){p(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function pn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var yn=function(){function e(){var t=this;p(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bt.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=bt.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=bt.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return m(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw kt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw kt("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw kt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw kt("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw kt("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),mn=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(yn);function gn(){return new mn}var kn=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Gt(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return m(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=o(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=an(t,r,i),u={name:o.fullPath},s=It(a,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},c=Qt(o,n),f=e.maxUploadRetryTime,h=new Xt(s,"POST",(function(e){var t;sn(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){$t(!1)}return $t(_t(t)),t}),f);return h.urlParams=u,h.headers=l,h.body=c,h.errorHandler=en(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,gn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Xt(n,"POST",(function(e){var t=sn(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){$t(!1)}n||$t(!1);var i=Number(n);return $t(!isNaN(i)),new un(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=en(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,gn,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=ln*this._chunkMultiplier,n=new un(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=cn(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,gn,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){ln*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=nn(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,gn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=on(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,gn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=dt(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=dn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new vn(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(dn(this._state)){case hn.SUCCESS:pn(this._resolve.bind(null,this.snapshot))();break;case hn.CANCELED:case hn.ERROR:pn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(dn(this._state)){case hn.RUNNING:case hn.PAUSED:e.next&&pn(e.next.bind(e,this.snapshot))();break;case hn.SUCCESS:e.complete&&pn(e.complete.bind(e))();break;default:e.error&&pn(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),bn=function(){function e(t,n){p(this,e),this._service=t,this._location=n instanceof wt?n:wt.makeFromUrl(n,t.host)}return m(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new wt(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return jt(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new wt(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw mt(e)}}]),e}();function wn(e,t,n){return xn.apply(this,arguments)}function xn(){return(xn=f(d().mark((function e(t,n,r){var i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,_n(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,ee(u.prefixes)),(a=n.items).push.apply(a,ee(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,wn(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _n(e,t){null!=t&&"number"===typeof t.maxResults&&Tt("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=rn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,gn)}function Sn(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=It(t.fullServerUrl(),e.host,e._protocol),a=Qt(n,r),o=e.maxOperationRetryTime,u=new Xt(i,"PATCH",Jt(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=tn(t),u}(e.storage,e._location,t,Gt());return e.storage.makeRequestWithTokens(n,gn)}function En(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=It(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Xt(r,"GET",Zt(e,n),i);return a.errorHandler=tn(t),a}(e.storage,e._location,Gt());return e.storage.makeRequestWithTokens(t,gn).then((function(e){if(null===e)throw new ct("no-download-url","The given file does not have any download URLs.");return e}))}function Tn(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=It(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Xt(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=tn(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,gn)}function In(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new wt(e._location.bucket,n);return new bn(e.storage,r)}function Cn(e,t){if(e instanceof Pn){var n=e;if(null==n._bucket)throw new ct("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new bn(n,n._bucket);return null!=t?Cn(r,t):r}return void 0!==t?In(e,t):e}function An(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Pn)return new bn(e,t);throw pt("To use ref(service, url), the first argument must be a Storage instance.")}return Cn(e,t)}function Dn(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:wt.makeFromBucketSpec(n,e)}function Nn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:L(i,e.app.options.projectId))}var Pn=function(){function e(t,n,r,i,a){p(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=lt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?wt.makeFromBucketSpec(i,this._host):Dn(this._host,this.app.options)}return m(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=wt.makeFromBucketSpec(this._url,e):this._bucket=Dn(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Tt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Tt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=f(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=f(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new bn(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new xt(yt());var a=function(e,t,n,r,i,a){var o=Ct(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new At(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=f(d().mark((function e(t,n){var r,i,a,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=o(r,2),a=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,a,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Rn="@firebase/storage",Ln="0.9.5",On="storage";function Mn(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new kn(e,new Ut(t),n)}(e=Q(e),t,n)}function Vn(e){return function(e){e._throwIfRoot("getMetadata");var t=nn(e.storage,e._location,Gt());return e.storage.makeRequestWithTokens(t,gn)}(e=Q(e))}function Fn(e){return function(e){var t={prefixes:[],items:[]};return wn(e,t).then((function(){return t}))}(e=Q(e))}function Un(e,t){return An(e=Q(e),t)}function Bn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Nn(e,t,n,r)}function jn(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Pn(r,i,a,n,Pe)}Ee(new te(On,jn,"PUBLIC").setMultipleInstances(!0)),Fe(Rn,Ln,""),Fe(Rn,Ln,"esm2017");var zn=function(){function e(t,n,r){p(this,e),this._delegate=t,this.task=n,this.ref=r}return m(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),qn=function(){function e(t,n){p(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return m(e,[{key:"snapshot",get:function(){return new zn(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new zn(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new zn(e,i,i._ref))}:{next:t.next?function(e){return t.next(new zn(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Kn=function(){function e(t,n){p(this,e),this._delegate=t,this._service=n}return m(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Gn(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Gn(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Gn=function(){function e(t,n){p(this,e),this._delegate=t,this.storage=n}return m(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return In(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new qn(Mn(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Ot(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new qn(new kn(this._delegate,new Ut(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Fn(this._delegate).then((function(t){return new Kn(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return _n(e=Q(e),t)}(this._delegate,e||void 0).then((function(e){return new Kn(e,t.storage)}))}},{key:"getMetadata",value:function(){return Vn(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Sn(e=Q(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return En(Q(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Tn(Q(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw mt(e)}}]),e}(),Hn=function(){function e(t,n){p(this,e),this.app=t,this._delegate=n}return m(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Wn(e))throw pt("ref() expected a child path but got a URL, use refFromURL instead.");return new Gn(Un(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Wn(e))throw pt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{wt.makeFromUrl(e,this._delegate.host)}catch(t){throw pt("refFromUrl() expected a valid full URL but got an invalid one.")}return new Gn(Un(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bn(this._delegate,e,t,n)}}]),e}();function Wn(e){return/^[A-Za-z]+:\/\//.test(e)}function Qn(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Hn(r,i)}function Yn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function Xn(){return Xn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Yn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xn.apply(this,arguments)}!function(e){var t={TaskState:hn,TaskEvent:fn,StringFormat:Rt,Storage:Hn,Reference:Gn};e.INTERNAL.registerComponent(new te("storage-compat",Qn,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.13")}(st);var $n,Jn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Zn={},er=er||{},tr=Jn||self;function nr(){}function rr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ir(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ar="closure_uid_"+(1e9*Math.random()>>>0),or=0;function ur(e,t,n){return e.call.apply(e.bind,arguments)}function sr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function lr(e,t,n){return(lr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ur:sr).apply(null,arguments)}function cr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function fr(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function hr(){this.s=this.s,this.o=this.o}var dr={};hr.prototype.s=!1,hr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,ar)&&e[ar]||(e[ar]=++or)}(this);delete dr[e]}},hr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},pr=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function yr(e){return Array.prototype.concat.apply([],arguments)}function mr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function gr(e){return/^[\s\xa0]*$/.test(e)}var kr,br=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function wr(e,t){return-1!=e.indexOf(t)}function xr(e,t){return e<t?-1:e>t?1:0}e:{var _r=tr.navigator;if(_r){var Sr=_r.userAgent;if(Sr){kr=Sr;break e}}kr=""}function Er(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Tr(e){var t={};for(var n in e)t[n]=e[n];return t}var Ir="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cr(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ir.length;a++)n=Ir[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ar(e){return Ar[" "](e),e}Ar[" "]=nr;var Dr,Nr=wr(kr,"Opera"),Pr=wr(kr,"Trident")||wr(kr,"MSIE"),Rr=wr(kr,"Edge"),Lr=Rr||Pr,Or=wr(kr,"Gecko")&&!(wr(kr.toLowerCase(),"webkit")&&!wr(kr,"Edge"))&&!(wr(kr,"Trident")||wr(kr,"MSIE"))&&!wr(kr,"Edge"),Mr=wr(kr.toLowerCase(),"webkit")&&!wr(kr,"Edge");function Vr(){var e=tr.document;return e?e.documentMode:void 0}e:{var Fr="",Ur=function(){var e=kr;return Or?/rv:([^\);]+)(\)|;)/.exec(e):Rr?/Edge\/([\d\.]+)/.exec(e):Pr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Mr?/WebKit\/(\S+)/.exec(e):Nr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ur&&(Fr=Ur?Ur[1]:""),Pr){var Br=Vr();if(null!=Br&&Br>parseFloat(Fr)){Dr=String(Br);break e}}Dr=Fr}var jr,zr={};function qr(){return function(e){var t=zr;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=br(String(Dr)).split("."),n=br("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=xr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||xr(0==a[2].length,0==o[2].length)||xr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(tr.document&&Pr){var Kr=Vr();jr=Kr||(parseInt(Dr,10)||void 0)}else jr=void 0;var Gr=jr,Hr=function(){if(!tr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tr.addEventListener("test",nr,t),tr.removeEventListener("test",nr,t)}catch(vx){}return e}();function Wr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Qr(e,t){if(Wr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Or){e:{try{Ar(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Yr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Qr.Z.h.call(this)}}Wr.prototype.h=function(){this.defaultPrevented=!0},fr(Qr,Wr);var Yr={2:"touch",3:"pen",4:"mouse"};Qr.prototype.h=function(){Qr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xr="closure_listenable_"+(1e6*Math.random()|0),$r=0;function Jr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++$r,this.ca=this.fa=!1}function Zr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ei(e){this.src=e,this.g={},this.h=0}function ti(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Zr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ni(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}ei.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=ni(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Jr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ri="closure_lm_"+(1e6*Math.random()|0),ii={};function ai(e,t,n,r,i){if(r&&r.once)return ui(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ai(e,t[a],n,r,i);return null}return n=vi(n),e&&e[Xr]?e.N(t,n,ir(r)?!!r.capture:!!r,i):oi(e,t,n,!1,r,i)}function oi(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ir(i)?!!i.capture:!!i,u=hi(e);if(u||(e[ri]=u=new ei(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=fi;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Hr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ci(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ui(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ui(e,t[a],n,r,i);return null}return n=vi(n),e&&e[Xr]?e.O(t,n,ir(r)?!!r.capture:!!r,i):oi(e,t,n,!0,r,i)}function si(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)si(e,t[a],n,r,i);else r=ir(r)?!!r.capture:!!r,n=vi(n),e&&e[Xr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ni(a=e.g[t],n,r,i))&&(Zr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=hi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ni(t,n,r,i)),(n=-1<e?t[e]:null)&&li(n))}function li(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Xr])ti(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ci(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hi(t))?(ti(n,e),0==n.h&&(n.src=null,t[ri]=null)):Zr(e)}}}function ci(e){return e in ii?ii[e]:ii[e]="on"+e}function fi(e,t){if(e.ca)e=!0;else{t=new Qr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&li(e),e=n.call(r,t)}return e}function hi(e){return(e=e[ri])instanceof ei?e:null}var di="__closure_events_fn_"+(1e9*Math.random()>>>0);function vi(e){return"function"===typeof e?e:(e[di]||(e[di]=function(t){return e.handleEvent(t)}),e[di])}function pi(){hr.call(this),this.i=new ei(this),this.P=this,this.I=null}function yi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Wr(t,e);else if(t instanceof Wr)t.target=t.target||e;else{var i=t;Cr(t=new Wr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=mi(o,r,!0,t)&&i}if(i=mi(o=t.g=e,r,!0,t)&&i,i=mi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=mi(o=t.g=n[a],r,!1,t)&&i}function mi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&ti(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}fr(pi,hr),pi.prototype[Xr]=!0,pi.prototype.removeEventListener=function(e,t,n,r){si(this,e,t,n,r)},pi.prototype.M=function(){if(pi.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zr(n[r]);delete t.g[e],t.h--}}this.I=null},pi.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pi.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var gi=tr.JSON.stringify;function ki(){var e=Ii,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var bi,wi=function(){function e(){p(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=xi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),xi=new(function(){function e(t,n){p(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new _i}),(function(e){return e.reset()})),_i=function(){function e(){p(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Si(e){tr.setTimeout((function(){throw e}),0)}function Ei(e,t){bi||function(){var e=tr.Promise.resolve(void 0);bi=function(){e.then(Ci)}}(),Ti||(bi(),Ti=!0),Ii.add(e,t)}var Ti=!1,Ii=new wi;function Ci(){for(var e;e=ki();){try{e.h.call(e.g)}catch(vx){Si(vx)}var t=xi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ti=!1}function Ai(e,t){pi.call(this),this.h=e||1,this.g=t||tr,this.j=lr(this.kb,this),this.l=Date.now()}function Di(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ni(e,t,n){if("function"===typeof e)n&&(e=lr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=lr(e.handleEvent,e)}return 2147483647<Number(t)?-1:tr.setTimeout(e,t||0)}function Pi(e){e.g=Ni((function(){e.g=null,e.i&&(e.i=!1,Pi(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}fr(Ai,pi),($n=Ai.prototype).da=!1,$n.S=null,$n.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),yi(this,"tick"),this.da&&(Di(this),this.start()))}},$n.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$n.M=function(){Ai.Z.M.call(this),Di(this),delete this.g};var Ri=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Pi(this)}},{key:"M",value:function(){Xn(x(n.prototype),"M",this).call(this),this.g&&(tr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(hr);function Li(e){hr.call(this),this.h=e,this.g={}}fr(Li,hr);var Oi=[];function Mi(e,t,n,r){Array.isArray(n)||(n&&(Oi[0]=n.toString()),n=Oi);for(var i=0;i<n.length;i++){var a=ai(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Vi(e){Er(e.g,(function(e,t){this.g.hasOwnProperty(t)&&li(e)}),e),e.g={}}function Fi(){this.g=!0}function Ui(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return gi(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Li.prototype.M=function(){Li.Z.M.call(this),Vi(this)},Li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fi.prototype.Aa=function(){this.g=!1},Fi.prototype.info=function(){};var Bi={},ji=null;function zi(){return ji=ji||new pi}function qi(e){Wr.call(this,Bi.Ma,e)}function Ki(e){var t=zi();yi(t,new qi(t,e))}function Gi(e,t){Wr.call(this,Bi.STAT_EVENT,e),this.stat=t}function Hi(e){var t=zi();yi(t,new Gi(t,e))}function Wi(e,t){Wr.call(this,Bi.Na,e),this.size=t}function Qi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return tr.setTimeout((function(){e()}),t)}Bi.Ma="serverreachability",fr(qi,Wr),Bi.STAT_EVENT="statevent",fr(Gi,Wr),Bi.Na="timingevent",fr(Wi,Wr);var Yi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Xi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $i(){}function Ji(e){return e.h||(e.h=e.i())}function Zi(){}$i.prototype.h=null;var ea,ta={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function na(){Wr.call(this,"d")}function ra(){Wr.call(this,"c")}function ia(){}function aa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Li(this),this.P=ua,e=Lr?125:void 0,this.W=new Ai(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new oa}function oa(){this.i=null,this.g="",this.h=!1}fr(na,Wr),fr(ra,Wr),fr(ia,$i),ia.prototype.g=function(){return new XMLHttpRequest},ia.prototype.i=function(){return{}},ea=new ia;var ua=45e3,sa={},la={};function ca(e,t,n){e.K=1,e.v=Ra(Ia(t)),e.s=n,e.U=!0,fa(e,null)}function fa(e,t){e.F=Date.now(),pa(e),e.A=Ia(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ha(n.h,"t",r),e.C=0,n=e.l.H,e.h=new oa,e.g=Qo(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ri(lr(e.Ia,e,e.g),e.O)),Mi(e.V,e.g,"readystatechange",e.gb),t=e.H?Tr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ki(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var l=u[s].split("=");if(1<l.length){var c=l[0];l=l[1];var f=c.split("_");o=2<=f.length&&"type"==f[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ha(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function da(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=va(e,n))==la){4==t&&(e.o=4,Hi(14),i=!1),Ui(e.j,e.m,null,"[Incomplete Response]");break}if(r==sa){e.o=4,Hi(15),Ui(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ui(e.j,e.m,r,null),ba(e,r)}ha(e)&&r!=la&&r!=sa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Hi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bo(t),t.L=!0,Hi(11))):(Ui(e.j,e.m,n,"[Invalid Chunked Response]"),ka(e),ga(e))}function va(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?la:(n=Number(t.substring(n,r)),isNaN(n)?sa:(r+=1)+n>t.length?la:(t=t.substr(r,n),e.C=r+n,t))}function pa(e){e.Y=Date.now()+e.P,ya(e,e.P)}function ya(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Qi(lr(e.eb,e),t)}function ma(e){e.B&&(tr.clearTimeout(e.B),e.B=null)}function ga(e){0==e.l.G||e.I||qo(e.l,e)}function ka(e){ma(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Di(e.W),Vi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function ba(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Za(n.i,e)))if(n.I=e.N,!e.J&&Za(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;zo(n),No(n)}Uo(n),Hi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Qi(lr(n.ab,n),6e3));if(1>=Ja(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Go(n,11)}else if((e.J||n.g==e)&&zo(n),!gr(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=r.i;!f.g&&(wr(c,"spdy")||wr(c,"quic")||wr(c,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(eo(f,f.h),f.h=null))}if(r.D){var h=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Pa(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Wo(r,r.H?r.la:null,r.W),d.J){to(r.i,d);var v=d,p=r.K;p&&v.setTimeout(p),v.B&&(ma(v),pa(v)),r.g=d}else Fo(r);0<n.l.length&&Lo(n)}else"stop"!=a[0]&&"close"!=a[0]||Go(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Go(n,7):Do(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Ki(4)}catch(a){}}function wa(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(rr(e)||"string"===typeof e)pr(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(rr(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(rr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function xa(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof xa)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function _a(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Sa(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Sa(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Sa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}($n=aa.prototype).setTimeout=function(e){this.P=e},$n.gb=function(e){e=e.target;var t=this.L;t&&3==Eo(e)?t.l():this.Ia(e)},$n.Ia=function(e){try{if(e==this.g)e:{var t=Eo(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Lr||this.g&&(this.h.h||this.g.ga()||To(this.g)))){this.I||4!=t||7==n||Ki(8==n||0>=r?3:2),ma(this);var i=this.g.ba();this.N=i;t:if(ha(this)){var a=To(this.g);e="";var o=a.length,u=4==Eo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ka(this),ga(this);var s="";break t}this.h.i=new tr.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gr(l)){var f=l;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Hi(12),ka(this),ga(this);break e}Ui(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ba(this,i)}this.U?(da(this,t,s),Lr&&this.i&&3==t&&(Mi(this.V,this.W,"tick",this.fb),this.W.start())):(Ui(this.j,this.m,s,null),ba(this,s)),4==t&&ka(this),this.i&&!this.I&&(4==t?qo(this.l,this):(this.i=!1,pa(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Hi(12)):(this.o=0,Hi(13)),ka(this),ga(this)}}}catch(t){}},$n.fb=function(){if(this.g){var e=Eo(this.g),t=this.g.ga();this.C<t.length&&(ma(this),da(this,e,t),this.i&&4!=e&&pa(this))}},$n.cancel=function(){this.I=!0,ka(this)},$n.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Ki(3),Hi(17)),ka(this),this.o=2,ga(this)):ya(this,this.Y-e)},($n=xa.prototype).R=function(){_a(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},$n.T=function(){return _a(this),this.g.concat()},$n.get=function(e,t){return Sa(this.h,e)?this.h[e]:t},$n.set=function(e,t){Sa(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},$n.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Ea=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ta(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Ta){this.g=void 0!==t?t:e.g,Ca(this,e.j),this.s=e.s,Aa(this,e.i),Da(this,e.m),this.l=e.l,t=e.h;var n=new za;n.i=t.i,t.g&&(n.g=new xa(t.g),n.h=t.h),Na(this,n),this.o=e.o}else e&&(n=String(e).match(Ea))?(this.g=!!t,Ca(this,n[1]||"",!0),this.s=La(n[2]||""),Aa(this,n[3]||"",!0),Da(this,n[4]),this.l=La(n[5]||"",!0),Na(this,n[6]||"",!0),this.o=La(n[7]||"")):(this.g=!!t,this.h=new za(null,this.g))}function Ia(e){return new Ta(e)}function Ca(e,t,n){e.j=n?La(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Aa(e,t,n){e.i=n?La(t,!0):t}function Da(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Na(e,t,n){t instanceof za?(e.h=t,function(e,t){t&&!e.j&&(qa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ka(this,t),Ha(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Oa(t,Ba)),e.h=new za(t,e.g))}function Pa(e,t,n){e.h.set(t,n)}function Ra(e){return Pa(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function La(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Oa(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ma),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ma(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ta.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Oa(t,Va,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Oa(t,Va,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Oa(n,"/"==n.charAt(0)?Ua:Fa,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Oa(n,ja)),e.join("")};var Va=/[#\/\?@]/g,Fa=/[#\?:]/g,Ua=/[#\?]/g,Ba=/[#\?@]/g,ja=/#/g;function za(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function qa(e){e.g||(e.g=new xa,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ka(e,t){qa(e),t=Wa(e,t),Sa(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Sa((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&_a(e)))}function Ga(e,t){return qa(e),t=Wa(e,t),Sa(e.g.h,t)}function Ha(e,t,n){Ka(e,t),0<n.length&&(e.i=null,e.g.set(Wa(e,t),mr(n)),e.h+=n.length)}function Wa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}($n=za.prototype).add=function(e,t){qa(this),this.i=null,e=Wa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},$n.forEach=function(e,t){qa(this),this.g.forEach((function(n,r){pr(n,(function(n){e.call(t,n,r,this)}),this)}),this)},$n.T=function(){qa(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},$n.R=function(e){qa(this);var t=[];if("string"===typeof e)Ga(this,e)&&(t=yr(t,this.g.get(Wa(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=yr(t,e[n])}return t},$n.set=function(e,t){return qa(this),this.i=null,Ga(this,e=Wa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},$n.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},$n.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Qa=m((function e(t,n){p(this,e),this.h=t,this.g=n}));function Ya(e){this.l=e||Xa,tr.PerformanceNavigationTiming?e=0<(e=tr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(tr.g&&tr.g.Ea&&tr.g.Ea()&&tr.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xa=10;function $a(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ja(e){return e.h?1:e.g?e.g.size:0}function Za(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eo(e,t){e.g?e.g.add(t):e.h=t}function to(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function no(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return mr(e.i)}function ro(){}function io(){this.g=new ro}function ao(e,t,n){var r=n||"";try{wa(e,(function(e,n){var i=e;ir(e)&&(i=gi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function oo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function uo(e){this.l=e.$b||null,this.j=e.ib||!1}function so(e,t){pi.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=lo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ya.prototype.cancel=function(){if(this.i=no(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},ro.prototype.stringify=function(e){return tr.JSON.stringify(e,void 0)},ro.prototype.parse=function(e){return tr.JSON.parse(e,void 0)},fr(uo,$i),uo.prototype.g=function(){return new so(this.l,this.j)},uo.prototype.i=function(e){return function(){return e}}({}),fr(so,pi);var lo=0;function co(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function fo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ho(e)}function ho(e){e.onreadystatechange&&e.onreadystatechange.call(e)}($n=so.prototype).open=function(e,t){if(this.readyState!=lo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ho(this)},$n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||tr).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},$n.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fo(this)),this.readyState=lo},$n.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof tr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;co(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},$n.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?fo(this):ho(this),3==this.readyState&&co(this)}},$n.Ua=function(e){this.g&&(this.response=this.responseText=e,fo(this))},$n.Ta=function(e){this.g&&(this.response=e,fo(this))},$n.ha=function(){this.g&&fo(this)},$n.setRequestHeader=function(e,t){this.v.append(e,t)},$n.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},$n.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(so.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vo=tr.JSON.parse;function po(e){pi.call(this),this.headers=new xa,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yo,this.K=this.L=!1}fr(po,pi);var yo="",mo=/^https?$/i,go=["POST","PUT"];function ko(e){return"content-type"==e.toLowerCase()}function bo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,wo(e),_o(e)}function wo(e){e.D||(e.D=!0,yi(e,"complete"),yi(e,"error"))}function xo(e){if(e.h&&"undefined"!=typeof er&&(!e.C[1]||4!=Eo(e)||2!=e.ba()))if(e.v&&4==Eo(e))Ni(e.Fa,0,e);else if(yi(e,"readystatechange"),4==Eo(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ea)[1]||null;if(!a&&tr.self&&tr.self.location){var o=tr.self.location.protocol;a=o.substr(0,o.length-1)}i=!mo.test(a?a.toLowerCase():"")}t=i}if(t)yi(e,"complete"),yi(e,"success");else{e.m=6;try{var u=2<Eo(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",wo(e)}}finally{_o(e)}}}function _o(e,t){if(e.g){So(e);var n=e.g,r=e.C[0]?nr:null;e.g=null,e.C=null,t||yi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function So(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(tr.clearTimeout(e.A),e.A=null)}function Eo(e){return e.g?e.g.readyState:0}function To(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(dx){return null}}function Io(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Er(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Pa(e,t,n))}function Co(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ao(e){this.za=0,this.l=[],this.h=new Fi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Co("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Co("baseRetryDelayMs",5e3,e),this.$a=Co("retryDelaySeedMs",1e4,e),this.Ya=Co("forwardChannelMaxRetries",2,e),this.ra=Co("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ya(e&&e.concurrentRequestLimit),this.Ca=new io,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Do(e){if(Po(e),3==e.G){var t=e.V++,n=Ia(e.F);Pa(n,"SID",e.J),Pa(n,"RID",t),Pa(n,"TYPE","terminate"),Mo(e,n),(t=new aa(e,e.h,t,void 0)).K=2,t.v=Ra(Ia(n)),n=!1,tr.navigator&&tr.navigator.sendBeacon&&(n=tr.navigator.sendBeacon(t.v.toString(),"")),!n&&tr.Image&&((new Image).src=t.v,n=!0),n||(t.g=Qo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),pa(t)}Ho(e)}function No(e){e.g&&(Bo(e),e.g.cancel(),e.g=null)}function Po(e){No(e),e.u&&(tr.clearTimeout(e.u),e.u=null),zo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&tr.clearTimeout(e.m),e.m=null)}function Ro(e,t){e.l.push(new Qa(e.Za++,t)),3==e.G&&Lo(e)}function Lo(e){$a(e.i)||e.m||(e.m=!0,Ei(e.Ha,e),e.C=0)}function Oo(e,t){var n;n=t?t.m:e.V++;var r=Ia(e.F);Pa(r,"SID",e.J),Pa(r,"RID",n),Pa(r,"AID",e.U),Mo(e,r),e.o&&e.s&&Io(r,e.o,e.s),n=new aa(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Vo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),eo(e.i,n),ca(n,r,t)}function Mo(e,t){e.j&&wa({},(function(e,n){Pa(t,n,e)}))}function Vo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?lr(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var l=i[s].h,c=i[s].g;if(0>(l-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ao(c,o,"req"+l+"_")}catch(xu){r&&r(c)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Fo(e){e.g||e.u||(e.Y=1,Ei(e.Ga,e),e.A=0)}function Uo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Qi(lr(e.Ga,e),Ko(e,e.A)),e.A++,!0)}function Bo(e){null!=e.B&&(tr.clearTimeout(e.B),e.B=null)}function jo(e){e.g=new aa(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Ia(e.oa);Pa(t,"RID","rpc"),Pa(t,"SID",e.J),Pa(t,"CI",e.N?"0":"1"),Pa(t,"AID",e.U),Mo(e,t),Pa(t,"TYPE","xmlhttp"),e.o&&e.s&&Io(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Ra(Ia(t)),n.s=null,n.U=!0,fa(n,e)}function zo(e){null!=e.v&&(tr.clearTimeout(e.v),e.v=null)}function qo(e,t){var n=null;if(e.g==t){zo(e),Bo(e),e.g=null;var r=2}else{if(!Za(e.i,t))return;n=t.D,to(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;yi(r=zi(),new Wi(r,n,t,i)),Lo(e)}else Fo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Ja(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Qi(lr(e.Ha,e,t),Ko(e,e.C)),e.C++,!0))}(e,t)||2==r&&Uo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Go(e,5);break;case 4:Go(e,10);break;case 3:Go(e,6);break;default:Go(e,2)}}function Ko(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Go(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=lr(e.jb,e);n||(n=new Ta("//www.google.com/images/cleardot.gif"),tr.location&&"http"==tr.location.protocol||Ca(n,"https"),Ra(n)),function(e,t){var n=new Fi;if(tr.Image){var r=new Image;r.onload=cr(oo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=cr(oo,n,r,"TestLoadImage: error",!1,t),r.onabort=cr(oo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=cr(oo,n,r,"TestLoadImage: timeout",!1,t),tr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hi(2);e.G=0,e.j&&e.j.va(t),Ho(e),Po(e)}function Ho(e){e.G=0,e.I=-1,e.j&&(0==no(e.i).length&&0==e.l.length||(e.i.i.length=0,mr(e.l),e.l.length=0),e.j.ua())}function Wo(e,t,n){var r=function(e){return e instanceof Ta?Ia(e):new Ta(e,void 0)}(n);if(""!=r.i)t&&Aa(r,t+"."+r.i),Da(r,r.m);else{var i=tr.location;r=function(e,t,n,r){var i=new Ta(null,void 0);return e&&Ca(i,e),t&&Aa(i,t),n&&Da(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Er(e.aa,(function(e,t){Pa(r,t,e)})),t=e.D,n=e.sa,t&&n&&Pa(r,t,n),Pa(r,"VER",e.ma),Mo(e,r),r}function Qo(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new po(new uo({ib:!0})):new po(e.qa)).L=e.H,t}function Yo(){}function Xo(){if(Pr&&!(10<=Number(Gr)))throw Error("Environmental error: no available transport.")}function $o(e,t){pi.call(this),this.g=new Ao(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!gr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!gr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new eu(this)}function Jo(e){na.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zo(){ra.call(this),this.status=1}function eu(e){this.g=e}($n=po.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ea.g(),this.C=this.u?Ji(this.u):Ji(ea),this.g.onreadystatechange=lr(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void bo(this,a)}e=n||"";var i=new xa(this.headers);r&&wa(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ko,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=tr.FormData&&e instanceof tr.FormData,!(0<=vr(go,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{So(this),0<this.B&&((this.K=function(e){return Pr&&qr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lr(this.pa,this)):this.A=Ni(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){bo(this,a)}},$n.pa=function(){"undefined"!=typeof er&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yi(this,"timeout"),this.abort(8))},$n.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,yi(this,"complete"),yi(this,"abort"),_o(this))},$n.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_o(this,!0)),po.Z.M.call(this)},$n.Fa=function(){this.s||(this.F||this.v||this.l?xo(this):this.cb())},$n.cb=function(){xo(this)},$n.ba=function(){try{return 2<Eo(this)?this.g.status:-1}catch(hx){return-1}},$n.ga=function(){try{return this.g?this.g.responseText:""}catch(hx){return""}},$n.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vo(t)}},$n.Da=function(){return this.m},$n.La=function(){return"string"===typeof this.j?this.j:String(this.j)},($n=Ao.prototype).ma=8,$n.G=1,$n.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(dx){}},$n.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new aa(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Cr(n=Tr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Vo(this,t,r),Pa(i=Ia(this.F),"RID",e),Pa(i,"CVER",22),this.D&&Pa(i,"X-HTTP-Session-Id",this.D),Mo(this,i),this.o&&n&&Io(i,this.o,n),eo(this.i,t),this.Ra&&Pa(i,"TYPE","init"),this.ja?(Pa(i,"$req",r),Pa(i,"SID","null"),t.$=!0,ca(t,i,null)):ca(t,i,r),this.G=2}}else 3==this.G&&(e?Oo(this,e):0==this.l.length||$a(this.i)||Oo(this))},$n.Ga=function(){if(this.u=null,jo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Qi(lr(this.bb,this),e)}},$n.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Hi(10),No(this),jo(this))},$n.ab=function(){null!=this.v&&(this.v=null,No(this),Uo(this),Hi(19))},$n.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Hi(2)):(this.h.info("Failed to ping google.com"),Hi(1))},($n=Yo.prototype).xa=function(){},$n.wa=function(){},$n.va=function(){},$n.ua=function(){},$n.Oa=function(){},Xo.prototype.g=function(e,t){return new $o(e,t)},fr($o,pi),$o.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Ei(lr(e.hb,e,t))),Hi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Wo(e,null,e.W),Lo(e)},$o.prototype.close=function(){Do(this.g)},$o.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Ro(this.g,t)}else this.v?((t={}).__data__=gi(e),Ro(this.g,t)):Ro(this.g,e)},$o.prototype.M=function(){this.g.j=null,delete this.j,Do(this.g),delete this.g,$o.Z.M.call(this)},fr(Jo,na),fr(Zo,ra),fr(eu,Yo),eu.prototype.xa=function(){yi(this.g,"a")},eu.prototype.wa=function(e){yi(this.g,new Jo(e))},eu.prototype.va=function(e){yi(this.g,new Zo(e))},eu.prototype.ua=function(){yi(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,$o.prototype.send=$o.prototype.u,$o.prototype.open=$o.prototype.m,$o.prototype.close=$o.prototype.close,Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Xi.COMPLETE="complete",Zi.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",pi.prototype.listen=pi.prototype.N,po.prototype.listenOnce=po.prototype.O,po.prototype.getLastError=po.prototype.La,po.prototype.getLastErrorCode=po.prototype.Da,po.prototype.getStatus=po.prototype.ba,po.prototype.getResponseJson=po.prototype.Qa,po.prototype.getResponseText=po.prototype.ga,po.prototype.send=po.prototype.ea;var tu=Zn.createWebChannelTransport=function(){return new Xo},nu=Zn.getStatEventTarget=function(){return zi()},ru=Zn.ErrorCode=Yi,iu=Zn.EventType=Xi,au=Zn.Event=Bi,ou=Zn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},uu=Zn.FetchXmlHttpFactory=uo,su=Zn.WebChannel=Zi,lu=Zn.XhrIo=po,cu="@firebase/firestore",fu=function(){function e(t){p(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();fu.UNAUTHENTICATED=new fu(null),fu.GOOGLE_CREDENTIALS=new fu("google-credentials-uid"),fu.FIRST_PARTY=new fu("first-party-uid"),fu.MOCK_USER=new fu("mock-user");var hu="9.6.11",du=new ve("@firebase/firestore");function vu(){return du.logLevel}function pu(e){if(du.logLevel<=ae.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gu);du.debug.apply(du,["Firestore (".concat(hu,"): ").concat(e)].concat(ee(i)))}}function yu(e){if(du.logLevel<=ae.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gu);du.error.apply(du,["Firestore (".concat(hu,"): ").concat(e)].concat(ee(i)))}}function mu(e){if(du.logLevel<=ae.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(gu);du.warn.apply(du,["Firestore (".concat(hu,"): ").concat(e)].concat(ee(i)))}}function gu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(hu,") INTERNAL ASSERTION FAILED: ")+e;throw yu(t),new Error(t)}function bu(e,t){e||ku()}function wu(e,t){return e}var xu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_u=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(F),Su=m((function e(){var t=this;p(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Eu=m((function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Tu=function(){function e(){p(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Iu=function(){function e(t){p(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Cu=function(){function e(t){p(this,e),this.t=t,this.currentUser=fu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Su;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Su,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){pu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(pu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Su)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(pu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(bu("string"==typeof n.accessToken),new Eu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return bu(null===e||"string"==typeof e),new fu(e)}}]),e}(),Au=m((function e(t,n,r){p(this,e),this.type="FirstParty",this.user=fu.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Du=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Au(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(fu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Nu=m((function e(t){p(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Pu=function(){function e(t){p(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&pu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,pu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){pu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):pu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(bu("string"==typeof t.token),e.p=t.token,new Nu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Ru=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Lu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ru.A=-1;var Ou=function(){function e(){p(this,e)}return m(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Lu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Mu(e,t){return e<t?-1:e>t?1:0}function Vu(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Fu(e){return e+"\0"}var Uu=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new _u(xu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _u(xu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _u(xu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _u(xu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Mu(this.nanoseconds,e.nanoseconds):Mu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Bu=function(){function e(t){p(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Uu(0,0))}},{key:"max",value:function(){return new e(new Uu(253402300799,999999999))}}]),e}();function ju(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function zu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ku=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&ku(),void 0===r?r=t.length-n:r>t.length-n&&ku(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Gu=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new _u(xu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ee(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ku),Hu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wu=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Hu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new _u(xu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new _u(xu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new _u(xu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new _u(xu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Ku),Qu=function(){function e(t){p(this,e),this.fields=t,t.sort(Wu.comparator)}return m(e,[{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Vu(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Yu=function(e){function t(e){p(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Mu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yu.EMPTY_BYTE_STRING=new Yu("");var Xu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $u(e){if(bu(!!e),"string"==typeof e){var t=0,n=Xu.exec(e);if(bu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ju(e.seconds),nanos:Ju(e.nanos)}}function Ju(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Zu(e){return"string"==typeof e?Yu.fromBase64String(e):Yu.fromUint8Array(e)}function es(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ts(e){var t=e.mapValue.fields.__previous_value__;return es(t)?ts(t):t}function ns(e){var t=$u(e.mapValue.fields.__local_write_time__.timestampValue);return new Uu(t.seconds,t.nanos)}var rs=m((function e(t,n,r,i,a,o,u,s){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),is=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function as(e){return null==e}function os(e){return 0===e&&1/e==-1/0}function us(e){return"number"==typeof e&&Number.isInteger(e)&&!os(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ss=function(){function e(t){p(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Gu.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Gu.fromString(t))}},{key:"fromName",value:function(t){return new e(Gu.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Gu.emptyPath())}},{key:"comparator",value:function(e,t){return Gu.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Gu(t.slice()))}}]),e}(),ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},cs={nullValue:"NULL_VALUE"};function fs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?es(e)?4:Es(e)?9:10:ku()}function hs(e,t){if(e===t)return!0;var n=fs(e);if(n!==fs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ns(e).isEqual(ns(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=$u(e.timestampValue),r=$u(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Zu(e.bytesValue).isEqual(Zu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ju(e.geoPointValue.latitude)===Ju(t.geoPointValue.latitude)&&Ju(e.geoPointValue.longitude)===Ju(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ju(e.integerValue)===Ju(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ju(e.doubleValue),r=Ju(t.doubleValue);return n===r?os(n)===os(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Vu(e.arrayValue.values||[],t.arrayValue.values||[],hs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ju(n)!==ju(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hs(n[i],r[i])))return!1;return!0}(e,t);default:return ku()}}function ds(e,t){return void 0!==(e.values||[]).find((function(e){return hs(e,t)}))}function vs(e,t){if(e===t)return 0;var n=fs(e),r=fs(t);if(n!==r)return Mu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ju(e.integerValue||e.doubleValue),r=Ju(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ps(e.timestampValue,t.timestampValue);case 4:return ps(ns(e),ns(t));case 5:return Mu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Zu(e),r=Zu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Mu(n[i],r[i]);if(0!==a)return a}return Mu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Mu(Ju(e.latitude),Ju(t.latitude));return 0!==n?n:Mu(Ju(e.longitude),Ju(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=vs(n[i],r[i]);if(a)return a}return Mu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Mu(r[o],a[o]);if(0!==u)return u;var s=vs(n[r[o]],i[a[o]]);if(0!==s)return s}return Mu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ku()}}function ps(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Mu(e,t);var n=$u(e),r=$u(t),i=Mu(n.seconds,r.seconds);return 0!==i?i:Mu(n.nanos,r.nanos)}function ys(e){return ms(e)}function ms(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=$u(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Zu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ss.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=g(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ms(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=g(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ms(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):ku();var t,n}function gs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ks(e){return!!e&&"integerValue"in e}function bs(e){return!!e&&"arrayValue"in e}function ws(e){return!!e&&"nullValue"in e}function xs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _s(e){return!!e&&"mapValue"in e}function Ss(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return zu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ss(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ss(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Es(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ts(e){return"nullValue"in e?cs:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?gs(is.empty(),ss.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:ku()}function Is(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?gs(is.empty(),ss.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ls:ku()}function Cs(e,t){return void 0===e?t:void 0===t||vs(e,t)>0?e:t}function As(e,t){return void 0===e?t:void 0===t||vs(e,t)<0?e:t}var Ds=function(){function e(t){p(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!_s(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ss(t)}},{key:"setAll",value:function(e){var t=this,n=Wu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ss(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());_s(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return hs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];_s(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){zu(t,(function(t,n){return e[t]=n}));var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ss(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ns(e){var t=[];return zu(e.fields,(function(e,n){var r=new Wu([e]);if(_s(n)){var i=Ns(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Qu(t)}var Ps=function(){function e(t,n,r,i,a,o){p(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Bu.min(),Bu.min(),Ds.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Bu.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Bu.min(),Ds.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Bu.min(),Ds.empty(),2)}}]),e}(),Rs=m((function e(t,n,r,i){p(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Ls(e){return e.fields.find((function(e){return 2===e.kind}))}function Os(e){return e.fields.filter((function(e){return 2!==e.kind}))}Rs.UNKNOWN_ID=-1;var Ms=m((function e(t,n){p(this,e),this.fieldPath=t,this.kind=n})),Vs=function(){function e(t,n){p(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,Bs.min())}}]),e}();function Fs(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Bu.fromTimestamp(1e9===r?new Uu(n+1,0):new Uu(n,r));return new Bs(i,ss.empty(),t)}function Us(e){return new Bs(e.readTime,e.key,-1)}var Bs=function(){function e(t,n,r){p(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(Bu.min(),ss.empty(),-1)}},{key:"max",value:function(){return new e(Bu.max(),ss.empty(),-1)}}]),e}();function js(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ss.comparator(e.documentKey,t.documentKey))?n:Mu(e.largestBatchId,t.largestBatchId)}var zs=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function qs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new zs(e,t,n,r,i,a,o)}function Ks(e){var t=wu(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ys(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),as(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ys(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ys(e)})).join(",")),t.P=n}return t.P}function Gs(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ul(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!hs(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ll(e.startAt,t.startAt)&&ll(e.endAt,t.endAt)}function Hs(e){return ss.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ws(e,t){return e.filters.filter((function(e){return e instanceof Xs&&e.field.isEqual(t)}))}function Qs(e,t,n){var r,i,a=!0,o=g(Ws(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,l=!0;switch(u.op){case"<":case"<=":s=Ts(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,l=!1;break;case"!=":case"not-in":s=cs}Cs(r,s)===s&&(r=s,a=l)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var f=n.position[c];Cs(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}function Ys(e,t,n){var r,i,a=!0,o=g(Ws(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,l=!0;switch(u.op){case">=":case">":s=Is(u.value),l=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,l=!1;break;case"!=":case"not-in":s=ls}As(r,s)===s&&(r=s,a=l)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var f=n.position[c];As(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}var Xs=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(vs(t,this.value)):null!==t&&fs(this.value)===fs(t)&&this.v(vs(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ku()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new $s(e,t,r):"array-contains"===t?new tl(e,r):"in"===t?new nl(e,r):"not-in"===t?new rl(e,r):"array-contains-any"===t?new il(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Js(e,n):new Zs(e,n)}}]),n}(function(){return m((function e(){p(this,e)}))}()),$s=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).key=ss.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=ss.comparator(e.key,this.key);return this.v(t)}}]),n}(Xs),Js=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=el("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Xs),Zs=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=el("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Xs);function el(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ss.fromName(e.referenceValue)}))}var tl=function(e){w(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return bs(t)&&ds(t.arrayValue,this.value)}}]),n}(Xs),nl=function(e){w(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ds(this.value.arrayValue,t)}}]),n}(Xs),rl=function(e){w(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(ds(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ds(this.value.arrayValue,t)}}]),n}(Xs),il=function(e){w(n,e);var t=T(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!bs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ds(t.value.arrayValue,e)}))}}]),n}(Xs),al=m((function e(t,n){p(this,e),this.position=t,this.inclusive=n})),ol=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n}));function ul(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function sl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ss.comparator(ss.fromName(o.referenceValue),n.key):vs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ll(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!hs(e.position[n],t.position[n]))return!1;return!0}var cl=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function fl(e,t,n,r,i,a,o,u){return new cl(e,t,n,r,i,a,o,u)}function hl(e){return new cl(e)}function dl(e){return!as(e.limit)&&"F"===e.limitType}function vl(e){return!as(e.limit)&&"L"===e.limitType}function pl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function yl(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function ml(e){return null!==e.collectionGroup}function gl(e){var t=wu(e);if(null===t.D){t.D=[];var n=yl(t),r=pl(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new ol(n)),t.D.push(new ol(Wu.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new ol(Wu.keyField(),s))}}}return t.D}function kl(e){var t=wu(e);if(!t.C)if("F"===t.limitType)t.C=qs(t.path,t.collectionGroup,gl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(gl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new ol(a.field,o))}}catch(l){i.e(l)}finally{i.f()}var u=t.endAt?new al(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new al(t.startAt.position,!t.startAt.inclusive):null;t.C=qs(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function bl(e,t,n){return new cl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wl(e,t){return Gs(kl(e),kl(t))&&e.limitType===t.limitType}function xl(e){return"".concat(Ks(kl(e)),"|lt:").concat(e.limitType)}function _l(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ys(t.value));var t})).join(", "),"]")),as(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ys(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ys(e)})).join(",")),"Target(".concat(t,")")}(kl(e)),"; limitType=").concat(e.limitType,")")}function Sl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ss.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=sl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,gl(e),t))&&!(e.endAt&&!function(e,t,n){var r=sl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,gl(e),t))}(e,t)}function El(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Tl(e){return function(t,n){var r,i=!1,a=g(gl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Il(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Il(e,t,n){var r=e.field.isKeyField()?ss.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?vs(r,i):ku()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ku()}}function Cl(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:os(t)?"-0":t}}function Al(e){return{integerValue:""+e}}function Dl(e,t){return us(t)?Al(t):Cl(e,t)}var Nl=m((function e(){p(this,e),this._=void 0}));function Pl(e,t,n){return e instanceof Ol?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ml?Vl(e,t):e instanceof Fl?Ul(e,t):function(e,t){var n=Ll(e,t),r=jl(n)+jl(e.k);return ks(n)&&ks(e.k)?Al(r):Cl(e.M,r)}(e,t)}function Rl(e,t,n){return e instanceof Ml?Vl(e,t):e instanceof Fl?Ul(e,t):n}function Ll(e,t){return e instanceof Bl?ks(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ol=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(Nl),Ml=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Nl);function Vl(e,t){var n,r=zl(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return hs(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Fl=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(Nl);function Ul(e,t){var n,r=zl(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!hs(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Bl=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).M=e,i.k=r,i}return m(n)}(Nl);function jl(e){return Ju(e.integerValue||e.doubleValue)}function zl(e){return bs(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ql=m((function e(t,n){p(this,e),this.field=t,this.transform=n}));var Kl=m((function e(t,n){p(this,e),this.version=t,this.transformResults=n})),Gl=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Hl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Wl=m((function e(){p(this,e)}));function Ql(e,t,n){e instanceof Zl?function(e,t,n){var r=e.value.clone(),i=nc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ec?function(e,t,n){if(Hl(e.precondition,t)){var r=nc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yl(e,t,n){e instanceof Zl?function(e,t,n){if(Hl(e.precondition,t)){var r=e.value.clone(),i=rc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Jl(t),r).setHasLocalMutations()}}(e,t,n):e instanceof ec?function(e,t,n){if(Hl(e.precondition,t)){var r=rc(e.fieldTransforms,n,t),i=t.data;i.setAll(tc(e)),i.setAll(r),t.convertToFoundDocument(Jl(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Hl(e.precondition,t)&&t.convertToNoDocument(Bu.min())}(e,t)}function Xl(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ll(a.transform,o||null);null!=u&&(null==r&&(r=Ds.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function $l(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vu(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ml&&t instanceof Ml||e instanceof Fl&&t instanceof Fl?Vu(e.elements,t.elements,hs):e instanceof Bl&&t instanceof Bl?hs(e.k,t.k):e instanceof Ol&&t instanceof Ol}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Jl(e){return e.isFoundDocument()?e.version:Bu.min()}var Zl=function(e){w(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n)}(Wl),ec=function(e){w(n,e);var t=T(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return m(n)}(Wl);function tc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function nc(e,t,n){var r=new Map;bu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Rl(o,u,n[i]))}return r}function rc(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Pl(u,s,t))}}catch(l){a.e(l)}finally{a.f()}return i}var ic,ac,oc=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n)}(Wl),uc=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n)}(Wl),sc=m((function e(t){p(this,e),this.count=t}));function lc(e){switch(e){default:return ku();case xu.CANCELLED:case xu.UNKNOWN:case xu.DEADLINE_EXCEEDED:case xu.RESOURCE_EXHAUSTED:case xu.INTERNAL:case xu.UNAVAILABLE:case xu.UNAUTHENTICATED:return!1;case xu.INVALID_ARGUMENT:case xu.NOT_FOUND:case xu.ALREADY_EXISTS:case xu.PERMISSION_DENIED:case xu.FAILED_PRECONDITION:case xu.ABORTED:case xu.OUT_OF_RANGE:case xu.UNIMPLEMENTED:case xu.DATA_LOSS:return!0}}function cc(e){if(void 0===e)return yu("GRPC error has no .code"),xu.UNKNOWN;switch(e){case ic.OK:return xu.OK;case ic.CANCELLED:return xu.CANCELLED;case ic.UNKNOWN:return xu.UNKNOWN;case ic.DEADLINE_EXCEEDED:return xu.DEADLINE_EXCEEDED;case ic.RESOURCE_EXHAUSTED:return xu.RESOURCE_EXHAUSTED;case ic.INTERNAL:return xu.INTERNAL;case ic.UNAVAILABLE:return xu.UNAVAILABLE;case ic.UNAUTHENTICATED:return xu.UNAUTHENTICATED;case ic.INVALID_ARGUMENT:return xu.INVALID_ARGUMENT;case ic.NOT_FOUND:return xu.NOT_FOUND;case ic.ALREADY_EXISTS:return xu.ALREADY_EXISTS;case ic.PERMISSION_DENIED:return xu.PERMISSION_DENIED;case ic.FAILED_PRECONDITION:return xu.FAILED_PRECONDITION;case ic.ABORTED:return xu.ABORTED;case ic.OUT_OF_RANGE:return xu.OUT_OF_RANGE;case ic.UNIMPLEMENTED:return xu.UNIMPLEMENTED;case ic.DATA_LOSS:return xu.DATA_LOSS;default:return ku()}}(ac=ic||(ic={}))[ac.OK=0]="OK",ac[ac.CANCELLED=1]="CANCELLED",ac[ac.UNKNOWN=2]="UNKNOWN",ac[ac.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ac[ac.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ac[ac.NOT_FOUND=5]="NOT_FOUND",ac[ac.ALREADY_EXISTS=6]="ALREADY_EXISTS",ac[ac.PERMISSION_DENIED=7]="PERMISSION_DENIED",ac[ac.UNAUTHENTICATED=16]="UNAUTHENTICATED",ac[ac.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ac[ac.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ac[ac.ABORTED=10]="ABORTED",ac[ac.OUT_OF_RANGE=11]="OUT_OF_RANGE",ac[ac.UNIMPLEMENTED=12]="UNIMPLEMENTED",ac[ac.INTERNAL=13]="INTERNAL",ac[ac.UNAVAILABLE=14]="UNAVAILABLE",ac[ac.DATA_LOSS=15]="DATA_LOSS";var fc=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];if(this.equalsFn(u,e))return s}}catch(l){i.e(l)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){zu(this.inner,(function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=o(r.value,2),u=a[0],s=a[1];e(u,s)}}catch(l){i.e(l)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return qu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),hc=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||vc.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,vc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new dc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new dc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new dc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new dc(this.root,e,this.comparator,!0)}}]),e}(),dc=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),vc=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ku();if(this.right.isRed())throw ku();var e=this.left.check();if(e!==this.right.check())throw ku();return e+(this.isRed()?0:1)}}]),e}();vc.EMPTY=null,vc.RED=!0,vc.BLACK=!1,vc.EMPTY=new(function(){function e(){p(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw ku()}},{key:"value",get:function(){throw ku()}},{key:"color",get:function(){throw ku()}},{key:"left",get:function(){throw ku()}},{key:"right",get:function(){throw ku()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new vc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var pc=function(){function e(t){p(this,e),this.comparator=t,this.data=new hc(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new yc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new yc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),yc=function(){function e(t){p(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function mc(e){return e.hasNext()?e.getNext():void 0}var gc=new hc(ss.comparator);function kc(){return gc}var bc=new hc(ss.comparator);function wc(){return bc}function xc(){return new fc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var _c=new hc(ss.comparator),Sc=new pc(ss.comparator);function Ec(){for(var e=Sc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Tc=new pc(Mu);function Ic(){return Tc}var Cc=function(){function e(t,n,r,i,a){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ac.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Bu.min(),r,Ic(),kc(),Ec())}}]),e}(),Ac=function(){function e(t,n,r,i,a){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Yu.EMPTY_BYTE_STRING,n,Ec(),Ec(),Ec())}}]),e}(),Dc=m((function e(t,n,r,i){p(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),Nc=m((function e(t,n){p(this,e),this.targetId=t,this.$=n})),Pc=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Rc=function(){function e(){p(this,e),this.B=0,this.L=Mc(),this.U=Yu.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return m(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Ec(),t=Ec(),n=Ec();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ku()}})),new Ac(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Mc()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Lc=function(){function e(t){p(this,e),this.nt=t,this.st=new Map,this.it=kc(),this.rt=Oc(),this.ot=new pc(Mu)}return m(e,[{key:"ut",value:function(e){var t,n=g(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:ku()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(Hs(i))if(0===n){var a=new ss(i.path);this.ct(t,a,Ps.newNoDocument(a,Bu.min()))}else bu(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&Hs(a.target)){var o=new ss(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Ps.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Ec();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Cc(e,n,this.ot,this.it,r);return this.it=kc(),this.rt=Oc(),this.ot=new pc(Mu),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Rc,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new pc(Mu),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||pu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Rc),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Oc(){return new hc(ss.comparator)}function Mc(){return new hc(ss.comparator)}var Vc={asc:"ASCENDING",desc:"DESCENDING"},Fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uc=m((function e(t,n){p(this,e),this.databaseId=t,this.N=n}));function Bc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jc(e,t){return e.N?t.toBase64():t.toUint8Array()}function zc(e,t){return Bc(e,t.toTimestamp())}function qc(e){return bu(!!e),Bu.fromTimestamp(function(e){var t=$u(e);return new Uu(t.seconds,t.nanos)}(e))}function Kc(e,t){return function(e){return new Gu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Gc(e){var t=Gu.fromString(e);return bu(pf(t)),t}function Hc(e,t){return Kc(e.databaseId,t.path)}function Wc(e,t){var n=Gc(t);if(n.get(1)!==e.databaseId.projectId)throw new _u(xu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _u(xu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ss($c(n))}function Qc(e,t){return Kc(e.databaseId,t)}function Yc(e){var t=Gc(e);return 4===t.length?Gu.emptyPath():$c(t)}function Xc(e){return new Gu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $c(e){return bu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Jc(e,t,n){return{name:Hc(e,t),fields:n.value.mapValue.fields}}function Zc(e,t,n){var r=Wc(e,t.name),i=qc(t.updateTime),a=new Ds({mapValue:{fields:t.fields}}),o=Ps.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ef(e,t){return"found"in t?function(e,t){bu(!!t.found),t.found.name,t.found.updateTime;var n=Wc(e,t.found.name),r=qc(t.found.updateTime),i=new Ds({mapValue:{fields:t.found.fields}});return Ps.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){bu(!!t.missing),bu(!!t.readTime);var n=Wc(e,t.missing),r=qc(t.readTime);return Ps.newNoDocument(n,r)}(e,t):ku()}function tf(e,t){var n;if(t instanceof Zl)n={update:Jc(e,t.key,t.value)};else if(t instanceof oc)n={delete:Hc(e,t.key)};else if(t instanceof ec)n={update:Jc(e,t.key,t.data),updateMask:vf(t.fieldMask)};else{if(!(t instanceof uc))return ku();n={verify:Hc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ol)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ml)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Bl)return{fieldPath:t.field.canonicalString(),increment:n.k};throw ku()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:zc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ku()}(e,t.precondition)),n}function nf(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Gl.updateTime(qc(e.updateTime)):void 0!==e.exists?Gl.exists(e.exists):Gl.none()}(t.currentDocument):Gl.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)bu("REQUEST_TIME"===t.setToServerValue),n=new Ol;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ml(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Fl(i)}else"increment"in t?n=new Bl(e,t.increment):ku();var a=Wu.fromServerFormat(t.fieldPath);return new ql(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Wc(e,t.update.name),a=new Ds({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Qu(t.map((function(e){return Wu.fromServerFormat(e)})))}(t.updateMask);return new ec(i,a,o,n,r)}return new Zl(i,a,n,r)}if(t.delete){var u=Wc(e,t.delete);return new oc(u,n)}if(t.verify){var s=Wc(e,t.verify);return new uc(s,n)}return ku()}function rf(e,t){return{documents:[Qc(e,t.path)]}}function af(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Qc(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Qc(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(xs(e.value))return{unaryFilter:{field:cf(e.field),op:"IS_NAN"}};if(ws(e.value))return{unaryFilter:{field:cf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(xs(e.value))return{unaryFilter:{field:cf(e.field),op:"IS_NOT_NAN"}};if(ws(e.value))return{unaryFilter:{field:cf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cf(e.field),op:lf(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:cf(e.field),direction:sf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||as(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function of(e){var t=Yc(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){bu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=uf(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ol(ff(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return as(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new al(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new al(n,t)}(n.endAt)),fl(t,i,u,o,s,"F",l,c)}function uf(e){return e?void 0!==e.unaryFilter?[df(e)]:void 0!==e.fieldFilter?[hf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return uf(e)})).reduce((function(e,t){return e.concat(t)})):ku():[]}function sf(e){return Vc[e]}function lf(e){return Fc[e]}function cf(e){return{fieldPath:e.canonicalString()}}function ff(e){return Wu.fromServerFormat(e.fieldPath)}function hf(e){return Xs.create(ff(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ku()}}(e.fieldFilter.op),e.fieldFilter.value)}function df(e){switch(e.unaryFilter.op){case"IS_NAN":var t=ff(e.unaryFilter.field);return Xs.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=ff(e.unaryFilter.field);return Xs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ff(e.unaryFilter.field);return Xs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ff(e.unaryFilter.field);return Xs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ku()}}function vf(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function pf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function yf(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=gf(t)),t=mf(e.get(n),t);return gf(t)}function mf(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function gf(e){return e+"\x01\x01"}function kf(e){var t=e.length;if(bu(t>=2),2===t)return bu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Gu.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&ku(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:ku()}a=o+2}return new Gu(r)}var bf=["userId","batchId"];function wf(e,t){return[e,yf(t)]}function xf(e,t,n){return[e,yf(t),n]}var _f={},Sf=["prefixPath","collectionGroup","readTime","documentId"],Ef=["prefixPath","collectionGroup","documentId"],Tf=["collectionGroup","readTime","prefixPath","documentId"],If=["canonicalId","targetId"],Cf=["targetId","path"],Af=["path","targetId"],Df=["collectionId","parent"],Nf=["indexId","uid"],Pf=["uid","sequenceNumber"],Rf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lf=["indexId","uid","orderedDocumentKey"],Of=["userId","collectionPath","documentId"],Mf=["userId","collectionPath","largestBatchId"],Vf=["userId","collectionGroup","largestBatchId"],Ff=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Uf=[].concat(ee(Ff),["documentOverlays"]),Bf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jf=[].concat(Bf,["indexConfiguration","indexState","indexEntries"]),zf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qf=function(){function e(){p(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Kf=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ku(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Gf=function(){function e(t,n){var r=this;p(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Su,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Qf(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=Zf(e.target.error);r.At.reject(new Qf(t,n))}}return m(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(pu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Xf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Qf(n,t)}}}]),e}(),Hf=function(){function e(t,n,r){p(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(O())&&yu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"Nt",value:function(){var e=f(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return pu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Qf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new _u(xu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new _u(xu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Qf(t,n))},i.onupgradeneeded=function(e){pu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){pu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=f(d().mark((function e(t,n,r,i){var a,o,u,s,l=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(d().mark((function e(){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Nt(t);case 2:return l.db=e.sent,n=Gf.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),Kf.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,pu("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return pu("SimpleDb","Removing database:",e),$f(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!V())return!1;if(e.St())return!0;var t=O(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Photo-Gallery",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Wf=function(){function e(t){p(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return m(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return $f(this.Ft.delete())}}]),e}(),Qf=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,xu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(_u);function Yf(e){return"IndexedDbTransactionError"===e.name}var Xf=function(){function e(t){p(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(pu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(pu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),$f(n)}},{key:"add",value:function(e){return pu("SimpleDb","ADD",this.store.name,e,e),$f(this.store.add(e))}},{key:"get",value:function(e){var t=this;return $f(this.store.get(e)).next((function(n){return void 0===n&&(n=null),pu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return pu("SimpleDb","DELETE",this.store.name,e),$f(this.store.delete(e))}},{key:"count",value:function(){return pu("SimpleDb","COUNT",this.store.name),$f(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Kf((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Kf((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){pu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Kf((function(n,r){t.onerror=function(e){var t=Zf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Kf((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Wf(i),o=t(i.primaryKey,i.value,a);if(o instanceof Kf){var u=o.catch((function(e){return a.done(),Kf.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Kf.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function $f(e){return new Kf((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Zf(e.target.error);n(t)}}))}var Jf=!1;function Zf(e){var t=Hf.Vt(O());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new _u("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Jf||(Jf=!0,setTimeout((function(){throw r}),0)),r}}return e}var eh=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return m(n)}(qf);function th(e,t){var n=wu(e);return Hf.xt(n.Ht,t)}var nh=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ql(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=g(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Yl(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Yl(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Bu.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ec())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Vu(this.mutations,e.mutations,(function(e,t){return $l(e,t)}))&&Vu(this.baseMutations,e.baseMutations,(function(e,t){return $l(e,t)}))}}]),e}(),rh=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){bu(t.mutations.length===r.length);for(var i=_c,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ih=function(){function e(t,n){p(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ah=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Bu.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Bu.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yu.EMPTY_BYTE_STRING;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),oh=m((function e(t){p(this,e),this.Jt=t}));function uh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Hc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Bc(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:lh(t.version)};else{if(!t.isUnknownDocument())return ku();r.unknownDocument={path:n.path.toArray(),version:lh(t.version)}}return r}function sh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function lh(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ch(e){var t=new Uu(e.seconds,e.nanoseconds);return Bu.fromTimestamp(t)}function fh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return nf(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return nf(e.Jt,t)})),u=Uu.fromMillis(t.localWriteTimeMs);return new nh(t.batchId,u,n,o)}function hh(e){var t,n,r=ch(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ch(e.lastLimboFreeSnapshotVersion):Bu.min();return void 0!==e.query.documents?(bu(1===(n=e.query).documents.length),t=kl(hl(Yc(n.documents[0])))):t=function(e){return kl(of(e))}(e.query),new ah(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Yu.fromBase64String(e.resumeToken))}function dh(e,t){var n,r=lh(t.snapshotVersion),i=lh(t.lastLimboFreeSnapshotVersion);n=Hs(t.target)?rf(e.Jt,t.target):af(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ks(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function vh(e){var t=of({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bl(t,t.limit,"L"):t}function ph(e,t){return new ih(t.largestBatchId,nf(e.Jt,t.overlayMutation))}function yh(e,t){var n=t.path.lastSegment();return[e,yf(t.path.popLast()),n]}var mh=function(){function e(){p(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return gh(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ch(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return gh(e).put({bundleId:(n=t).id,createTime:lh(qc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return kh(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:vh(t.bundledQuery),readTime:ch(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return kh(e).put(function(e){return{name:e.name,readTime:lh(qc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function gh(e){return th(e,"bundles")}function kh(e){return th(e,"namedQueries")}var bh=function(){function e(t,n){p(this,e),this.M=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return wh(e).get(yh(this.userId,t)).next((function(e){return e?ph(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ih(t,a);i.push(r.Xt(e,o))})),Kf.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(yf(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(wh(e).Qt("collectionPathOverlayIndex",i))})),Kf.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=xc(),a=yf(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return wh(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=ph(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=xc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wh(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=ph(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return wh(e).put(function(e,t,n){var r=o(yh(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:tf(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function wh(e){return th(e,"documentOverlays")}var xh=function(){function e(){p(this,e)}return m(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ju(e.integerValue));else if("doubleValue"in e){var n=Ju(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),os(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Zu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Es(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ku()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),ss.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function _h(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Sh(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=_h(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}xh.fe=new xh;var Eh=function(){function e(){p(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Sh(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Sh(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Th=function(){function e(t){p(this,e),this.De=t}return m(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),Ih=function(){function e(t){p(this,e),this.De=t}return m(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Ch=function(){function e(){p(this,e),this.De=new Eh,this.Ce=new Th(this.De),this.xe=new Ih(this.De)}return m(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Ah=function(){function e(t,n,r,i){p(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Dh(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Nh(e.arrayValue,t.arrayValue))?n:0!==(n=Nh(e.directionalValue,t.directionalValue))?n:ss.comparator(e.documentKey,t.documentKey)}function Nh(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Ph=function(){function e(t){p(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=g(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"$e",value:function(e){var t=Ls(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Os(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=g(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Rh=function(){function e(){p(this,e),this.qe=new Lh}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),Kf.resolve()}},{key:"getCollectionParents",value:function(e,t){return Kf.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Kf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Kf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Kf.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Kf.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Kf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Kf.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Kf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Kf.resolve()}}]),e}(),Lh=function(){function e(){p(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pc(Gu.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new pc(Gu.comparator)).toArray()}}]),e}(),Oh=new Uint8Array(0),Mh=function(){function e(t,n){p(this,e),this.user=t,this.databaseId=n,this.Ke=new Lh,this.Ge=new fc((function(e){return Ks(e)}),(function(e,t){return Gs(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:yf(i)};return Vh(e).put(a)}return Kf.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Fu(t),""],!1,!0);return Vh(e).qt(r).next((function(e){var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(kf(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Uh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Uh(e),r=Bh(e),i=Fh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Fh(e),i=!0,a=new Map;return Kf.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Ec(),o=[];return Kf.forEach(a,(function(i,a){var u;pu("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Ks(t)));var s=function(e,t){var n=Ls(t);if(void 0===n)return null;var r,i=g(Ws(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=new Map,i=g(Os(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=g(Ws(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(l){u.e(l)}finally{u.f()}}}catch(l){i.e(l)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=g(Os(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Qs(e,o.fieldPath,e.startAt):Ys(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new al(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=g(Os(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ys(e,o.fieldPath,e.endAt):Qs(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new al(r,i)}(a,i),h=n.je(i,a,c),d=n.je(i,a,f),v=n.We(i,a,l),p=n.ze(i.indexId,s,h,!!c&&c.inclusive,d,!!f&&f.inclusive,v);return Kf.forEach(p,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=ss.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Kf.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),l=s/(null!=t?t.length:1),c=[],f=function(s){var f=t?u.He(t[s/l]):Oh,h=n?u.Je(e,f,n[s%l],r):u.Ye(e),d=i?u.Xe(e,f,i[s%l],a):u.Ye(e+1);c.push.apply(c,ee(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return c}},{key:"Je",value:function(e,t,n,r){var i=new Ah(e,ss.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Ah(e,ss.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Ah(e,ss.empty(),Oh,Oh)}},{key:"getFieldIndex",value:function(e,t){var n=new Ph(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Ch,i=g(Os(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);xh.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Ch;return xh.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Ch;return xh.fe.Zt(gs(this.databaseId,t),n.Ne(function(e){var t=Os(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ch);var i,a=0,o=g(Os(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,l=n[a++],c=g(r);try{for(c.s();!(u=c.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&bs(l))r=this.nn(r,s,l);else{var h=f.Ne(s.kind);xh.fe.Zt(l,h)}}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=ee(e),a=[],o=g(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,l=g(i);try{for(l.s();!(u=l.n()).done;){var c=u.value,f=new Ch;f.seed(c.Se()),xh.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){l.e(h)}finally{l.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Xs&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Uh(e),i=Bh(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return Kf.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Vs(t.sequenceNumber,new Bs(ch(t.readTime),new ss(kf(t.documentKey)),t.largestBatchId)):Vs.empty(),r=e.fields.map((function(e){var t=o(e,2),n=t[0],r=t[1];return new Ms(Wu.fromServerFormat(n),r)}));return new Rs(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Mu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Uh(e),a=Bh(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Kf.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:lh(r.readTime),documentKey:yf(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Kf.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Kf.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Kf.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?Kf.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Fh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Fh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Fh(e),i=new pc(Dh);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Ah(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new pc(Dh),r=this.Ze(t,e);if(null==r)return n;var i=Ls(t);if(null!=i){var a=e.data.field(i.fieldPath);if(bs(a)){var o,u=g(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Ah(t.indexId,e.key,this.He(s),r))}}catch(l){u.e(l)}finally{u.f()}}}else n=n.add(new Ah(t.indexId,e.key,Oh,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;pu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=mc(a),s=mc(o);u||s;){var l=!1,c=!1;if(u&&s){var f=n(u,s);f<0?c=!0:f>0&&(l=!0)}else null!=u?c=!0:l=!0;l?(r(s),s=mc(o)):c?(i(u),u=mc(a)):(u=mc(a),s=mc(o))}}(r,i,Dh,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),Kf.waitFor(o)}},{key:"rn",value:function(e){var t=1;return Bh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Dh(e,t)})).filter((function(e,t,n){return!t||0!==Dh(e,n[t-1])}));var r=[];r.push(e);var i,a=g(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Dh(o,e),s=Dh(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var l=[],c=0;c<r.length;c+=2)l.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,Oh,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,Oh,[]]));return l}}]),e}();function Vh(e){return th(e,"collectionParents")}function Fh(e){return th(e,"indexEntries")}function Uh(e){return th(e,"indexConfiguration")}function Bh(e){return th(e,"indexState")}var jh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zh=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function qh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){bu(1===u)})));var l,c=[],f=g(n.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=xf(t,h.key.path,n.batchId);a.push(i.delete(d)),c.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Kf.waitFor(a).next((function(){return c}))}function Kh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ku();t=e.noDocument}return JSON.stringify(t).length}zh.DEFAULT_COLLECTION_PERCENTILE=10,zh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zh.DEFAULT=new zh(41943040,zh.DEFAULT_COLLECTION_PERCENTILE,zh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zh.DISABLED=new zh(-1,0,0);var Gh=function(){function e(t,n,r,i){p(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wh(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Qh(e),o=Wh(e);return o.add({}).next((function(u){bu("number"==typeof u);var s,l=new nh(u,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return tf(e.Jt,t)})),i=n.mutations.map((function(t){return tf(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,l),f=[],h=new pc((function(e,t){return Mu(e.canonicalString(),t.canonicalString())})),d=g(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=xf(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(c)),f.push(a.put(p,_f))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=l.keys()})),Kf.waitFor(f).next((function(){return l}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Wh(e).get(t).next((function(e){return e?(bu(e.userId===n.userId),fh(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?Kf.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Wh(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(bu(t.batchId>=r),a=fh(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Wh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wh(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return fh(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=wf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Qh(e).Wt({range:i},(function(r,i,u){var s=o(r,3),l=s[0],c=s[1],f=s[2],h=kf(c);if(l===n.userId&&t.path.isEqual(h))return Wh(e).get(f).next((function(e){if(!e)throw ku();bu(e.userId===n.userId),a.push(fh(n.M,e))}));u.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pc(Mu),i=[];return t.forEach((function(t){var a=wf(n.userId,t.path),u=IDBKeyRange.lowerBound(a),s=Qh(e).Wt({range:u},(function(e,i,a){var u=o(e,3),s=u[0],l=u[1],c=u[2],f=kf(l);s===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(s)})),Kf.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=wf(this.userId,r),u=IDBKeyRange.lowerBound(a),s=new pc(Mu);return Qh(e).Wt({range:u},(function(e,t,a){var u=o(e,3),l=u[0],c=u[1],f=u[2],h=kf(c);l===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.dn(e,s)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Wh(e).get(t).next((function(e){if(null===e)throw ku();bu(e.userId===n.userId),r.push(fh(n.M,e))})))})),Kf.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return qh(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),Kf.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Kf.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Qh(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=kf(e[1]);i.push(a)}else r.done()})).next((function(){bu(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Hh(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return Yh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return bu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Hh(e,t,n){var r=wf(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),u=!1;return Qh(e).Wt({range:a,jt:!0},(function(e,n,r){var a=o(e,3),s=a[0],l=a[1];a[2];s===t&&l===i&&(u=!0),r.done()})).next((function(){return u}))}function Wh(e){return th(e,"mutations")}function Qh(e){return th(e,"documentMutations")}function Yh(e){return th(e,"mutationQueues")}var Xh=function(){function e(t){p(this,e),this.mn=t}return m(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),$h=function(){function e(t,n){p(this,e),this.referenceDelegate=t,this.M=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new Xh(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Bu.fromTimestamp(new Uu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Jh(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return bu(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Jh(e).Wt((function(o,u){var s=hh(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Kf.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Jh(e).Wt((function(e,n){var r=hh(n);t(r)}))}},{key:"pn",value:function(e){return Zh(e).get("targetGlobalKey").next((function(e){return bu(null!==e),e}))}},{key:"In",value:function(e,t){return Zh(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return Jh(e).put(dh(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ks(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Jh(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=hh(n);Gs(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=ed(e);return t.forEach((function(t){var o=yf(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Kf.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=ed(e);return Kf.forEach(t,(function(t){var a=yf(t.path);return Kf.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=ed(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ed(e),i=Ec();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=kf(e[1]),a=new ss(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=yf(t.path),r=IDBKeyRange.bound([n],[Fu(n)],!1,!0),i=0;return ed(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=o(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Jh(e).get(t).next((function(e){return e?hh(e):null}))}}]),e}();function Jh(e){return th(e,"targets")}function Zh(e){return th(e,"targetGlobal")}function ed(e){return th(e,"targetDocuments")}function td(e){return nd.apply(this,arguments)}function nd(){return nd=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===xu.FAILED_PRECONDITION&&t.message===zf){e.next=2;break}throw t;case 2:pu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),nd.apply(this,arguments)}function rd(e,t){var n=o(e,2),r=n[0],i=n[1],a=o(t,2),u=a[0],s=a[1],l=Mu(r,u);return 0===l?Mu(i,s):l}var id=function(){function e(t){p(this,e),this.An=t,this.buffer=new pc(rd),this.Rn=0}return m(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();rd(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),ad=function(){function e(t,n){p(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return m(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;pu("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,f(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Yf(n.t0)){n.next=12;break}pu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,td(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),od=function(){function e(t,n){p(this,e),this.Dn=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Kf.resolve(Ru.A);var r=new id(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(pu("LruGarbageCollector","Garbage collection skipped; disabled"),Kf.resolve(jh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(pu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),jh):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(pu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(l.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),vu()<=ae.DEBUG&&pu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-c,"ms")),Kf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ud=function(){function e(t,n){p(this,e),this.db=t,this.garbageCollector=function(e,t){return new od(e,t)}(this,n)}return m(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return sd(e,n)}},{key:"removeReference",value:function(e,t,n){return sd(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return sd(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return Yh(e).zt((function(r){return Hh(e,r,t).next((function(e){return e&&(n=!0),Kf.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Bu.min()),ed(e).delete([0,yf(o.path)])}))}));i.push(s)}})).next((function(){return Kf.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return sd(e,t)}},{key:"Mn",value:function(e,t){var n,r=ed(e),i=Ru.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=o(e,2),u=a[0],s=(a[1],r.path),l=r.sequenceNumber;0===u?(i!==Ru.A&&t(new ss(kf(n)),i),i=l,n=s):i=Ru.A})).next((function(){i!==Ru.A&&t(new ss(kf(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function sd(e,t){return ed(e).put(function(e,t){return{targetId:0,path:yf(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ld=function(){function e(){p(this,e),this.changes=new fc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ps.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Kf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),cd=function(){function e(t){p(this,e),this.M=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return dd(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return dd(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],sh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ps.newInvalidDocument(t);return dd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vd(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Ps.newInvalidDocument(t)};return dd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(vd(t))},(function(e,i){r={document:n.$n(t,i),size:Kh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=kc();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=kc(),i=new hc(ss.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,Kh(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return Kf.resolve();var r=new pc(yd);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(vd(r.first()),vd(r.last())),a=r.getIterator(),o=a.getNext();return dd(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ss.fromSegments([].concat(ee(t.prefixPath),[t.collectionGroup,t.documentId]));o&&yd(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(vd(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),sh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dd(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=kc(),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(ss.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=kc(),o=pd(t,n),u=pd(t,Bs.max());return dd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(ss.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new fd(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return hd(e).get("remoteDocumentGlobalKey").next((function(e){return bu(!!e),e}))}},{key:"Fn",value:function(e,t){return hd(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Zc(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ss.fromSegments(t.noDocument.path),i=ch(t.noDocument.readTime);n=Ps.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ku();var a=ss.fromSegments(t.unknownDocument.path),o=ch(t.unknownDocument.version);n=Ps.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Uu(e[0],e[1]);return Bu.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Bu.min()))return n}return Ps.newInvalidDocument(e)}}]),e}(),fd=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new fc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new pc((function(e,t){return Mu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=uh(t.Kn.M,o);i=i.add(a.path.popLast());var l=Kh(s);r+=l-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var c=uh(t.Kn.M,o.convertToNoDocument(Bu.min()));n.push(t.Kn.addEntry(e,a,c))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),Kf.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ld);function hd(e){return th(e,"remoteDocumentGlobal")}function dd(e){return th(e,"remoteDocumentsV14")}function vd(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function pd(e,t){var n=t.documentKey.path.toArray();return[e,sh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yd(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Mu(n[a],r[a]))return i;return(i=Mu(n.length,r.length))||((i=Mu(n[n.length-2],r[r.length-2]))||Mu(n[n.length-1],r[r.length-1]))}var md=function(){function e(t){p(this,e),this.M=t}return m(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Gf("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bf,{unique:!0}),e.createObjectStore("documentMutations")}(e),gd(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Kf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),gd(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Bu.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bf,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Kf.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Of});t.createIndex("collectionPathOverlayIndex",Mf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Vf,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Sf});t.createIndex("documentKeyIndex",Ef),t.createIndex("collectionGroupIndex",Tf)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Nf}).createIndex("sequenceNumberIndex",Pf,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Rf}).createIndex("documentKeyIndex",Lf,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=Kh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return Kf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return Kf.forEach(r,(function(r){bu(r.userId===n.userId);var i=fh(t.M,r);return qh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Gu(n),o=function(e){return[0,yf(e)]}(a);r.push(t.get(o).next((function(n){return n?Kf.resolve():function(n){return t.put({targetId:0,path:yf(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Kf.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Df});var n=t.store("collectionParents"),r=new Lh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:yf(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Gu(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=o(e,3),r=(n[0],n[1]),a=(n[2],kf(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=hh(r),a=dh(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ss(Gu.fromString(i.document.name).popFirst(5)):i.noDocument?ss.fromSegments(i.noDocument.path):i.unknownDocument?ss.fromSegments(i.unknownDocument.path):ku()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Kf.waitFor(r)}))}}]),e}();function gd(e){e.createObjectStore("targetDocuments",{keyPath:Cf}).createIndex("documentTargetsIndex",Af,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",If,{unique:!0}),e.createObjectStore("targetGlobal")}var kd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bd=function(){function e(t,n,r,i,a,o,u,s,l,c){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(p(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=l,this.Zn=c,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new _u(xu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ud(this,i),this.hs=n+"main",this.M=new oh(s),this.ls=new Hf(this.hs,this.ts,new md(this.M)),this.fs=new $h(this.referenceDelegate,this.M),this.ds=function(e){return new cd(e)}(this.M),this._s=new mh,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===c&&yu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new _u(xu.FAILED_PRECONDITION,kd);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Ru(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=f(d().mark((function n(r){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=f(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return xd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(Yf(t))return pu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return pu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return wd(e).get("owner").next((function(e){return Kf.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return xd(e).delete(this.clientId)}},{key:"vs",value:function(){var e=f(d().mark((function e(){var t,n,r,i,a=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=th(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Kf.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=g(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?Kf.resolve(!0):wd(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new _u(xu.FAILED_PRECONDITION,kd);return!1}}return!(!t.networkEnabled||!t.inForeground)||xd(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&pu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=f(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new eh(e,Ru.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return xd(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return Gh.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Mh(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return bh.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;pu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?jf:13===i?Bf:12===i?Uf:11===i?Ff:void ku();return this.ls.runTransaction(e,o,u,(function(i){return a=new eh(i,r.es?r.es.next():Ru.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw yu("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new _u(xu.FAILED_PRECONDITION,zf);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return wd(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new _u(xu.FAILED_PRECONDITION,kd)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wd(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=wd(e);return n.get("owner").next((function(e){return t.bs(e)?(pu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Kf.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(yu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),M()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return pu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return yu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(fr){yu("Failed to set zombie client id.",fr)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(fr){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Hf.vt()}}]),e}();function wd(e){return th(e,"owner")}function xd(e){return th(e,"clientMetadata")}function _d(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Sd=function(){function e(t,n,r){p(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return m(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=g(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=g(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return ss.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):ml(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new ss(t)).next((function(e){var t=wc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=wc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Kf.forEach(o,(function(o){var u=function(e,t){return new cl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=g(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,l=r.get(s);null==l&&(l=Ps.newInvalidDocument(s),r=r.insert(s,l)),Yl(u,l,a.localWriteTime),l.isFoundDocument()||(r=r.remove(s))}}catch(c){o.e(c)}finally{o.f()}}}catch(c){n.e(c)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Sl(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Ed=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return m(e,null,[{key:"Ys",value:function(t,n){var r,i=Ec(),a=Ec(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Td=function(){function e(){p(this,e)}return m(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Bu.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(dl(t)||vl(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(vu()<=ae.DEBUG&&pu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_l(t)),i.Zs.Qs(e,t,Fs(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new pc(Tl(e));return t.forEach((function(t,r){Sl(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return vu()<=ae.DEBUG&&pu("QueryEngine","Using full collection scan to execute query:",_l(t)),this.Zs.Qs(e,t,Bs.min())}}]),e}(),Id=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new hc(Mu),this.ri=new fc((function(e){return Ks(e)}),Gs),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return m(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Sd(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function Cd(e,t,n,r){return new Id(e,t,n,r)}function Ad(e,t){return Dd.apply(this,arguments)}function Dd(){return Dd=f(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Ec(),s=g(t);try{for(s.s();!(i=s.n()).done;){var l=i.value;a.push(l.batchId);var c,f=g(l.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,v=g(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=g(p.mutations);try{for(m.s();!(y=m.n()).done;){var k=y.value;u=u.add(k.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){v.e(b)}finally{v.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Dd.apply(this,arguments)}function Nd(e,t){var n=wu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Kf.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);bu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function Pd(e){var t=wu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function Rd(e,t){var n=wu(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var l=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?l=l.withResumeToken(Yu.EMPTY_BYTE_STRING,Bu.min()).withLastLimboFreeSnapshotVersion(Bu.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,r)),i=i.insert(u,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,l,a)&&o.push(n.fs.updateTargetData(e,l))}}));var u=kc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Ld(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Bu.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Kf.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function Ld(e,t,n){var r=Ec();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=kc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Bu.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):pu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Od(e,t){var n=wu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Md(e,t){var n=wu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,Kf.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new ah(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function Vd(e,t,n){return Fd.apply(this,arguments)}function Fd(){return Fd=f(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wu(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Yf(e.t1)){e.next=12;break}throw e.t1;case 12:pu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Fd.apply(this,arguments)}function Ud(e,t,n){var r=wu(e),i=Bu.min(),a=Ec();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=wu(e),i=r.ri.get(n);return void 0!==i?Kf.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,kl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:Bu.min(),n?a:Ec())})).next((function(e){return zd(r,El(t),e),{documents:e,li:a}}))}))}function Bd(e,t){var n=wu(e),r=wu(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function jd(e,t){var n=wu(e),r=n.oi.get(t)||Bu.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,Fs(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return zd(n,t,e),e}))}function zd(e,t,n){var r=Bu.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function qd(e,t,n,r){return Kd.apply(this,arguments)}function Kd(){return Kd=f(d().mark((function e(t,n,r,i){var a,o,u,s,l,c,f,h,v,p;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=wu(t),o=Ec(),u=kc(),s=g(r);try{for(s.s();!(l=s.n()).done;)c=l.value,f=n.fi(c.metadata.name),c.document&&(o=o.add(f)),(h=n.di(c)).setReadTime(n._i(c.metadata.readTime)),u=u.insert(f,h)}catch(d){s.e(d)}finally{s.f()}return v=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Md(a,function(e){return kl(hl(Gu.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Ld(e,v,u).next((function(t){return v.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}function Gd(e,t){return Hd.apply(this,arguments)}function Hd(){return Hd=f(d().mark((function e(t,n){var r,i,a,o=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Ec(),e.next=3,Md(t,kl(vh(n.bundledQuery)));case 3:return i=e.sent,a=wu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=qc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(Yu.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}var Wd=function(){function e(t){p(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return Kf.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:qc(n.createTime)}),Kf.resolve()}},{key:"getNamedQuery",value:function(e,t){return Kf.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:vh(e.bundledQuery),readTime:qc(e.readTime)}}(t)),Kf.resolve()}}]),e}(),Qd=function(){function e(){p(this,e),this.overlays=new hc(ss.comparator),this.gi=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return Kf.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Kf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),Kf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=xc(),i=t.length+1,a=new ss(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Kf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new hc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=xc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=xc(),l=i.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Kf.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ih(t,n));var a=this.gi.get(t);void 0===a&&(a=Ec(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),Yd=function(){function e(){p(this,e),this.yi=new pc(Xd.pi),this.Ii=new pc(Xd.Ti)}return m(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Xd(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new Xd(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new ss(new Gu([])),r=new Xd(n,e),i=new Xd(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new ss(new Gu([])),n=new Xd(t,e),r=new Xd(t,e+1),i=Ec();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Xd(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Xd=function(){function e(t,n){p(this,e),this.key=t,this.vi=n}return m(e,null,[{key:"pi",value:function(e,t){return ss.comparator(e.key,t.key)||Mu(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return Mu(e.vi,t.vi)||ss.comparator(e.key,t.key)}}]),e}(),$d=function(){function e(t,n){p(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new pc(Xd.pi)}return m(e,[{key:"checkEmpty",value:function(e){return Kf.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new nh(i,t,n,r);this.Bs.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new Xd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return Kf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Kf.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return Kf.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Kf.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return Kf.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Xd(t,0),i=new Xd(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),Kf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new pc(Mu);return t.forEach((function(e){var t=new Xd(e,0),i=new Xd(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),Kf.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ss.isDocumentKey(i)||(i=i.child(""));var a=new Xd(new ss(i),0),o=new pc(Mu);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),Kf.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;bu(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return Kf.forEach(t.mutations,(function(i){var a=new Xd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Xd(t,0),r=this.Di.firstAfterOrEqual(n);return Kf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,Kf.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),Jd=function(){function e(t){p(this,e),this.Mi=t,this.docs=new hc(ss.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Kf.resolve(n?n.document.mutableCopy():Ps.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=kc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ps.newInvalidDocument(e))})),Kf.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=kc(),i=new ss(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||js(Us(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Kf.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){ku()}},{key:"Oi",value:function(e,t){return Kf.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Zd(this)}},{key:"getSize",value:function(e){return Kf.resolve(this.size)}}]),e}(),Zd=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).Kn=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),Kf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(ld),ev=function(){function e(t){p(this,e),this.persistence=t,this.Fi=new fc((function(e){return Ks(e)}),Gs),this.lastRemoteSnapshotVersion=Bu.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Yd,this.targetCount=0,this.Li=Xh.gn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),Kf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Kf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Kf.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),Kf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),Kf.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new Xh(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,Kf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),Kf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,Kf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Kf.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Kf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return Kf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),Kf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Kf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),Kf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return Kf.resolve(n)}},{key:"containsKey",value:function(e,t){return Kf.resolve(this.Bi.containsKey(t))}}]),e}(),tv=function(){function e(t,n){var r=this;p(this,e),this.Ui={},this.overlays={},this.es=new Ru(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new ev(this),this.indexManager=new Rh,this.ds=new Jd((function(e){return r.referenceDelegate.qi(e)})),this.M=new oh(n),this._s=new Wd(this.M)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Qd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new $d(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;pu("MemoryPersistence","Starting transaction:",e);var i=new nv(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return Kf.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),nv=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(qf),rv=function(){function e(t){p(this,e),this.persistence=t,this.ji=new Yd,this.Wi=null}return m(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw ku()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),Kf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),Kf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),Kf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Kf.forEach(this.Hi,(function(r){var i=ss.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,Bu.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return Kf.or([function(){return Kf.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function iv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function av(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ov(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var uv=function(){function e(t,n,r,i){p(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new _u(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(yu("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),sv=function(){function e(t,n,r){p(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new _u(i.error.code,i.error.message))),a?new e(t,i.state,r):(yu("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),lv=function(){function e(t,n){p(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Ic(),o=0;i&&o<r.activeTargetIds.length;++o)i=us(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(yu("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),cv=function(){function e(t,n){p(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(yu("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),fv=function(){function e(){p(this,e),this.activeTargetIds=Ic()}return m(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),hv=function(){function e(t,n,r,i,a){p(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new hc(Mu),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=iv(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new fv),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return m(e,[{key:"start",value:function(){var e=f(d().mark((function e(){var t,n,r,i,a,o,u,s,l,c,f,h=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=g(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(iv(this.persistenceKey,i)))&&(o=lv.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),l=g(this.rr);try{for(l.s();!(c=l.n()).done;)f=c.value,this.sr(f)}catch(d){l.e(d)}finally{l.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ov(this.persistenceKey,e));if(n){var r=sv.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ov(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return pu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){pu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){pu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(pu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void yu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(f(d().mark((function e(){var r,i,a,o,u,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Ru.A;if(null!=e)try{var n=JSON.parse(e);bu("number"==typeof n),t=n}catch(e){yu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ru.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return l=t.Nr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new uv(this.currentUser,e,t,n),i=av(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=av(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=ov(this.persistenceKey,e),i=new sv(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return lv.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return uv.Yi(new fu(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return sv.Yi(r,t)}},{key:"mr",value:function(e){return cv.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:pu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=Ic();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),dv=function(){function e(){p(this,e),this.$r=new fv,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new fv,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),vv=function(){function e(){p(this,e)}return m(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),pv=function(){function e(){var t=this;p(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return m(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){pu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){pu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),yv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},mv=function(){function e(t){p(this,e),this.Wr=t.Wr,this.zr=t.zr}return m(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),gv=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return m(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new lu;o.listenOnce(iu.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ru.NO_ERROR:var t=o.getResponseJson();pu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ru.TIMEOUT:pu("Connection",'RPC "'+e+'" timed out'),a(new _u(xu.DEADLINE_EXCEEDED,"Request time out"));break;case ru.HTTP_ERROR:var n=o.getStatus();if(pu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(xu).indexOf(t)>=0?t:xu.UNKNOWN}(r.status);a(new _u(u,r.message))}else a(new _u(xu.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new _u(xu.UNAVAILABLE,"Connection failed."));break;default:ku()}}finally{pu("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=tu(),a=nu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new uu({})),this.ao(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(O())||"object"===typeof navigator&&"ReactNative"===navigator.product||O().indexOf("Electron/")>=0||function(){var e=O();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||O().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");pu("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),l=!1,c=!1,f=new mv({Wr:function(e){c?pu("Connection","Not sending because WebChannel is closed:",e):(l||(pu("Connection","Opening WebChannel transport."),s.open(),l=!0),pu("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,su.EventType.OPEN,(function(){c||pu("Connection","WebChannel transport opened.")})),h(s,su.EventType.CLOSE,(function(){c||(c=!0,pu("Connection","WebChannel transport closed"),f.no())})),h(s,su.EventType.ERROR,(function(e){c||(c=!0,mu("Connection","WebChannel transport errored:",e),f.no(new _u(xu.UNAVAILABLE,"The operation could not be completed")))})),h(s,su.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];bu(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){pu("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ic[e];if(void 0!==t)return cc(t)}(a),u=i.message;void 0===o&&(o=xu.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),c=!0,f.no(new _u(o,u)),s.close()}else pu("Connection","WebChannel received:",n),f.so(n)}})),h(a,au.STAT_EVENT,(function(e){e.stat===ou.PROXY?pu("Connection","Detected buffering proxy"):e.stat===ou.NOPROXY&&pu("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);pu("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return pu("RestConnection","Received: ",e),e}),(function(t){throw mu("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+hu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=yv[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function kv(){return"undefined"!=typeof window?window:null}function bv(){return"undefined"!=typeof document?document:null}function wv(e){return new Uc(e,!0)}var xv=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&pu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),_v=function(){function e(t,n,r,i,a,o,u,s){p(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new xv(t,n)}return m(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=f(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===xu.RESOURCE_EXHAUSTED?(yu(n.toString()),yu("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===xu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=o(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new _u(xu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(f(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return pu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(pu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Sv=function(e){w(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return m(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ku()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(bu(void 0===t||"string"==typeof t),Yu.fromBase64String(t||"")):(bu(void 0===t||t instanceof Uint8Array),Yu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?xu.UNKNOWN:cc(e.code);return new _u(t,e.message||"")}(o);n=new Pc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var l=Wc(e,s.document.name),c=qc(s.document.updateTime),f=new Ds({mapValue:{fields:s.document.fields}}),h=Ps.newFoundDocument(l,c,f),d=s.targetIds||[],v=s.removedTargetIds||[];n=new Dc(d,v,h.key,h)}else if("documentDelete"in t){t.documentDelete;var p=t.documentDelete;p.document;var y=Wc(e,p.document),m=p.readTime?qc(p.readTime):Bu.min(),g=Ps.newNoDocument(y,m),k=p.removedTargetIds||[];n=new Dc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=Wc(e,b.document),x=b.removedTargetIds||[];n=new Dc([],x,w,null)}else{if(!("filter"in t))return ku();t.filter;var _=t.filter;_.targetId;var S=_.count||0,E=new sc(S),T=_.targetId;n=new Nc(T,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Bu.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Bu.min():t.readTime?qc(t.readTime):Bu.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Xc(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Hs(r)?{documents:rf(e,r)}:{query:af(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=jc(e,t.resumeToken):t.snapshotVersion.compareTo(Bu.min())>0&&(n.readTime=Bc(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ku()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Xc(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(_v),Ev=function(e){w(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return m(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,Xn(x(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(bu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(bu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?qc(e.updateTime):qc(t);return n.isEqual(Bu.min())&&(n=qc(t)),new Kl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=qc(e.commitTime);return this.listener.Yo(n,t)}return bu(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=Xc(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return tf(t.M,e)}))};this.Fo(n)}}]),n}(_v),Tv=function(e){w(n,e);var t=T(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return m(n,[{key:"eu",value:function(){if(this.tu)throw new _u(xu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),u=a[0],s=a[1];return r.bo.oo(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new _u(xu.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=o(i,2),u=a[0],s=a[1];return r.bo.ho(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===xu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new _u(xu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return m((function e(){p(this,e)}))}()),Iv=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return m(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(yu(t),this.iu=!1):pu("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),Cv=m((function e(t,n,r,i,a){var o=this;p(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr((function(e){r.enqueueAndForget(f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Uv(o),!e.t0){e.next=5;break}return pu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=f(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wu(t)).fu.add(4),e.next=4,Nv(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,Av(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new Iv(r,i)}));function Av(e){return Dv.apply(this,arguments)}function Dv(){return Dv=f(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Uv(t)){e.next=18;break}n=g(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Dv.apply(this,arguments)}function Nv(e){return Pv.apply(this,arguments)}function Pv(){return Pv=f(d().mark((function e(t){var n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Pv.apply(this,arguments)}function Rv(e,t){var n=wu(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),Fv(n)?Vv(n):vp(n).xo()&&Ov(n,t))}function Lv(e,t){var n=wu(e),r=vp(n);n.lu.delete(t),r.xo()&&Mv(n,t),0===n.lu.size&&(r.xo()?r.Mo():Uv(n)&&n.wu.set("Unknown"))}function Ov(e,t){e.mu.Z(t.targetId),vp(e).jo(t)}function Mv(e,t){e.mu.Z(t),vp(e).Wo(t)}function Vv(e){e.mu=new Lc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),vp(e).start(),e.wu.ru()}function Fv(e){return Uv(e)&&!vp(e).Co()&&e.lu.size>0}function Uv(e){return 0===wu(e).fu.size}function Bv(e){e.mu=void 0}function jv(e){return zv.apply(this,arguments)}function zv(){return zv=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){Ov(t,e)}));case 1:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function qv(e,t){return Kv.apply(this,arguments)}function Kv(){return Kv=f(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bv(t),Fv(t)?(t.wu.au(n),Vv(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Kv.apply(this,arguments)}function Gv(e,t,n){return Hv.apply(this,arguments)}function Hv(){return Hv=f(d().mark((function e(t,n,r){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof Pc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=f(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),pu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Wv(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Dc?t.mu.ut(n):n instanceof Nc?t.mu._t(n):t.mu.ht(n),r.isEqual(Bu.min())){e.next=29;break}return e.prev=14,e.next=17,Pd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(Yu.EMPTY_BYTE_STRING,n.snapshotVersion)),Mv(e,t);var r=new ah(n.target,t,1,n.sequenceNumber);Ov(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),pu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Wv(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Hv.apply(this,arguments)}function Wv(e,t,n){return Qv.apply(this,arguments)}function Qv(){return Qv=f(d().mark((function e(t,n,r){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yf(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,Nv(t);case 5:t.wu.set("Offline"),r||(r=function(){return Pd(t.localStore)}),t.asyncQueue.enqueueRetryable(f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,Av(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Qv.apply(this,arguments)}function Yv(e,t){return t().catch((function(n){return Wv(e,n,t)}))}function Xv(e){return $v.apply(this,arguments)}function $v(){return $v=f(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=wu(t),r=pp(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!Jv(n)){e.next=19;break}return e.prev=3,e.next=6,Od(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,Zv(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Wv(n,e.t0);case 17:e.next=2;break;case 19:ep(n)&&tp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),$v.apply(this,arguments)}function Jv(e){return Uv(e)&&e.hu.length<10}function Zv(e,t){e.hu.push(t);var n=pp(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function ep(e){return Uv(e)&&!pp(e).Co()&&e.hu.length>0}function tp(e){pp(e).start()}function np(e){return rp.apply(this,arguments)}function rp(){return rp=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pp(t).Zo();case 1:case"end":return e.stop()}}),e)}))),rp.apply(this,arguments)}function ip(e){return ap.apply(this,arguments)}function ap(){return ap=f(d().mark((function e(t){var n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pp(t),r=g(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ap.apply(this,arguments)}function op(e,t,n){return up.apply(this,arguments)}function up(){return up=f(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=rh.from(i,n,r),e.next=3,Yv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Xv(t);case 5:case"end":return e.stop()}}),e)}))),up.apply(this,arguments)}function sp(e,t){return lp.apply(this,arguments)}function lp(){return lp=f(d().mark((function e(t,n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&pp(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=f(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!lc(i=n.code)||i===xu.ABORTED){e.next=7;break}return r=t.hu.shift(),pp(t).ko(),e.next=5,Yv(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Xv(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:ep(t)&&tp(t);case 5:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function cp(e,t){return fp.apply(this,arguments)}function fp(){return fp=f(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=wu(t)).asyncQueue.verifyOperationInProgress(),pu("RemoteStore","RemoteStore received new credentials"),i=Uv(r),r.fu.add(3),e.next=6,Nv(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,Av(r);case 12:case"end":return e.stop()}}),e)}))),fp.apply(this,arguments)}function hp(e,t){return dp.apply(this,arguments)}function dp(){return dp=f(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wu(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,Av(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,Nv(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),dp.apply(this,arguments)}function vp(e){return e.gu||(e.gu=function(e,t,n){var r=wu(e);return r.eu(),new Sv(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:jv.bind(null,e),Yr:qv.bind(null,e),Qo:Gv.bind(null,e)}),e.du.push(function(){var t=f(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),Fv(e)?Vv(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:Bv(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function pp(e){return e.yu||(e.yu=function(e,t,n){var r=wu(e);return r.eu(),new Ev(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:np.bind(null,e),Yr:sp.bind(null,e),Xo:ip.bind(null,e),Yo:op.bind(null,e)}),e.du.push(function(){var t=f(d().mark((function t(n){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,Xv(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(pu("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var yp=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Su,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _u(xu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function mp(e,t){if(yu("AsyncQueue","".concat(t,": ").concat(e)),Yf(e))return new _u(xu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var gp=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||ss.comparator(e.key,n.key)}:function(e,t){return ss.comparator(e.key,t.key)},this.keyedMap=wc(),this.sortedSet=new hc(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),kp=function(){function e(){p(this,e),this.pu=new hc(ss.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):ku():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),bp=function(){function e(t,n,r,i,a,o,u,s){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,gp.emptySet(n),a,r,i,!0,!1)}}]),e}(),wp=m((function e(){p(this,e),this.Tu=void 0,this.listeners=[]})),xp=m((function e(){p(this,e),this.queries=new fc((function(e){return xl(e)}),wl),this.onlineState="Unknown",this.Eu=new Set}));function _p(e,t){return Sp.apply(this,arguments)}function Sp(){return Sp=f(d().mark((function e(t,n){var r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new wp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=mp(e.t0,"Initialization of query '".concat(_l(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&Ap(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Sp.apply(this,arguments)}function Ep(e,t){return Tp.apply(this,arguments)}function Tp(){return Tp=f(d().mark((function e(t,n){var r,i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Tp.apply(this,arguments)}function Ip(e,t){var n,r=wu(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var l,c=g(s.listeners);try{for(c.s();!(l=c.n()).done;){l.value.Ru(o)&&(i=!0)}}catch(f){c.e(f)}finally{c.f()}s.Tu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Ap(r)}function Cp(e,t,n){var r=wu(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Ap(e){e.Eu.forEach((function(e){e.next()}))}var Dp=function(){function e(t,n,r){p(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new bp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=bp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),Np=function(){function e(t,n){p(this,e),this.payload=t,this.byteLength=n}return m(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),Pp=function(){function e(t){p(this,e),this.M=t}return m(e,[{key:"fi",value:function(e){return Wc(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?Zc(this.M,e.document,!1):Ps.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return qc(e)}}]),e}(),Rp=function(){function e(t,n,r){p(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Lp(t)}return m(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Gu.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Pp(this.M),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=g(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=(n.get(l)||Ec()).add(u);n.set(l,c)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=f(d().mark((function e(){var t,n,r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qd(this.localStore,new Pp(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=g(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Gd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Lp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Op=m((function e(t){p(this,e),this.key=t})),Mp=m((function e(t){p(this,e),this.key=t})),Vp=function(){function e(t,n){p(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=Ec(),this.mutatedKeys=Ec(),this.Uu=Tl(t),this.qu=new gp(this.Uu)}return m(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new kp,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=dl(this.query)&&i.size===this.query.limit?i.last():null,l=vl(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var c=i.get(e),f=Sl(n.query,t)?t:null,h=!!c&&n.mutatedKeys.has(c.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;c&&f?c.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.ju(c,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Uu(f,s)>0||l&&n.Uu(f,l)<0)&&(u=!0)):!c&&f?(r.track({type:0,doc:f}),v=!0):c&&!f&&(r.track({type:1,doc:c}),v=!0,(s||l)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),dl(this.query)||vl(this.query))for(;o.size>this.query.limit;){var c=dl(this.query)?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ku()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new bp(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new kp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=Ec(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new Mp(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new Op(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=Ec();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return bp.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),Fp=m((function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r})),Up=m((function e(t){p(this,e),this.key=t,this.Zu=!1})),Bp=function(){function e(t,n,r,i,a,o){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new fc((function(e){return xl(e)}),wl),this.na=new Map,this.sa=new Set,this.ia=new hc(ss.comparator),this.ra=new Map,this.oa=new Yd,this.ua={},this.aa=new Map,this.ca=Xh.yn(),this.onlineState="Unknown",this.ha=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function jp(e,t){return zp.apply(this,arguments)}function zp(){return zp=f(d().mark((function e(t,n){var r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ly(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,Md(r.localStore,kl(n));case 8:return u=e.sent,r.isPrimaryClient&&Rv(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,qp(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function qp(e,t,n,r){return Kp.apply(this,arguments)}function Kp(){return Kp=f(d().mark((function e(t,n,r,i){var a,o,u,s,l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=f(d().mark((function e(t,n,r,i){var a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,Ud(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(cy(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ud(t.localStore,n,!0);case 3:return a=e.sent,o=new Vp(n,a.li),u=o.Gu(a.documents),s=Ac.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),l=o.applyChanges(u,t.isPrimaryClient,s),cy(t,r,l.Hu),c=new Fp(n,r,o),e.abrupt("return",(t.ea.set(n,c),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Kp.apply(this,arguments)}function Gp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=f(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wu(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!wl(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Vd(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Lv(r.remoteStore,i.targetId),sy(r,i.targetId)})).catch(td);case 9:e.next=14;break;case 11:return sy(r,i.targetId),e.next=14,Vd(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t,n){return Qp.apply(this,arguments)}function Qp(){return Qp=f(d().mark((function e(t,n,r){var i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oy(t),e.prev=1,e.next=4,function(e,t){var n,r=wu(e),i=Uu.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Ec());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,c=Xl(l,n.get(l.key));null!=c&&u.push(new ec(l.key,c,Ns(c.value.mapValue),Gl.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new hc(Mu)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,dy(i,a.changes);case 9:return e.next=11,Xv(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=mp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Qp.apply(this,arguments)}function Yp(e,t){return Xp.apply(this,arguments)}function Xp(){return Xp=f(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),e.prev=1,e.next=4,Rd(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(bu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?bu(n.Zu):e.removedDocuments.size>0&&(bu(n.Zu),n.Zu=!1))})),e.next=8,dy(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,td(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Xp.apply(this,arguments)}function $p(e,t,n){var r=wu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=wu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Ap(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Jp(e,t,n){return Zp.apply(this,arguments)}function Zp(){return Zp=f(d().mark((function e(t,n,r){var i,a,o,u,s,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=wu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new hc(ss.comparator)).insert(o,Ps.newNoDocument(o,Bu.min())),s=Ec().add(o),l=new Cc(Bu.min(),new Map,new pc(Mu),u,s),e.next=9,Yp(i,l);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),hy(i),e.next=16;break;case 14:return e.next=16,Vd(i.localStore,n,!1).then((function(){return sy(i,n,r)})).catch(td);case 16:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}function ey(e,t){return ty.apply(this,arguments)}function ty(){return ty=f(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),i=n.batch.batchId,e.prev=1,e.next=4,Nd(r.localStore,n);case 4:return a=e.sent,uy(r,i,null),oy(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,dy(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,td(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ty.apply(this,arguments)}function ny(e,t,n){return ry.apply(this,arguments)}function ry(){return ry=f(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=wu(t),e.prev=1,e.next=4,function(e,t){var n=wu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return bu(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,uy(i,n,r),oy(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,dy(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,td(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ry.apply(this,arguments)}function iy(e,t){return ay.apply(this,arguments)}function ay(){return ay=f(d().mark((function e(t,n){var r,i,a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uv((r=wu(t)).remoteStore)||pu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=wu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=mp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),ay.apply(this,arguments)}function oy(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function uy(e,t,n){var r=wu(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function sy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||ly(e,t)}))}function ly(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(Lv(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),hy(e))}function cy(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Op?(e.oa.addReference(a.key,t),fy(e,a)):a instanceof Mp?(pu("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||ly(e,a.key)):ku()}}catch(o){i.e(o)}finally{i.f()}}function fy(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(pu("SyncEngine","New document in limbo: "+n),e.sa.add(r),hy(e))}function hy(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new ss(Gu.fromString(t)),r=e.ca.next();e.ra.set(r,new Up(n)),e.ia=e.ia.insert(n,r),Rv(e.remoteStore,new ah(kl(hl(n.path)),r,2,Ru.A))}}function dy(e,t,n){return vy.apply(this,arguments)}function vy(){return vy=f(d().mark((function e(t,n,r){var i,a,o,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=wu(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Ed.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=f(d().mark((function e(t,n){var r,i,a,o,u,s,l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Kf.forEach(n,(function(t){return Kf.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Kf.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Yf(e.t0)){e.next=10;break}throw e.t0;case 10:pu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),l=s.snapshotVersion,c=s.withLastLimboFreeSnapshotVersion(l),r.ii=r.ii.insert(u,c))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),vy.apply(this,arguments)}function py(e,t){return yy.apply(this,arguments)}function yy(){return yy=f(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=wu(t)).currentUser.isEqual(n)){e.next=11;break}return pu("SyncEngine","User change. New user:",n.toKey()),e.next=5,Ad(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new _u(xu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,dy(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),yy.apply(this,arguments)}function my(e,t){var n=wu(e),r=n.ra.get(t);if(r&&r.Zu)return Ec().add(r.key);var i=Ec(),a=n.na.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,l=n.ea.get(s);i=i.unionWith(l.view.Ku)}}catch(c){u.e(c)}finally{u.f()}return i}function gy(e,t){return ky.apply(this,arguments)}function ky(){return ky=f(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),e.next=3,Ud(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&cy(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),ky.apply(this,arguments)}function by(e,t){return wy.apply(this,arguments)}function wy(){return wy=f(d().mark((function e(t,n){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),e.abrupt("return",jd(r.localStore,n).then((function(e){return dy(r,e)})));case 2:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function xy(e,t,n,r){return _y.apply(this,arguments)}function _y(){return _y=f(d().mark((function e(t,n,r,i){var a,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wu(t),e.next=3,function(e,t){var n=wu(e),r=wu(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):Kf.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Xv(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(uy(a,n,i||null),oy(a,n),function(e,t){wu(wu(e).Bs)._n(t)}(a.localStore,n)):ku();case 11:return e.next=13,dy(a,o);case 13:e.next=16;break;case 15:pu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function Sy(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=f(d().mark((function e(t,n){var r,i,a,o,u,s,l,c;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ly(r=wu(t)),Oy(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Ty(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,hp(r.remoteStore,!0);case 9:o=g(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Rv(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return l=[],c=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):c=c.then((function(){return sy(r,t),Vd(r.localStore,t,!0)})),Lv(r.remoteStore,t)})),e.next=19,c;case 19:return e.next=21,Ty(r,l);case 21:return function(e){var t=wu(e);t.ra.forEach((function(e,n){Lv(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new hc(ss.comparator)}(r),r.ha=!1,e.next=25,hp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Ty(e,t,n){return Iy.apply(this,arguments)}function Iy(){return Iy=f(d().mark((function e(t,n,r){var i,a,o,u,s,l,c,f,h,v,p,y,m,k;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=wu(t),a=[],o=[],u=g(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(l=s.value,c=void 0,!(f=i.na.get(l))||0===f.length){e.next=34;break}return e.next=11,Md(i.localStore,kl(f[0]));case 11:c=e.sent,h=g(f),e.prev=13,h.s();case 15:if((v=h.n()).done){e.next=24;break}return p=v.value,y=i.ea.get(p),e.next=20,gy(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Bd(i.localStore,l);case 36:return k=e.sent,e.next=39,Md(i.localStore,k);case 39:return c=e.sent,e.next=42,qp(i,Cy(k),l,!1);case 42:a.push(c);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Iy.apply(this,arguments)}function Cy(e){return fl(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ay(e){var t=wu(e);return wu(wu(t.localStore).persistence).Fs()}function Dy(e,t,n,r){return Ny.apply(this,arguments)}function Ny(){return Ny=f(d().mark((function e(t,n,r,i){var a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=wu(t)).ha){e.next=3;break}return e.abrupt("return",void pu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,jd(a.localStore,El(o[0]));case 10:return u=e.sent,s=Cc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,dy(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Vd(a.localStore,n,!0);case 17:return sy(a,n,i),e.abrupt("break",20);case 19:ku();case 20:case"end":return e.stop()}}),e)}))),Ny.apply(this,arguments)}function Py(e,t,n){return Ry.apply(this,arguments)}function Ry(){return Ry=f(d().mark((function e(t,n,r){var i,a,o,u,s,l,c,f,h;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ly(t)).ha){e.next=45;break}a=g(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return pu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Bd(i.localStore,u);case 12:return s=e.sent,e.next=15,Md(i.localStore,s);case 15:return l=e.sent,e.next=18,qp(i,Cy(s),l.targetId,!1);case 18:Rv(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:c=g(r),e.prev=30,h=d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,Vd(i.localStore,t,!1).then((function(){Lv(i.remoteStore,t),sy(i,t)})).catch(td);case 5:case"end":return e.stop()}}),e)})),c.s();case 33:if((f=c.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),c.e(e.t2);case 42:return e.prev=42,c.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Ry.apply(this,arguments)}function Ly(e){var t=wu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=my.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Jp.bind(null,t),t.ta.Qo=Ip.bind(null,t.eventManager),t.ta.fa=Cp.bind(null,t.eventManager),t}function Oy(e){var t=wu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ey.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ny.bind(null,t),t}function My(e,t,n){var r=wu(e);(function(){var e=f(d().mark((function e(t,n,r){var i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=wu(e),r=qc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Lp(i)),a=new Rp(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,dy(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=wu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(mu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Vy=function(){function e(){p(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=wv(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return Cd(this.persistence,new Td,e.initialUser,this.M)}},{key:"wa",value:function(e){return new tv(rv.zi,this.M)}},{key:"_a",value:function(e){return new dv}},{key:"terminate",value:function(){var e=f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Fy=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=f(d().mark((function e(t){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(x(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,Oy(this.ya.syncEngine);case 6:return e.next=8,Xv(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return Cd(this.persistence,new Td,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new ad(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=_d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zh.withCacheSize(this.cacheSizeBytes):zh.DEFAULT;return new bd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,kv(),bv(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new dv}}]),n}(Vy),Uy=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=f(d().mark((function e(t){var r,i=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(x(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof hv,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:xy.bind(null,r),Or:Dy.bind(null,r),Fr:Py.bind(null,r),Fs:Ay.bind(null,r),kr:by.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sy(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=kv();if(!hv.vt(t))throw new _u(xu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=_d(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Fy),By=function(){function e(){p(this,e)}return m(e,[{key:"initialize",value:function(){var e=f(d().mark((function e(t,n){var r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return $p(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=py.bind(null,this.syncEngine),e.next=12,hp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new xp}},{key:"createDatastore",value:function(e){var t,n=wv(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new gv(t));return function(e,t,n,r){return new Tv(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return $p(o.syncEngine,e,0)},a=pv.vt()?new pv:new vv,new Cv(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Bp(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=f(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=wu(t),pu("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,Nv(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function jy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return f(d().mark((function r(){var i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var zy=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),qy=function(){function e(t,n){var r=this;p(this,e),this.Ta=t,this.M=n,this.metadata=new Su,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=f(d().mark((function e(){var t,n,r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new Np(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=f(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=f(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=f(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ky=function(){function e(t){p(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=f(d().mark((function e(t){var n,r=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new _u(xu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=f(d().mark((function e(t,n){var r,i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),i=Xc(r.M)+"/documents",a={documents:n.map((function(e){return Hc(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=ef(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());bu(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new oc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=f(d().mark((function e(){var t,n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ss.fromPath(t);n.mutations.push(new uc(r,n.precondition(r)))})),e.next=7,function(){var e=f(d().mark((function e(t,n){var r,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wu(t),i=Xc(r.M)+"/documents",a={writes:n.map((function(e){return tf(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ku();t=Bu.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new _u(xu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Gl.updateTime(t):Gl.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Bu.min()))throw new _u(xu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gl.updateTime(t)}return Gl.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Gy=function(){function e(t,n,r,i){p(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new xv(this.asyncQueue,"transaction_retry")}return m(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(f(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ky(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!as(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!lc(t)}return!1}}]),e}(),Hy=function(){function e(t,n,r,i){var a=this;p(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fu.UNAUTHENTICATED,this.clientId=Ou.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return pu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=f(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new _u(xu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Su;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(f(d().mark((function n(){var r;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=mp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Wy(e,t){return Qy.apply(this,arguments)}function Qy(){return Qy=f(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),pu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Ad(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Qy.apply(this,arguments)}function Yy(e,t){return Xy.apply(this,arguments)}function Xy(){return Xy=f(d().mark((function e(t,n){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,$y(t);case 3:return r=e.sent,pu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return cp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return cp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}function $y(e){return Jy.apply(this,arguments)}function Jy(){return Jy=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return pu("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Wy(t,new Vy);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),Jy.apply(this,arguments)}function Zy(e){return em.apply(this,arguments)}function em(){return em=f(d().mark((function e(t){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return pu("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Yy(t,new By);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),em.apply(this,arguments)}function tm(e){return $y(e).then((function(e){return e.persistence}))}function nm(e){return $y(e).then((function(e){return e.localStore}))}function rm(e){return Zy(e).then((function(e){return e.remoteStore}))}function im(e){return Zy(e).then((function(e){return e.syncEngine}))}function am(e){return om.apply(this,arguments)}function om(){return om=f(d().mark((function e(t){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=jp.bind(null,n.syncEngine),r.onUnlisten=Gp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),om.apply(this,arguments)}function um(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new zy({next:function(a){t.enqueueAndForget((function(){return Ep(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new _u(xu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new _u(xu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Dp(hl(n.path),a,{includeMetadataChanges:!0,Cu:!0});return _p(e,o)},i.next=3,am(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function sm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new zy({next:function(n){t.enqueueAndForget((function(){return Ep(e,o)})),n.fromCache&&"server"===r.source?i.reject(new _u(xu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Dp(n,a,{includeMetadataChanges:!0,Cu:!0});return _p(e,o)},i.next=3,am(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var lm=new Map;function cm(e,t,n){if(!n)throw new _u(xu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fm(e,t,n,r){if(!0===t&&!0===r)throw new _u(xu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function hm(e){if(!ss.isDocumentKey(e))throw new _u(xu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dm(e){if(ss.isDocumentKey(e))throw new _u(xu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function vm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ku()}function pm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _u(xu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vm(e);throw new _u(xu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function ym(e,t){if(t<=0)throw new _u(xu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var mm=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new _u(xu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _u(xu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),gm=function(){function e(t,n,r){p(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1,t instanceof is?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _u(xu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(e.options.projectId)}(t))}return m(e,[{key:"app",get:function(){if(!this._app)throw new _u(xu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new _u(xu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Tu;switch(e.type){case"gapi":var t=e.client;return bu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Du(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new _u(xu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=lm.get(e);t&&(pu("ComponentProvider","Removing Datastore"),lm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function km(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=pm(e,gm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&mu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=fu.MOCK_USER;else{o=L(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new _u(xu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fu(s)}e._authCredentials=new Iu(new Eu(o,u))}}var bm=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new xm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wm=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),xm=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,hl(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bm(this.firestore,null,new ss(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wm);function _m(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Q(e),cm("collection","path",t),e instanceof gm){var a=Gu.fromString.apply(Gu,[t].concat(r));return dm(a),new xm(e,null,a)}if(!(e instanceof bm||e instanceof xm))throw new _u(xu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gu.fromString.apply(Gu,[t].concat(r)));return dm(o),new xm(e.firestore,null,o)}function Sm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Q(e),1===arguments.length&&(t=Ou.R()),cm("doc","path",t),e instanceof gm){var a=Gu.fromString.apply(Gu,[t].concat(r));return hm(a),new bm(e,null,new ss(a))}if(!(e instanceof bm||e instanceof xm))throw new _u(xu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Gu.fromString.apply(Gu,[t].concat(r)));return hm(o),new bm(e.firestore,e instanceof xm?e.converter:null,new ss(o))}function Em(e,t){return e=Q(e),t=Q(t),(e instanceof bm||e instanceof xm)&&(t instanceof bm||t instanceof xm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Tm(e,t){return e=Q(e),t=Q(t),e instanceof wm&&t instanceof wm&&e.firestore===t.firestore&&wl(e._query,t._query)&&e.converter===t.converter}var Im=function(){function e(){var t=this;p(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new xv(this,"async_queue_retry"),this.qa=function(){var e=bv();e&&pu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=bv();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return m(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=bv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new Su;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=f(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Yf(e.t0)){e.next=12;break}throw e.t0;case 12:pu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw yu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=yp.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&ku()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=f(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=g(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function Cm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Am=function(){function e(){p(this,e),this._progressObserver={},this._taskCompletionResolver=new Su,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Dm=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Im,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||Pm(this),this._firestoreClient.terminate()}}]),n}(gm);function Nm(e){return e._firestoreClient||Pm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Pm(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new rs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Hy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Rm(e,t,n){var r=new Su;return e.asyncQueue.enqueue(f(d().mark((function i(){return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Wy(e,n);case 3:return i.next=5,Yy(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===xu.FAILED_PRECONDITION||e.code===xu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Lm(e){return function(e){return e.asyncQueue.enqueue(f(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tm(e);case 2:return n=t.sent,t.next=5,rm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=wu(e);return t.fu.delete(0),Av(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Nm(e=pm(e,Dm)))}function Om(e){return function(e){return e.asyncQueue.enqueue(f(d().mark((function t(){var n,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tm(e);case 2:return n=t.sent,t.next=5,rm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=f(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wu(t)).fu.add(0),e.next=4,Nv(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Nm(e=pm(e,Dm)))}function Mm(e,t){var n=Nm(e=pm(e,Dm)),r=new Am;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new qy(e,t)}(function(e,t){if(e instanceof Uint8Array)return jy(e,t);if(e instanceof ArrayBuffer)return jy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,wv(t));e.asyncQueue.enqueueAndForget(f(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=My,t.next=3,im(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Vm(e,t){return function(e,t){return e.asyncQueue.enqueue(f(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=wu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,nm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Nm(e=pm(e,Dm)),t).then((function(t){return t?new wm(e,null,t.query):null}))}function Fm(e){if(e._initialized||e._terminated)throw new _u(xu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Um=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new _u(xu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wu(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Bm=function(){function e(t){p(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yu.fromBase64String(t))}catch(t){throw new _u(xu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yu.fromUint8Array(t))}}]),e}(),jm=m((function e(t){p(this,e),this._methodName=t})),zm=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new _u(xu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _u(xu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Mu(this._lat,e._lat)||Mu(this._long,e._long)}}]),e}(),qm=/^__.*__$/,Km=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zl(e,this.data,t,this.fieldTransforms)}}]),e}(),Gm=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Hm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ku()}}var Wm=function(){function e(t,n,r,i,a,o){p(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return dg(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Hm(this.Xa)&&qm.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),Qm=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||wv(t)}return m(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wm({Xa:e,methodName:t,uc:n,path:Wu.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function Ym(e){var t=e._freezeSettings(),n=wv(e._databaseId);return new Qm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Xm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);lg("Data must be an object, but it was:",o,r);var u,s,l=ug(r,o);if(a.merge)u=new Qu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var c,f=[],h=g(a.mergeFields);try{for(h.s();!(c=h.n()).done;){var d=c.value,v=cg(t,d,n);if(!o.contains(v))throw new _u(xu.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));vg(f,v)||f.push(v)}}catch(p){h.e(p)}finally{h.f()}u=new Qu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Km(new Ds(l),u,s)}var $m=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jm);function Jm(e,t,n){return new Wm({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var Zm=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new ql(e.path,new Ol)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(jm),eg=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).cc=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=Jm(this,e,!0),n=this.cc.map((function(e){return og(e,t)})),r=new Ml(n);return new ql(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jm),tg=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).cc=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=Jm(this,e,!0),n=this.cc.map((function(e){return og(e,t)})),r=new Fl(n);return new ql(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jm),ng=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).hc=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new Bl(e.M,Dl(e.M,this.hc));return new ql(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(jm);function rg(e,t,n,r){var i=e.ac(1,t,n);lg("Data must be an object, but it was:",i,r);var a=[],o=Ds.empty();zu(r,(function(e,r){var u=hg(t,e,n);r=Q(r);var s=i.sc(u);if(r instanceof $m)a.push(u);else{var l=og(r,s);null!=l&&(a.push(u),o.set(u,l))}}));var u=new Qu(a);return new Gm(o,u,i.fieldTransforms)}function ig(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[cg(t,r,n)],s=[i];if(a.length%2!=0)throw new _u(xu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)u.push(cg(t,a[l])),s.push(a[l+1]);for(var c=[],f=Ds.empty(),h=u.length-1;h>=0;--h)if(!vg(c,u[h])){var d=u[h],v=s[h];v=Q(v);var p=o.sc(d);if(v instanceof $m)c.push(d);else{var y=og(v,p);null!=y&&(c.push(d),f.set(d,y))}}var m=new Qu(c);return new Gm(f,m,o.fieldTransforms)}function ag(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return og(n,e.ac(r?4:3,t))}function og(e,t){if(sg(e=Q(e)))return lg("Unsupported field value:",t,e),ug(e,t);if(e instanceof jm)return function(e,t){if(!Hm(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=og(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Q(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Dl(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Uu.fromDate(e);return{timestampValue:Bc(t.M,n)}}if(e instanceof Uu){var r=new Uu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bc(t.M,r)}}if(e instanceof zm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Bm)return{bytesValue:jc(t.M,e._byteString)};if(e instanceof bm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Kc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(vm(e)))}(e,t)}function ug(e,t){var n={};return qu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):zu(e,(function(e,r){var i=og(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function sg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Uu||e instanceof zm||e instanceof Bm||e instanceof bm||e instanceof jm)}function lg(e,t,n){if(!sg(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=vm(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function cg(e,t,n){if((t=Q(t))instanceof Um)return t._internalPath;if("string"==typeof t)return hg(e,t);throw dg("Field path arguments must be of type string or ",e,!1,void 0,n)}var fg=new RegExp("[~\\*/\\[\\]]");function hg(e,t,n){if(t.search(fg)>=0)throw dg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(Um,ee(t.split(".")))._internalPath}catch(r){throw dg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dg(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new _u(xu.INVALID_ARGUMENT,u+e+s)}function vg(e,t){return e.some((function(e){return e.isEqual(t)}))}var pg=function(){function e(t,n,r,i,a){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new yg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(mg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),yg=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return Xn(x(n.prototype),"data",this).call(this)}}]),n}(pg);function mg(e,t){return"string"==typeof t?hg(e,t):t instanceof Um?t._internalPath:t._delegate._internalPath}var gg=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),kg=function(e){w(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return m(n,[{key:"exists",value:function(){return Xn(x(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(mg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pg),bg=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xn(x(n.prototype),"data",this).call(this,e)}}]),n}(kg),wg=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new gg(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new bg(n._firestore,n._userDataWriter,r.key,r,new gg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _u(xu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new bg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new bg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:xg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function xg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ku()}}function _g(e,t){return e instanceof kg&&t instanceof kg?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof wg&&t instanceof wg&&e._firestore===t._firestore&&Tm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Sg(e){if(vl(e)&&0===e.explicitOrderBy.length)throw new _u(xu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Eg=m((function e(){p(this,e)}));function Tg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Ig=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=Ym(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new _u(xu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Fg(o,a);var s,l=[],c=g(o);try{for(c.s();!(s=c.n()).done;){var f=s.value;l.push(Vg(r,e,f))}}catch(d){c.e(d)}finally{c.f()}u={arrayValue:{values:l}}}else u=Vg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Fg(o,a),u=ag(n,"where",o,"in"===a||"not-in"===a);var h=Xs.create(i,a,u);return function(e,t){if(t.S()){var n=yl(e);if(null!==n&&!n.isEqual(t.field))throw new _u(xu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=pl(e);null!==r&&Ug(e,t.field,r)}var i=function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new _u(xu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _u(xu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new wm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new cl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Eg);var Cg=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new _u(xu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _u(xu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ol(t,n);return function(e,t){if(null===pl(e)){var n=yl(e);null!==n&&Ug(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new wm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new cl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Eg);var Ag=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return m(n,[{key:"_apply",value:function(e){return new wm(e.firestore,e.converter,bl(e._query,this.wc,this.mc))}}]),n}(Eg);var Dg=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return m(n,[{key:"_apply",value:function(e){var t=Mg(e,this.type,this.gc,this.yc);return new wm(e.firestore,e.converter,function(e,t){return new cl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Eg);function Ng(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dg("startAt",t,!0)}function Pg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Dg("startAfter",t,!1)}var Rg=function(e){w(n,e);var t=T(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return m(n,[{key:"_apply",value:function(e){var t=Mg(e,this.type,this.gc,this.yc);return new wm(e.firestore,e.converter,function(e,t){return new cl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Eg);function Lg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rg("endBefore",t,!1)}function Og(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Rg("endAt",t,!0)}function Mg(e,t,n,r){if(n[0]=Q(n[0]),n[0]instanceof pg)return function(e,t,n,r,i){if(!r)throw new _u(xu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=g(gl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(gs(t,r.key));else{var l=r.data.field(s.field);if(es(l))throw new _u(xu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=s.field.canonicalString();throw new _u(xu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(c,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new al(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ym(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new _u(xu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var l=i[s];if(o[s].field.isKeyField()){if("string"!=typeof l)throw new _u(xu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof l));if(!ml(e)&&-1!==l.indexOf("/"))throw new _u(xu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var c=e.path.child(Gu.fromString(l));if(!ss.isDocumentKey(c))throw new _u(xu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(c,"' is not because it contains an odd number of segments."));var f=new ss(c);u.push(gs(t,f))}else{var h=ag(n,r,l);u.push(h)}}return new al(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Vg(e,t,n){if("string"==typeof(n=Q(n))){if(""===n)throw new _u(xu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ml(t)&&-1!==n.indexOf("/"))throw new _u(xu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Gu.fromString(n));if(!ss.isDocumentKey(r))throw new _u(xu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return gs(e,new ss(r))}if(n instanceof bm)return gs(e,n._key);throw new _u(xu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(vm(n),"."))}function Fg(e,t){if(!Array.isArray(e)||0===e.length)throw new _u(xu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new _u(xu.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Ug(e,t,n){if(!n.isEqual(t))throw new _u(xu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Bg=function(){function e(){p(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ju(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Zu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ku()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return zu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new zm(Ju(e.latitude),Ju(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ts(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ns(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=$u(e);return new Uu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Gu.fromString(e);bu(pf(n));var r=new is(n.get(1),n.get(3)),i=new ss(n.popFirst(5));return r.isEqual(t)||yu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function jg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var zg=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Bm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bm(this.firestore,null,t)}}]),n}(Bg),qg=function(){function e(t,n){p(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ym(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Kg(e,this._firestore),i=jg(r.converter,t,n),a=Xm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Gl.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Kg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Q(t))||t instanceof Um?ig(this._dataReader,"WriteBatch.update",i._key,t,n,o):rg(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Gl.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Kg(e,this._firestore);return this._mutations=this._mutations.concat(new oc(t._key,Gl.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new _u(xu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Kg(e,t){if((e=Q(e)).firestore!==t)throw new _u(xu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Gg=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Bm(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bm(this.firestore,null,t)}}]),n}(Bg);function Hg(e){e=pm(e,bm);var t=pm(e.firestore,Dm),n=Nm(t),r=new Gg(t);return function(e,t){var n=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=f(d().mark((function e(t,n,r){var i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=wu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new _u(xu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=mp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,nm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new kg(t,r,e._key,n,new gg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Wg(e){e=pm(e,wm);var t=pm(e.firestore,Dm),n=Nm(t),r=new Gg(t);return function(e,t){var n=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=f(d().mark((function e(t,n,r){var i,a,o,u,s;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ud(t,n,!0);case 3:i=e.sent,a=new Vp(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=mp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,nm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new wg(t,r,e,n)}))}function Qg(e,t,n){e=pm(e,bm);var r=pm(e.firestore,Dm),i=jg(e.converter,t,n);return Jg(r,[Xm(Ym(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Gl.none())])}function Yg(e,t,n){e=pm(e,bm);for(var r=pm(e.firestore,Dm),i=Ym(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Jg(r,[("string"==typeof(t=Q(t))||t instanceof Um?ig(i,"updateDoc",e._key,t,n,o):rg(i,"updateDoc",e._key,t)).toMutation(e._key,Gl.exists(!0))])}function Xg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Q(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Cm(n[s])||(u=n[s],s++);var l,c,h,v={includeMetadataChanges:u.includeMetadataChanges};if(Cm(n[s])){var p=n[s];n[s]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[s+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[s+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof bm)c=pm(e.firestore,Dm),h=hl(e._key.path),l={next:function(t){n[s]&&n[s](Zg(c,e,t))},error:n[s+1],complete:n[s+2]};else{var y=pm(e,wm);c=pm(y.firestore,Dm),h=y._query;var m=new Gg(c);l={next:function(e){n[s]&&n[s](new wg(c,m,y,e))},error:n[s+1],complete:n[s+2]},Sg(e._query)}return function(e,t,n,r){var i=new zy(r),a=new Dp(t,i,n);return e.asyncQueue.enqueueAndForget(f(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_p,t.next=3,am(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(f(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ep,t.next=3,am(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Nm(c),h,v,l)}function $g(e,t){return function(e,t){var n=new zy(t);return e.asyncQueue.enqueueAndForget(f(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wu(e).Eu.add(t),t.next()},t.next=3,am(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(f(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){wu(e).Eu.delete(t)},t.next=3,am(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Nm(e=pm(e,Dm)),Cm(t)?t:{next:t})}function Jg(e,t){return function(e,t){var n=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function r(){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Wp,r.next=3,im(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Nm(e),t)}function Zg(e,t,n){var r=n.docs.get(t._key),i=new Gg(e);return new kg(e,i,t._key,r,new gg(n.hasPendingWrites,n.fromCache),t.converter)}var ek=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=Kg(e,this._firestore),i=new Gg(this._firestore);return Xn(x(n.prototype),"get",this).call(this,e).then((function(e){return new kg(t._firestore,i,r._key,e._document,new gg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){p(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ym(t)}return m(e,[{key:"get",value:function(e){var t=this,n=Kg(e,this._firestore),r=new zg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ku();var i=e[0];if(i.isFoundDocument())return new pg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pg(t._firestore,r,n._key,null,n.converter);throw ku()}))}},{key:"set",value:function(e,t,n){var r=Kg(e,this._firestore),i=jg(r.converter,t,n),a=Xm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Kg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Q(t))||t instanceof Um?ig(this._dataReader,"Transaction.update",i._key,t,n,o):rg(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Kg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function tk(e,t){return function(e,t){var n=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function r(){var i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Zy(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Gy(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Nm(e=pm(e,Dm)),(function(n){return t(new ek(e,n))}))}function nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eg("arrayUnion",t)}function rk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tg("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){hu=e}(Pe),Ee(new te("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Dm(i,new Cu(e.getProvider("auth-internal")),new Pu(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Fe(cu,"3.4.8",e),Fe(cu,"3.4.8","esm2017")}();function ik(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new _u("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ak(){if("undefined"===typeof Uint8Array)throw new _u("unimplemented","Uint8Arrays are not available in this environment.")}function ok(){if("undefined"==typeof atob)throw new _u("unimplemented","Blobs are unavailable in Firestore in this environment.")}var uk=function(){function e(t){p(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return ok(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return ak(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return ok(),new e(Bm.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return ak(),new e(Bm.fromUint8Array(t))}}]),e}();function sk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var lk=function(){function e(){p(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Fm(e=pm(e,Dm));var n=Nm(e),r=e._freezeSettings(),i=new By;return Rm(n,i,new Fy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Fm(e=pm(e,Dm));var t=Nm(e),n=e._freezeSettings(),r=new By;return Rm(t,r,new Uy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new _u(xu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Su;return e._queue.enqueueAndForgetEvenWhileRestricted(f(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=f(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Hf.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Hf.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(_d(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),ck=function(){function e(t,n,r){var i=this;p(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof is||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||mu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};km(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Lm(this._delegate)}},{key:"disableNetwork",value:function(){return Om(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&fm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Su;return e.asyncQueue.enqueueAndForget(f(d().mark((function n(){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=iy,n.next=3,im(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Nm(e=pm(e,Dm)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return $g(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new _u("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Sk(this,_m(this._delegate,e))}catch(t){throw yk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new pk(this,Sm(this._delegate,e))}catch(t){throw yk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new wk(this,function(e,t){if(e=pm(e,gm),cm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new _u(xu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wm(e,null,function(e){return new cl(Gu.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw yk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return tk(this._delegate,(function(n){return e(new hk(t,n))}))}},{key:"batch",value:function(){var e=this;return Nm(this._delegate),new dk(new qg(this._delegate,(function(t){return Jg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Mm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Vm(this._delegate,e).then((function(e){return e?new wk(t,e):null}))}}]),e}(),fk=function(e){w(n,e);var t=T(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new uk(new Bm(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return pk.forKey(t,this.firestore,null)}}]),n}(Bg);var hk=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new fk(t)}return m(e,[{key:"get",value:function(e){var t=this,n=Ek(e);return this._delegate.get(n).then((function(e){return new kk(t._firestore,new kg(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ek(e);return n?(ik("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ek(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ek(e);return this._delegate.delete(t),this}}]),e}(),dk=function(){function e(t){p(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=Ek(e);return n?(ik("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ek(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ek(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),vk=function(){function e(t,n,r){p(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new bg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new fk(t),n),i.set(n,a)),a}}]),e}();vk.INSTANCES=new WeakMap;var pk=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fk(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Sk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Sk(this.firestore,_m(this._delegate,e))}catch(t){throw yk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Q(e))instanceof bm&&Em(this._delegate,e)}},{key:"set",value:function(e,t){t=ik("DocumentReference.set",t);try{return t?Qg(this._delegate,e,t):Qg(this._delegate,e)}catch(n){throw yk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Yg(this._delegate,e):Yg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw yk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Jg(pm(e.firestore,Dm),[new oc(e._key,Gl.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=mk(n),a=gk(n,(function(t){return new kk(e.firestore,new kg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Xg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Hg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pm(e,bm);var t=pm(e.firestore,Dm);return um(Nm(t),e._key,{source:"server"}).then((function(n){return Zg(t,e,n)}))}(this._delegate):function(e){e=pm(e,bm);var t=pm(e.firestore,Dm);return um(Nm(t),e._key).then((function(n){return Zg(t,e,n)}))}(this._delegate),t.then((function(e){return new kk(n.firestore,new kg(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(vk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new _u("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bm(n._delegate,r,new ss(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new bm(n._delegate,r,t))}}]),e}();function yk(e,t,n){return e.message=e.message.replace(t,n),e}function mk(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!sk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function gk(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=sk(e[0])?e[0]:sk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var kk=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new pk(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return _g(this._delegate,e._delegate)}}]),e}(),bk=function(e){w(n,e);var t=T(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ku()}(void 0!==t),t}}]),n}(kk),wk=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new fk(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Tg(this._delegate,function(e,t,n){var r=t,i=mg("where",e);return new Ig(i,r,n)}(t,n,r)))}catch(i){throw yk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Tg(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mg("orderBy",e);return new Cg(n,t)}(t,n)))}catch(r){throw yk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Tg(this._delegate,function(e){return ym("limit",e),new Ag("limit",e,"F")}(t)))}catch(n){throw yk(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Tg(this._delegate,function(e){return ym("limitToLast",e),new Ag("limitToLast",e,"L")}(t)))}catch(n){throw yk(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Tg(this._delegate,Ng.apply(void 0,arguments)))}catch(t){throw yk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Tg(this._delegate,Pg.apply(void 0,arguments)))}catch(t){throw yk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Tg(this._delegate,Lg.apply(void 0,arguments)))}catch(t){throw yk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Tg(this._delegate,Og.apply(void 0,arguments)))}catch(t){throw yk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Tm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Wg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pm(e,wm);var t=pm(e.firestore,Dm),n=Nm(t),r=new Gg(t);return sm(n,e._query,{source:"server"}).then((function(n){return new wg(t,r,e,n)}))}(this._delegate):function(e){e=pm(e,wm);var t=pm(e.firestore,Dm),n=Nm(t),r=new Gg(t);return Sg(e._query),sm(n,e._query).then((function(n){return new wg(t,r,e,n)}))}(this._delegate),t.then((function(e){return new _k(n.firestore,new wg(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=mk(n),a=gk(n,(function(t){return new _k(e.firestore,new wg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Xg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(vk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),xk=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new bk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),_k=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new wk(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new bk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new xk(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new bk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return _g(this._delegate,e._delegate)}}]),e}(),Sk=function(e){w(n,e);var t=T(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new pk(this.firestore,e):null}},{key:"doc",value:function(e){try{return new pk(this.firestore,void 0===e?Sm(this._delegate):Sm(this._delegate,e))}catch(t){throw yk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=pm(e.firestore,Dm),r=Sm(e),i=jg(e.converter,t);return Jg(n,[Xm(Ym(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Gl.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new pk(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Em(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(vk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(wk);function Ek(e){return pm(e,bm)}var Tk,Ik=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(Um,n)}return m(e,[{key:"isEqual",value:function(e){return(e=Q(e))instanceof Um&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Wu.keyField().canonicalString())}}]),e}(),Ck=function(){function e(t){p(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Zm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new $m("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=nk.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=rk.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new ng("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Ak={Firestore:ck,GeoPoint:zm,Timestamp:Uu,Blob:uk,Transaction:hk,WriteBatch:dk,DocumentReference:pk,DocumentSnapshot:kk,Query:wk,QueryDocumentSnapshot:bk,QuerySnapshot:_k,CollectionReference:Sk,FieldPath:Ik,FieldValue:Ck,setLogLevel:function(e){!function(e){du.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new te("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Ak)))})(Tk=st,(function(e,t){return new ck(e,t,new lk)})),Tk.registerVersion("@firebase/firestore-compat","0.1.17");st.initializeApp({apiKey:"AIzaSyCJLsmONYiZN7zhZZM8hYSae2ZxA92Ezrs",authDomain:"msa-gallary.firebaseapp.com",projectId:"msa-gallary",storageBucket:"msa-gallary.appspot.com",messagingSenderId:"23398799879",appId:"1:23398799879:web:13948106c92fb716aa68a2",measurementId:"G-R1XP43JJBN"});var Dk=st.storage(),Nk=st.firestore(),Pk=st.firestore.FieldValue.serverTimestamp,Rk=function(e){var n=o((0,t.useState)(0),2),r=n[0],i=n[1],a=o((0,t.useState)(null),2),u=a[0],s=a[1],l=o((0,t.useState)(null),2),c=l[0],h=l[1];return(0,t.useEffect)((function(){var t=Dk.ref(e.name),n=Nk.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){s(e)}),f(d().mark((function e(){var r,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,i=Pk(),n.add({url:r,createdAt:i}),h(r);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:c,error:u}},Lk=function(e,t){return Lk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Lk(e,t)};function Ok(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Lk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Mk=function(){return Mk=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Mk.apply(this,arguments)};function Vk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;function Fk(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Uk(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Bk=function(e){return{isEnabled:function(t){return e.some((function(e){return!!t[e]}))}}},jk={measureLayout:Bk(["layout","layoutId","drag"]),animation:Bk(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:Bk(["exit"]),drag:Bk(["drag","dragControls"]),focus:Bk(["whileFocus"]),hover:Bk(["whileHover","onHoverStart","onHoverEnd"]),tap:Bk(["whileTap","onTap","onTapStart","onTapCancel"]),pan:Bk(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:Bk(["whileInView","onViewportEnter","onViewportLeave"])};var zk=(0,t.createContext)({strict:!1}),qk=Object.keys(jk),Kk=qk.length;var Gk=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),Hk=(0,t.createContext)({});var Wk=(0,t.createContext)(null),Qk="undefined"!==typeof document,Yk=Qk?t.useLayoutEffect:t.useEffect,Xk={current:null},$k=!1;function Jk(){return!$k&&function(){if($k=!0,Qk)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return Xk.current=e.matches};e.addListener(t),t()}else Xk.current=!1}(),Fk((0,t.useState)(Xk.current),1)[0]}function Zk(e,n,r,i){var a=(0,t.useContext)(zk),o=(0,t.useContext)(Hk).visualElement,u=(0,t.useContext)(Wk),s=function(){var e=Jk(),n=(0,t.useContext)(Gk).reducedMotion;return"never"!==n&&("always"===n||e)}(),l=(0,t.useRef)(void 0);i||(i=a.renderer),!l.current&&i&&(l.current=i(e,{visualState:n,parent:o,props:r,presenceId:null===u||void 0===u?void 0:u.id,blockInitialAnimation:!1===(null===u||void 0===u?void 0:u.initial),shouldReduceMotion:s}));var c=l.current;return Yk((function(){null===c||void 0===c||c.syncRender()})),(0,t.useEffect)((function(){var e;null===(e=null===c||void 0===c?void 0:c.animationState)||void 0===e||e.animateChanges()})),Yk((function(){return function(){return null===c||void 0===c?void 0:c.notifyUnmount()}}),[]),c}function eb(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function tb(e){return Array.isArray(e)}function nb(e){return"string"===typeof e||tb(e)}function rb(e,t,n,r,i){var a;return void 0===r&&(r={}),void 0===i&&(i={}),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=null===(a=e.variants)||void 0===a?void 0:a[t]),"function"===typeof t&&(t=t(null!==n&&void 0!==n?n:e.custom,r,i)),t}function ib(e,t,n){var r=e.getProps();return rb(r,t,null!==n&&void 0!==n?n:r.custom,function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.forEachValue((function(e,n){return t[n]=e.getVelocity()})),t}(e))}function ab(e){var t;return"function"===typeof(null===(t=e.animate)||void 0===t?void 0:t.start)||nb(e.initial)||nb(e.animate)||nb(e.whileHover)||nb(e.whileDrag)||nb(e.whileTap)||nb(e.whileFocus)||nb(e.exit)}function ob(e){return Boolean(ab(e)||e.variants)}function ub(e){var n=function(e,t){if(ab(e)){var n=e.initial,r=e.animate;return{initial:!1===n||nb(n)?n:void 0,animate:nb(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(Hk)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[sb(r),sb(i)])}function sb(e){return Array.isArray(e)?e.join(" "):e}function lb(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var cb=1/60*1e3,fb="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},hb="undefined"!==typeof window?function(e){return window.requestAnimationFrame(e)}:function(e){return setTimeout((function(){return e(fb())}),cb)};var db=!0,vb=!1,pb=!1,yb={delta:0,timestamp:0},mb=["read","update","preRender","render","postRender"],gb=mb.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=!1,o=new WeakSet,u={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,u=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===u.indexOf(e)&&(u.push(e),a&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(s){if(i)a=!0;else{i=!0;var l=[n,t];if(t=l[0],(n=l[1]).length=0,r=t.length)for(var c=0;c<r;c++){var f=t[c];f(s),o.has(f)&&(u.schedule(f),e())}i=!1,a&&(a=!1,u.process(s))}}};return u}((function(){return vb=!0})),e}),{}),kb=mb.reduce((function(e,t){var n=gb[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return vb||Sb(),n.schedule(e,t,r)},e}),{}),bb=mb.reduce((function(e,t){return e[t]=gb[t].cancel,e}),{}),wb=mb.reduce((function(e,t){return e[t]=function(){return gb[t].process(yb)},e}),{}),xb=function(e){return gb[e].process(yb)},_b=function e(t){vb=!1,yb.delta=db?cb:Math.max(Math.min(t-yb.timestamp,40),1),yb.timestamp=t,pb=!0,mb.forEach(xb),pb=!1,vb&&(db=!1,hb(e))},Sb=function(){vb=!0,db=!0,pb||hb(_b)},Eb=function(){return yb},Tb=kb,Ib=function(e,t,n){return-n*e+n*t+e};function Cb(e,t){return t?e*(1e3/t):0}function Ab(e,t){-1===e.indexOf(t)&&e.push(t)}function Db(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Nb=function(){function e(){this.subscriptions=[]}return e.prototype.add=function(e){var t=this;return Ab(this.subscriptions,e),function(){return Db(t.subscriptions,e)}},e.prototype.notify=function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}},e.prototype.getSize=function(){return this.subscriptions.length},e.prototype.clear=function(){this.subscriptions.length=0},e}(),Pb=function(){function e(e){var t,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Nb,this.velocityUpdateSubscribers=new Nb,this.renderSubscribers=new Nb,this.canTrackVelocity=!1,this.updateAndNotify=function(e,t){void 0===t&&(t=!0),n.prev=n.current,n.current=e;var r=Eb(),i=r.delta,a=r.timestamp;n.lastUpdated!==a&&(n.timeDelta=i,n.lastUpdated=a,Tb.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),t&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return Tb.postRender(n.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t)))}return e.prototype.onChange=function(e){return this.updateSubscribers.add(e)},e.prototype.clearListeners=function(){this.updateSubscribers.clear()},e.prototype.onRenderRequest=function(e){return e(this.get()),this.renderSubscribers.add(e)},e.prototype.attach=function(e){this.passiveEffect=e},e.prototype.set=function(e,t){void 0===t&&(t=!0),t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)},e.prototype.get=function(){return this.current},e.prototype.getPrevious=function(){return this.prev},e.prototype.getVelocity=function(){return this.canTrackVelocity?Cb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},e.prototype.start=function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.stopAnimation=e(n)})).then((function(){return t.clearAnimation()}))},e.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},e.prototype.isAnimating=function(){return!!this.stopAnimation},e.prototype.clearAnimation=function(){this.stopAnimation=null},e.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},e}();function Rb(e){return new Pb(e)}var Lb=function(e){return Boolean(null!==e&&"object"===typeof e&&e.getVelocity)};var Ob=function(e,t,n){return Math.min(Math.max(n,e),t)},Mb=.001;function Vb(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,u=e.velocity,s=void 0===u?0:u,l=e.mass,c=void 0===l?1:l,f=1-o;f=Ob(.05,1,f),i=Ob(.01,10,i/1e3),f<1?(t=function(e){var t=e*f,n=t*i,r=t-s,a=Fb(e,f),o=Math.exp(-n);return Mb-r/a*o},n=function(e){var n=e*f*i,r=n*s+s,a=Math.pow(f,2)*Math.pow(e,2)*i,o=Math.exp(-n),u=Fb(Math.pow(e,2),f);return(-t(e)+Mb>0?-1:1)*((r-a)*o)/u}):(t=function(e){return Math.exp(-e*i)*((e-s)*i+1)-.001},n=function(e){return Math.exp(-e*i)*(i*i*(s-e))});var h=function(e,t,n){for(var r=n,i=1;i<12;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i*=1e3,isNaN(h))return{stiffness:100,damping:10,duration:i};var d=Math.pow(h,2)*c;return{stiffness:d,damping:2*f*Math.sqrt(c*d),duration:i}}function Fb(e,t){return e*Math.sqrt(1-t*t)}var Ub=["duration","bounce"],Bb=["stiffness","damping","mass"];function jb(e,t){return t.some((function(t){return void 0!==e[t]}))}function zb(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,a=e.restSpeed,o=void 0===a?2:a,u=e.restDelta,s=Vk(e,["from","to","restSpeed","restDelta"]),l={done:!1,value:n},c=function(e){var t=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!jb(e,Bb)&&jb(e,Ub)){var n=Vb(e);(t=Object.assign(Object.assign(Object.assign({},t),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(s),f=c.stiffness,h=c.damping,d=c.mass,v=c.velocity,p=c.duration,y=c.isResolvedFromDuration,m=qb,g=qb;function k(){var e=v?-v/1e3:0,t=i-n,r=h/(2*Math.sqrt(f*d)),a=Math.sqrt(f/d)/1e3;if(void 0===u&&(u=Math.min(Math.abs(i-n)/100,.4)),r<1){var o=Fb(a,r);m=function(n){var u=Math.exp(-r*a*n);return i-u*((e+r*a*t)/o*Math.sin(o*n)+t*Math.cos(o*n))},g=function(n){var i=Math.exp(-r*a*n);return r*a*i*(Math.sin(o*n)*(e+r*a*t)/o+t*Math.cos(o*n))-i*(Math.cos(o*n)*(e+r*a*t)-o*t*Math.sin(o*n))}}else if(1===r)m=function(n){return i-Math.exp(-a*n)*(t+(e+a*t)*n)};else{var s=a*Math.sqrt(r*r-1);m=function(n){var o=Math.exp(-r*a*n),u=Math.min(s*n,300);return i-o*((e+r*a*t)*Math.sinh(u)+s*t*Math.cosh(u))/s}}}return k(),{next:function(e){var t=m(e);if(y)l.done=e>=p;else{var n=1e3*g(e),r=Math.abs(n)<=o,a=Math.abs(i-t)<=u;l.done=r&&a}return l.value=l.done?i:t,l},flipTarget:function(){v=-v;var e=[i,n];n=e[0],i=e[1],k()}}}zb.needsInterpolation=function(e,t){return"string"===typeof e||"string"===typeof t};var qb=function(e){return 0},Kb=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},Gb=function(e,t){return function(n){return Math.max(Math.min(n,t),e)}},Hb=function(e){return e%1?Number(e.toFixed(5)):e},Wb=/(-)?([\d]*\.?[\d])+/g,Qb=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,Yb=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Xb(e){return"string"===typeof e}var $b={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Jb=Object.assign(Object.assign({},$b),{transform:Gb(0,1)}),Zb=Object.assign(Object.assign({},$b),{default:1}),ew=function(e,t){return function(n){return Boolean(Xb(n)&&Yb.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},tw=function(e,t,n){return function(r){var i;if(!Xb(r))return r;var a=o(r.match(Wb),4),u=a[0],s=a[1],l=a[2],c=a[3];return v(i={},e,parseFloat(u)),v(i,t,parseFloat(s)),v(i,n,parseFloat(l)),v(i,"alpha",void 0!==c?parseFloat(c):1),i}},nw=Gb(0,255),rw=Object.assign(Object.assign({},$b),{transform:function(e){return Math.round(nw(e))}}),iw={test:ew("rgb","red"),parse:tw("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+rw.transform(t)+", "+rw.transform(n)+", "+rw.transform(r)+", "+Hb(Jb.transform(a))+")"}};var aw={test:ew("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substr(1,2),n=e.substr(3,2),r=e.substr(5,2),i=e.substr(7,2)):(t=e.substr(1,1),n=e.substr(2,1),r=e.substr(3,1),i=e.substr(4,1),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:iw.transform},ow=function(e){return{test:function(t){return Xb(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},uw=ow("deg"),sw=ow("%"),lw=ow("px"),cw=ow("vh"),fw=ow("vw"),hw=Object.assign(Object.assign({},sw),{parse:function(e){return sw.parse(e)/100},transform:function(e){return sw.transform(100*e)}}),dw={test:ew("hsl","hue"),parse:tw("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+sw.transform(Hb(n))+", "+sw.transform(Hb(r))+", "+Hb(Jb.transform(a))+")"}};function vw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function pw(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var a=0,o=0,u=0;if(n/=100){var s=r<.5?r*(1+n):r+n-r*n,l=2*r-s;a=vw(l,s,t+1/3),o=vw(l,s,t),u=vw(l,s,t-1/3)}else a=o=u=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*u),alpha:i}}var yw=function(e,t,n){var r=e*e,i=t*t;return Math.sqrt(Math.max(0,n*(i-r)+r))},mw=[aw,iw,dw],gw=function(e){return mw.find((function(t){return t.test(e)}))},kw=function(e){return"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")},bw=function(e,t){var n=gw(e),r=gw(t);kw(e),kw(t);var i=n.parse(e),a=r.parse(t);n===dw&&(i=pw(i),n=iw),r===dw&&(a=pw(a),r=iw);var o=Object.assign({},i);return function(e){for(var t in o)"alpha"!==t&&(o[t]=yw(i[t],a[t],e));return o.alpha=Ib(i.alpha,a.alpha,e),n.transform(o)}},ww={test:function(e){return iw.test(e)||aw.test(e)||dw.test(e)},parse:function(e){return iw.test(e)?iw.parse(e):dw.test(e)?dw.parse(e):aw.parse(e)},transform:function(e){return Xb(e)?e:e.hasOwnProperty("red")?iw.transform(e):dw.transform(e)}},xw="${c}",_w="${n}";function Sw(e){"number"===typeof e&&(e="".concat(e));var t=[],n=0,r=e.match(Qb);r&&(n=r.length,e=e.replace(Qb,xw),t.push.apply(t,ee(r.map(ww.parse))));var i=e.match(Wb);return i&&(e=e.replace(Wb,_w),t.push.apply(t,ee(i.map($b.parse)))),{values:t,numColors:n,tokenised:e}}function Ew(e){return Sw(e).values}function Tw(e){var t=Sw(e),n=t.values,r=t.numColors,i=t.tokenised,a=n.length;return function(e){for(var t=i,n=0;n<a;n++)t=t.replace(n<r?xw:_w,n<r?ww.transform(e[n]):Hb(e[n]));return t}}var Iw=function(e){return"number"===typeof e?0:e};var Cw={test:function(e){var t,n,r,i;return isNaN(e)&&Xb(e)&&(null!==(n=null===(t=e.match(Wb))||void 0===t?void 0:t.length)&&void 0!==n?n:0)+(null!==(i=null===(r=e.match(Qb))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:Ew,createTransformer:Tw,getAnimatableNone:function(e){var t=Ew(e);return Tw(e)(t.map(Iw))}},Aw=function(e){return"number"===typeof e},Dw=function(e,t){return function(n){return t(e(n))}},Nw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Dw)};function Pw(e,t){return Aw(e)?function(n){return Ib(e,t,n)}:ww.test(e)?bw(e,t):Mw(e,t)}var Rw=function(e,t){var n=ee(e),r=n.length,i=e.map((function(e,n){return Pw(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},Lw=function(e,t){var n=Object.assign(Object.assign({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=Pw(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}};function Ow(e){for(var t=Cw.parse(e),n=t.length,r=0,i=0,a=0,o=0;o<n;o++)r||"number"===typeof t[o]?r++:void 0!==t[o].hue?a++:i++;return{parsed:t,numNumbers:r,numRGB:i,numHSL:a}}var Mw=function(e,t){var n=Cw.createTransformer(t),r=Ow(e),i=Ow(t);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&r.numNumbers>=i.numNumbers?Nw(Rw(r.parsed,i.parsed),n):("Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),function(n){return"".concat(n>0?t:e)})},Vw=function(e,t){return function(n){return Ib(e,t,n)}};function Fw(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?Vw:"string"===typeof e?ww.test(e)?bw:Mw:Array.isArray(e)?Rw:"object"===typeof e?Lw:void 0}(e[0]),a=e.length-1,o=0;o<a;o++){var u=i(e[o],e[o+1]);if(t){var s=Array.isArray(t)?t[o]:t;u=Nw(s,u)}r.push(u)}return r}function Uw(e,t){var n=o(e,2),r=n[0],i=n[1],a=o(t,1)[0];return function(e){return a(Kb(r,i,e))}}function Bw(e,t){var n=e.length,r=n-1;return function(i){var a=0,o=!1;if(i<=e[0]?o=!0:i>=e[r]&&(a=r-1,o=!0),!o){for(var u=1;u<n&&!(e[u]>i||u===r);u++);a=u-1}var s=Kb(e[a],e[a+1],i);return t[a](s)}}function jw(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,u=e.length;t.length,!a||!Array.isArray(a)||a.length,e[0]>e[u-1]&&(e=[].concat(e),t=[].concat(t),e.reverse(),t.reverse());var s=Fw(t,a,o),l=2===u?Uw(e,s):Bw(e,s);return i?function(t){return l(Ob(e[0],e[u-1],t))}:l}var zw,qw=function(e){return function(t){return 1-e(1-t)}},Kw=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},Gw=function(e){return function(t){return t*t*((e+1)*t-e)}},Hw=function(e){return e},Ww=(zw=2,function(e){return Math.pow(e,zw)}),Qw=qw(Ww),Yw=Kw(Ww),Xw=function(e){return 1-Math.sin(Math.acos(e))},$w=qw(Xw),Jw=Kw($w),Zw=Gw(1.525),ex=qw(Zw),tx=Kw(Zw),nx=function(e){var t=Gw(e);return function(e){return(e*=2)<1?.5*t(e):.5*(2-Math.pow(2,-10*(e-1)))}}(1.525),rx=function(e){if(1===e||0===e)return e;var t=e*e;return e<.36363636363636365?7.5625*t:e<.7272727272727273?9.075*t-9.9*e+3.4:e<.9?12.066481994459833*t-19.63545706371191*e+8.898060941828255:10.8*e*e-20.52*e+10.72},ix=qw(rx);function ax(e,t){return e.map((function(){return t||Yw})).splice(0,e.length-1)}function ox(e){var t=e.from,n=void 0===t?0:t,r=e.to,i=void 0===r?1:r,a=e.ease,o=e.offset,u=e.duration,s=void 0===u?300:u,l={done:!1,value:n},c=Array.isArray(i)?i:[n,i],f=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===c.length?o:function(e){var t=e.length;return e.map((function(e,n){return 0!==n?n/(t-1):0}))}(c),s);function h(){return jw(f,c,{ease:Array.isArray(a)?a:ax(c,a)})}var d=h();return{next:function(e){return l.value=d(e),l.done=e>=s,l},flipTarget:function(){c.reverse(),d=h()}}}var ux={keyframes:ox,spring:zb,decay:function(e){var t=e.velocity,n=void 0===t?0:t,r=e.from,i=void 0===r?0:r,a=e.power,o=void 0===a?.8:a,u=e.timeConstant,s=void 0===u?350:u,l=e.restDelta,c=void 0===l?.5:l,f=e.modifyTarget,h={done:!1,value:i},d=o*n,v=i+d,p=void 0===f?v:f(v);return p!==v&&(d=p-i),{next:function(e){var t=-d*Math.exp(-e/s);return h.done=!(t>c||t<-c),h.value=h.done?p:p+t,h},flipTarget:function(){}}}};function sx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-t-n}var lx=function(e){var t=function(t){var n=t.delta;return e(n)};return{start:function(){return Tb.update(t,!0)},stop:function(){return bb.update(t)}}};function cx(e){var t,n,r,i,a,o=e.from,u=e.autoplay,s=void 0===u||u,l=e.driver,c=void 0===l?lx:l,f=e.elapsed,h=void 0===f?0:f,d=e.repeat,v=void 0===d?0:d,p=e.repeatType,y=void 0===p?"loop":p,m=e.repeatDelay,g=void 0===m?0:m,k=e.onPlay,b=e.onStop,w=e.onComplete,x=e.onRepeat,_=e.onUpdate,S=Vk(e,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),E=S.to,T=0,I=S.duration,C=!1,A=!0,D=function(e){if(Array.isArray(e.to))return ox;if(ux[e.type])return ux[e.type];var t=new Set(Object.keys(e));return t.has("ease")||t.has("duration")&&!t.has("dampingRatio")?ox:t.has("dampingRatio")||t.has("stiffness")||t.has("mass")||t.has("damping")||t.has("restSpeed")||t.has("restDelta")?zb:ox}(S);(null===(n=(t=D).needsInterpolation)||void 0===n?void 0:n.call(t,o,E))&&(a=jw([0,100],[o,E],{clamp:!1}),o=0,E=100);var N=D(Object.assign(Object.assign({},S),{from:o,to:E}));function P(){T++,"reverse"===y?h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?t-(e-t)+n:sx(t+-e,t,n)}(h,I,g,A=T%2===0):(h=sx(h,I,g),"mirror"===y&&N.flipTarget()),C=!1,x&&x()}function R(e){if(A||(e=-e),h+=e,!C){var t=N.next(Math.max(0,h));i=t.value,a&&(i=a(i)),C=A?t.done:h<=0}null===_||void 0===_||_(i),C&&(0===T&&(null!==I&&void 0!==I||(I=h)),T<v?function(e,t,n,r){return r?e>=t+n:e<=-n}(h,I,g,A)&&P():(r.stop(),w&&w()))}return s&&(null===k||void 0===k||k(),(r=c(R)).start()),{stop:function(){null===b||void 0===b||b(),r.stop()}}}var fx=function(e){return 1e3*e},hx=function(e,t){return 1-3*t+3*e},dx=function(e,t){return 3*t-6*e},vx=function(e){return 3*e},px=function(e,t,n){return((hx(t,n)*e+dx(t,n))*e+vx(t))*e},yx=function(e,t,n){return 3*hx(t,n)*e*e+2*dx(t,n)*e+vx(t)};var mx=.1;function gx(e,t,n,r){if(e===t&&n===r)return Hw;for(var i=new Float32Array(11),a=0;a<11;++a)i[a]=px(a*mx,e,n);function o(t){for(var r=0,a=1;10!==a&&i[a]<=t;++a)r+=mx;--a;var o=r+(t-i[a])/(i[a+1]-i[a])*mx,u=yx(o,e,n);return u>=.001?function(e,t,n,r){for(var i=0;i<8;++i){var a=yx(t,n,r);if(0===a)return t;t-=(px(t,n,r)-e)/a}return t}(t,o,e,n):0===u?o:function(e,t,n,r,i){var a,o,u=0;do{(a=px(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>1e-7&&++u<10);return o}(t,r,r+mx,e,n)}return function(e){return 0===e||1===e?e:px(o(e),t,r)}}var kx={linear:Hw,easeIn:Ww,easeInOut:Yw,easeOut:Qw,circIn:Xw,circInOut:Jw,circOut:$w,backIn:Zw,backInOut:tx,backOut:ex,anticipate:nx,bounceIn:ix,bounceInOut:function(e){return e<.5?.5*(1-rx(1-2*e)):.5*rx(2*e-1)+.5},bounceOut:rx},bx=function(e){if(Array.isArray(e)){e.length;var t=Fk(e,4);return gx(t[0],t[1],t[2],t[3])}return"string"===typeof e?("Invalid easing type '".concat(e,"'"),kx[e]):e},wx=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Cw.test(t)||t.startsWith("url(")))},xx=function(e){return Array.isArray(e)},_x=function(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},Sx=function(e){return{type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}},Ex=function(){return{type:"keyframes",ease:"linear",duration:.3}},Tx=function(e){return{type:"keyframes",duration:.8,values:e}},Ix={x:_x,y:_x,z:_x,rotate:_x,rotateX:_x,rotateY:_x,rotateZ:_x,scaleX:Sx,scaleY:Sx,scale:Sx,opacity:Ex,backgroundColor:Ex,color:Ex,default:Sx},Cx=new Set(["brightness","contrast","saturate","opacity"]);function Ax(e){var t=o(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=o(r.match(Wb)||[],1)[0];if(!i)return e;var a=r.replace(i,""),u=Cx.has(n)?1:0;return i!==r&&(u*=100),n+"("+u+a+")"}var Dx=/([a-z-]*)\(.*?\)/g,Nx=Object.assign(Object.assign({},Cw),{getAnimatableNone:function(e){var t=e.match(Dx);return t?t.map(Ax).join(" "):e}}),Px=Mk(Mk({},$b),{transform:Math.round}),Rx={borderWidth:lw,borderTopWidth:lw,borderRightWidth:lw,borderBottomWidth:lw,borderLeftWidth:lw,borderRadius:lw,radius:lw,borderTopLeftRadius:lw,borderTopRightRadius:lw,borderBottomRightRadius:lw,borderBottomLeftRadius:lw,width:lw,maxWidth:lw,height:lw,maxHeight:lw,size:lw,top:lw,right:lw,bottom:lw,left:lw,padding:lw,paddingTop:lw,paddingRight:lw,paddingBottom:lw,paddingLeft:lw,margin:lw,marginTop:lw,marginRight:lw,marginBottom:lw,marginLeft:lw,rotate:uw,rotateX:uw,rotateY:uw,rotateZ:uw,scale:Zb,scaleX:Zb,scaleY:Zb,scaleZ:Zb,skew:uw,skewX:uw,skewY:uw,distance:lw,translateX:lw,translateY:lw,translateZ:lw,x:lw,y:lw,z:lw,perspective:lw,transformPerspective:lw,opacity:Jb,originX:hw,originY:hw,originZ:lw,zIndex:Px,fillOpacity:Jb,strokeOpacity:Jb,numOctaves:Px},Lx=Mk(Mk({},Rx),{color:ww,backgroundColor:ww,outlineColor:ww,fill:ww,stroke:ww,borderColor:ww,borderTopColor:ww,borderRightColor:ww,borderBottomColor:ww,borderLeftColor:ww,filter:Nx,WebkitFilter:Nx}),Ox=function(e){return Lx[e]};function Mx(e,t){var n,r=Ox(e);return r!==Nx&&(r=Cw),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,t)}var Vx=!1,Fx=function(e){return xx(e)?e[e.length-1]||0:e};function Ux(e){var t=e.ease,n=e.times,r=e.yoyo,i=e.flip,a=e.loop,o=Vk(e,["ease","times","yoyo","flip","loop"]),u=Mk({},o);return n&&(u.offset=n),o.duration&&(u.duration=fx(o.duration)),o.repeatDelay&&(u.repeatDelay=fx(o.repeatDelay)),t&&(u.ease=function(e){return Array.isArray(e)&&"number"!==typeof e[0]}(t)?t.map(bx):bx(t)),"tween"===o.type&&(u.type="keyframes"),(r||a||i)&&(!0,r?u.repeatType="reverse":a?u.repeatType="loop":i&&(u.repeatType="mirror"),u.repeat=a||r||i||o.repeat),"spring"!==o.type&&(u.type="keyframes"),u}function Bx(e,t,n){var r;return Array.isArray(t.to)&&(null!==(r=e.duration)&&void 0!==r||(e.duration=.8)),function(e){Array.isArray(e.to)&&null===e.to[0]&&(e.to=Uk([],Fk(e.to),!1),e.to[0]=e.from)}(t),function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from;var t=Vk(e,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(t).length}(e)||(e=Mk(Mk({},e),function(e,t){var n;return n=xx(t)?Tx:Ix[e]||Ix.default,Mk({to:t},n(t))}(n,t.to))),Mk(Mk({},t),Ux(e))}function jx(e,t,n,r,i){var a,o=Kx(r,e),u=null!==(a=o.from)&&void 0!==a?a:t.get(),s=wx(e,n);"none"===u&&s&&"string"===typeof n?u=Mx(e,n):zx(u)&&"string"===typeof n?u=qx(n):!Array.isArray(n)&&zx(n)&&"string"===typeof u&&(n=qx(u));var l=wx(e,u);return"You are trying to animate ".concat(e,' from "').concat(u,'" to "').concat(n,'". ').concat(u," is not an animatable value - to enable this animation set ").concat(u," to a value animatable to ").concat(n," via the `style` property."),l&&s&&!1!==o.type?function(){var r={from:u,to:n,velocity:t.getVelocity(),onComplete:i,onUpdate:function(e){return t.set(e)}};return"inertia"===o.type||"decay"===o.type?function(e){var t,n=e.from,r=void 0===n?0:n,i=e.velocity,a=void 0===i?0:i,o=e.min,u=e.max,s=e.power,l=void 0===s?.8:s,c=e.timeConstant,f=void 0===c?750:c,h=e.bounceStiffness,d=void 0===h?500:h,v=e.bounceDamping,p=void 0===v?10:v,y=e.restDelta,m=void 0===y?1:y,g=e.modifyTarget,k=e.driver,b=e.onUpdate,w=e.onComplete,x=e.onStop;function _(e){return void 0!==o&&e<o||void 0!==u&&e>u}function S(e){return void 0===o?u:void 0===u||Math.abs(o-e)<Math.abs(u-e)?o:u}function E(e){null===t||void 0===t||t.stop(),t=cx(Object.assign(Object.assign({},e),{driver:k,onUpdate:function(t){var n;null===b||void 0===b||b(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:w,onStop:x}))}function T(e){E(Object.assign({type:"spring",stiffness:d,damping:p,restDelta:m},e))}if(_(r))T({from:r,velocity:a,to:S(r)});else{var I=l*a+r;"undefined"!==typeof g&&(I=g(I));var C,A,D=S(I),N=D===o?-1:1;E({type:"decay",from:r,velocity:a,timeConstant:f,power:l,restDelta:m,modifyTarget:g,onUpdate:_(I)?function(e){C=A,A=e,a=Cb(e-C,Eb().delta),(1===N&&e>D||-1===N&&e<D)&&T({from:e,to:D,velocity:a})}:void 0})}return{stop:function(){return null===t||void 0===t?void 0:t.stop()}}}(Mk(Mk({},r),o)):cx(Mk(Mk({},Bx(o,r,e)),{onUpdate:function(e){var t;r.onUpdate(e),null===(t=o.onUpdate)||void 0===t||t.call(o,e)},onComplete:function(){var e;r.onComplete(),null===(e=o.onComplete)||void 0===e||e.call(o)}}))}:function(){var e,r,a=Fx(n);return t.set(a),i(),null===(e=null===o||void 0===o?void 0:o.onUpdate)||void 0===e||e.call(o,a),null===(r=null===o||void 0===o?void 0:o.onComplete)||void 0===r||r.call(o),{stop:function(){}}}}function zx(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function qx(e){return"number"===typeof e?0:Mx("",e)}function Kx(e,t){return e[t]||e.default||e}function Gx(e,t,n,r){return void 0===r&&(r={}),Vx&&(r={type:!1}),t.start((function(i){var a,o,u=jx(e,t,n,r,i),s=function(e,t){var n,r;return null!==(r=null!==(n=(Kx(e,t)||{}).delay)&&void 0!==n?n:e.delay)&&void 0!==r?r:0}(r,e),l=function(){return o=u()};return s?a=window.setTimeout(l,fx(s)):l(),function(){clearTimeout(a),null===o||void 0===o||o.stop()}}))}var Hx=["TopLeft","TopRight","BottomLeft","BottomRight"],Wx=Hx.length,Qx=function(e){return"string"===typeof e?parseFloat(e):e},Yx=function(e){return"number"===typeof e||lw.test(e)};function Xx(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:e.borderRadius}var $x=Zx(0,.5,$w),Jx=Zx(.5,.95,Hw);function Zx(e,t,n){return function(r){return r<e?0:r>t?1:n(Kb(e,t,r))}}function e_(e,t){e.min=t.min,e.max=t.max}function t_(e,t){e_(e.x,t.x),e_(e.y,t.y)}function n_(e){return void 0===e||1===e}function r_(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!n_(t)||!n_(n)||!n_(r)}function i_(e){return r_(e)||a_(e.x)||a_(e.y)||e.z||e.rotate||e.rotateX||e.rotateY}function a_(e){return e&&"0%"!==e}function o_(e,t,n){return n+t*(e-n)}function u_(e,t,n,r,i){return void 0!==i&&(e=o_(e,i,r)),o_(e,n,r)+t}function s_(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),e.min=u_(e.min,t,n,r,i),e.max=u_(e.max,t,n,r,i)}function l_(e,t){var n=t.x,r=t.y;s_(e.x,n.translate,n.scale,n.originPoint),s_(e.y,r.translate,r.scale,r.originPoint)}function c_(e,t){e.min=e.min+t,e.max=e.max+t}function f_(e,t,n){var r=Fk(n,3),i=r[0],a=r[1],o=r[2],u=void 0!==t[o]?t[o]:.5,s=Ib(e.min,e.max,u);s_(e,t[i],t[a],s,t.scale)}var h_=["x","scaleX","originX"],d_=["y","scaleY","originY"];function v_(e,t){f_(e.x,t,h_),f_(e.y,t,d_)}var p_=function(e){return e.hasOwnProperty("x")&&e.hasOwnProperty("y")},y_=function(e){return p_(e)&&e.hasOwnProperty("z")},m_=function(e,t){return Math.abs(e-t)};function g_(e,t){if(Aw(e)&&Aw(t))return m_(e,t);if(p_(e)&&p_(t)){var n=m_(e.x,t.x),r=m_(e.y,t.y),i=y_(e)&&y_(t)?m_(e.z,t.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}function k_(e){return e.max-e.min}function b_(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=.01),g_(e,t)<n}function w_(e,t,n,r){void 0===r&&(r=.5),e.origin=r,e.originPoint=Ib(t.min,t.max,e.origin),e.scale=k_(n)/k_(t),(b_(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Ib(n.min,n.max,e.origin)-e.originPoint,(b_(e.translate)||isNaN(e.translate))&&(e.translate=0)}function x_(e,t,n,r){w_(e.x,t.x,n.x,null===r||void 0===r?void 0:r.originX),w_(e.y,t.y,n.y,null===r||void 0===r?void 0:r.originY)}function __(e,t,n){e.min=n.min+t.min,e.max=e.min+k_(t)}function S_(e,t,n){e.min=t.min-n.min,e.max=e.min+k_(t)}function E_(e,t,n){S_(e.x,t.x,n.x),S_(e.y,t.y,n.y)}function T_(e,t,n,r,i){return e=o_(e-=t,1/n,r),void 0!==i&&(e=o_(e,1/i,r)),e}function I_(e,t,n,r,i){var a=Fk(n,3),o=a[0],u=a[1],s=a[2];!function(e,t,n,r,i,a,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===a&&(a=e),void 0===o&&(o=e),sw.test(t)&&(t=parseFloat(t),t=Ib(o.min,o.max,t/100)-o.min),"number"===typeof t){var u=Ib(a.min,a.max,r);e===a&&(u-=t),e.min=T_(e.min,t,n,u,i),e.max=T_(e.max,t,n,u,i)}}(e,t[o],t[u],t[s],t.scale,r,i)}var C_=["x","scaleX","originX"],A_=["y","scaleY","originY"];function D_(e,t,n,r){I_(e.x,t,C_,null===n||void 0===n?void 0:n.x,null===r||void 0===r?void 0:r.x),I_(e.y,t,A_,null===n||void 0===n?void 0:n.y,null===r||void 0===r?void 0:r.y)}function N_(e){return 0===e.translate&&1===e.scale}function P_(e){return N_(e.x)&&N_(e.y)}function R_(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}var L_=function(){function e(){this.members=[]}return e.prototype.add=function(e){Ab(this.members,e),e.scheduleRender()},e.prototype.remove=function(e){if(Db(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}},e.prototype.relegate=function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)},e.prototype.promote=function(e,t){var n,r=this.lead;e!==r&&(this.prevLead=r,this.lead=e,e.show(),r&&(r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues,e.snapshot.isShared=!0),(null===(n=e.root)||void 0===n?void 0:n.isUpdating)&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&r.hide()))},e.prototype.exitAnimationComplete=function(){this.members.forEach((function(e){var t,n,r,i,a;null===(n=(t=e.options).onExitComplete)||void 0===n||n.call(t),null===(a=null===(r=e.resumingFrom)||void 0===r?void 0:(i=r.options).onExitComplete)||void 0===a||a.call(i)}))},e.prototype.scheduleRender=function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))},e.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},e}(),O_={};function M_(e,t,n){var r=e.x.translate/t.x,i=e.y.translate/t.y,a="translate3d(".concat(r,"px, ").concat(i,"px, 0) ");if(n){var o=n.rotate,u=n.rotateX,s=n.rotateY;o&&(a+="rotate(".concat(o,"deg) ")),u&&(a+="rotateX(".concat(u,"deg) ")),s&&(a+="rotateY(".concat(s,"deg) "))}return"translate3d(0px, 0px, 0) scale(1, 1)"===(a+="scale(".concat(e.x.scale,", ").concat(e.y.scale,")"))?"none":a}function V_(e){return[e("x"),e("y")]}var F_=["","X","Y","Z"],U_=["transformPerspective","x","y","z"];function B_(e,t){return U_.indexOf(e)-U_.indexOf(t)}["translate","scale","rotate","skew"].forEach((function(e){return F_.forEach((function(t){return U_.push(e+t)}))}));var j_=new Set(U_);function z_(e){return j_.has(e)}var q_=new Set(["originX","originY","originZ"]);function K_(e){return q_.has(e)}var G_=function(e,t){return e.depth-t.depth},H_=function(){function e(){this.children=[],this.isDirty=!1}return e.prototype.add=function(e){Ab(this.children,e),this.isDirty=!0},e.prototype.remove=function(e){Db(this.children,e),this.isDirty=!0},e.prototype.forEach=function(e){this.isDirty&&this.children.sort(G_),this.isDirty=!1,this.children.forEach(e)},e}();function W_(e){var t=Lb(e)?e.get():e;return function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)}(t)?t.toValue():t}var Q_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Y_(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.resetTransform;return function(){function e(e,t,r){var i=this;void 0===t&&(t={}),void 0===r&&(r=null===n||void 0===n?void 0:n()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){i.isUpdating&&(i.isUpdating=!1,i.clearAllSnapshots())},this.updateProjection=function(){i.nodes.forEach(nS),i.nodes.forEach(rS)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=e,this.latestValues=t,this.root=r?r.root||r:this,this.path=r?Uk(Uk([],Fk(r.path),!1),[r],!1):[],this.parent=r,this.depth=r?r.depth+1:0,e&&this.root.registerPotentialNode(e,this);for(var a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new H_)}return e.prototype.addEventListener=function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Nb),this.eventHandlers.get(e).add(t)},e.prototype.notifyListeners=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.eventHandlers.get(e);null===r||void 0===r||r.notify.apply(r,Uk([],Fk(t),!1))},e.prototype.hasListeners=function(e){return this.eventHandlers.has(e)},e.prototype.registerPotentialNode=function(e,t){this.potentialNodes.set(e,t)},e.prototype.mount=function(e,n){var r,i=this;if(void 0===n&&(n=!1),!this.instance){this.isSVG=e instanceof SVGElement&&"svg"!==e.tagName,this.instance=e;var a=this.options,o=a.layoutId,u=a.layout,s=a.visualElement;if(s&&!s.getInstance()&&s.mount(e),this.root.nodes.add(this),null===(r=this.parent)||void 0===r||r.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),n&&(u||o)&&(this.isLayoutDirty=!0),t){var l,c=function(){return i.root.updateBlockedByResize=!1};t(e,(function(){i.root.updateBlockedByResize=!0,clearTimeout(l),l=window.setTimeout(c,250),Q_.hasAnimatedSinceResize&&(Q_.hasAnimatedSinceResize=!1,i.nodes.forEach(tS))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&s&&(o||u)&&this.addEventListener("didUpdate",(function(e){var t,n,r,a,o,u=e.delta,l=e.hasLayoutChanged,c=e.hasRelativeTargetChanged,f=e.layout;if(i.isTreeAnimationBlocked())return i.target=void 0,void(i.relativeTarget=void 0);var h=null!==(n=null!==(t=i.options.transition)&&void 0!==t?t:s.getDefaultTransition())&&void 0!==n?n:lS,d=s.getProps(),v=d.onLayoutAnimationStart,p=d.onLayoutAnimationComplete,y=!i.targetLayout||!R_(i.targetLayout,f)||c,m=!l&&c;if((null===(r=i.resumeFrom)||void 0===r?void 0:r.instance)||m||l&&(y||!i.currentAnimation)){i.resumeFrom&&(i.resumingFrom=i.resumeFrom,i.resumingFrom.resumingFrom=void 0),i.setAnimationOrigin(u,m);var g=Mk(Mk({},Kx(h,"layout")),{onPlay:v,onComplete:p});s.shouldReduceMotion&&(g.delay=0,g.type=!1),i.startAnimation(g)}else l||0!==i.animationProgress||i.finishAnimation(),i.isLead()&&(null===(o=(a=i.options).onExitComplete)||void 0===o||o.call(a));i.targetLayout=f}))}},e.prototype.unmount=function(){var e,t;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(e=this.getStack())||void 0===e||e.remove(this),null===(t=this.parent)||void 0===t||t.children.delete(this),this.instance=void 0,bb.preRender(this.updateProjection)},e.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},e.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},e.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},e.prototype.isTreeAnimationBlocked=function(){var e;return this.isAnimationBlocked||(null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimationBlocked())||!1},e.prototype.startUpdate=function(){var e;this.isUpdateBlocked()||(this.isUpdating=!0,null===(e=this.nodes)||void 0===e||e.forEach(iS))},e.prototype.willUpdate=function(e){var t,n,r;if(void 0===e&&(e=!0),this.root.isUpdateBlocked())null===(n=(t=this.options).onExitComplete)||void 0===n||n.call(t);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var i=0;i<this.path.length;i++){var a=this.path[i];a.shouldResetTransform=!0,a.updateScroll()}var o=this.options,u=o.layoutId,s=o.layout;if(void 0!==u||s){var l=null===(r=this.options.visualElement)||void 0===r?void 0:r.getProps().transformTemplate;this.prevTransformTemplateValue=null===l||void 0===l?void 0:l(this.latestValues,""),this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}},e.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Z_);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(cS),this.potentialNodes.clear()),this.nodes.forEach(eS),this.nodes.forEach(X_),this.nodes.forEach($_),this.clearAllSnapshots(),wb.update(),wb.preRender(),wb.render())},e.prototype.clearAllSnapshots=function(){this.nodes.forEach(J_),this.sharedNodes.forEach(aS)},e.prototype.scheduleUpdateProjection=function(){Tb.preRender(this.updateProjection,!1,!0)},e.prototype.scheduleCheckAfterUnmount=function(){var e=this;Tb.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))},e.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var e=this.measure(),t=this.removeTransform(this.removeElementScroll(e));hS(t),this.snapshot={measured:e,layout:t,latestValues:{}}}},e.prototype.updateLayout=function(){var e;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var t=0;t<this.path.length;t++){this.path[t].updateScroll()}var n=this.measure();hS(n);var r=this.layout;this.layout={measured:n,actual:this.removeElementScroll(n)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(e=this.options.visualElement)||void 0===e||e.notifyLayoutMeasure(this.layout.actual,null===r||void 0===r?void 0:r.actual)}},e.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=r(this.instance))},e.prototype.resetTransform=function(){var e;if(i){var t=this.isLayoutDirty||this.shouldResetTransform,n=this.projectionDelta&&!P_(this.projectionDelta),r=null===(e=this.options.visualElement)||void 0===e?void 0:e.getProps().transformTemplate,a=null===r||void 0===r?void 0:r(this.latestValues,""),o=a!==this.prevTransformTemplateValue;t&&(n||i_(this.latestValues)||o)&&(i(this.instance,a),this.shouldResetTransform=!1,this.scheduleRender())}},e.prototype.measure=function(){var e=this.options.visualElement;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};var t=e.measureViewportBox(),n=this.root.scroll;return n&&(c_(t.x,n.x),c_(t.y,n.y)),t},e.prototype.removeElementScroll=function(e){var t={x:{min:0,max:0},y:{min:0,max:0}};t_(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;r!==this.root&&i&&a.layoutScroll&&(c_(t.x,i.x),c_(t.y,i.y))}return t},e.prototype.applyTransform=function(e,t){void 0===t&&(t=!1);var n={x:{min:0,max:0},y:{min:0,max:0}};t_(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&v_(n,{x:-i.scroll.x,y:-i.scroll.y}),i_(i.latestValues)&&v_(n,i.latestValues)}return i_(this.latestValues)&&v_(n,this.latestValues),n},e.prototype.removeTransform=function(e){var t,n={x:{min:0,max:0},y:{min:0,max:0}};t_(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];if(i.instance&&i_(i.latestValues)){r_(i.latestValues)&&i.updateSnapshot();var a={x:{min:0,max:0},y:{min:0,max:0}};t_(a,i.measure()),D_(n,i.latestValues,null===(t=i.snapshot)||void 0===t?void 0:t.layout,a)}}return i_(this.latestValues)&&D_(n,this.latestValues),n},e.prototype.setTargetDelta=function(e){this.targetDelta=e,this.root.scheduleUpdateProjection()},e.prototype.setOptions=function(e){var t;this.options=Mk(Mk(Mk({},this.options),e),{crossfade:null===(t=e.crossfade)||void 0===t||t})},e.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},e.prototype.resolveTargetDelta=function(){var e,t,n,r,i=this.options,a=i.layout,o=i.layoutId;this.layout&&(a||o)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},E_(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),t_(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(e=this.relativeParent)||void 0===e?void 0:e.target)?(t=this.target,n=this.relativeTarget,r=this.relativeParent.target,__(t.x,n.x,r.x),__(t.y,n.y,r.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):t_(this.target,this.layout.actual),l_(this.target,this.targetDelta)):t_(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},E_(this.relativeTargetOrigin,this.target,this.relativeParent.target),t_(this.relativeTarget,this.relativeTargetOrigin)))))},e.prototype.getClosestProjectingParent=function(){if(this.parent&&!i_(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},e.prototype.calcProjection=function(){var e,t=this.options,n=t.layout,r=t.layoutId;if(this.isTreeAnimating=Boolean((null===(e=this.parent)||void 0===e?void 0:e.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(n||r)){var i=this.getLead();t_(this.layoutCorrected,this.layout.actual),function(e,t,n,r){var i,a;void 0===r&&(r=!1);var o=n.length;if(o){var u,s;t.x=t.y=1;for(var l=0;l<o;l++)s=(u=n[l]).projectionDelta,"contents"!==(null===(a=null===(i=u.instance)||void 0===i?void 0:i.style)||void 0===a?void 0:a.display)&&(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&v_(e,{x:-u.scroll.x,y:-u.scroll.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,l_(e,s)),r&&i_(u.latestValues)&&v_(e,u.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==i);var a=i.target;if(a){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var o=this.treeScale.x,u=this.treeScale.y,s=this.projectionTransform;x_(this.projectionDelta,this.layoutCorrected,a,this.latestValues),this.projectionTransform=M_(this.projectionDelta,this.treeScale),this.projectionTransform===s&&this.treeScale.x===o&&this.treeScale.y===u||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",a))}}},e.prototype.hide=function(){this.isVisible=!1},e.prototype.show=function(){this.isVisible=!0},e.prototype.scheduleRender=function(e){var t,n,r;void 0===e&&(e=!0),null===(n=(t=this.options).scheduleRender)||void 0===n||n.call(t),e&&(null===(r=this.getStack())||void 0===r||r.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},e.prototype.setAnimationOrigin=function(e,t){var n,r=this;void 0===t&&(t=!1);var i=this.snapshot,a=(null===i||void 0===i?void 0:i.latestValues)||{},o=Mk({},this.latestValues),u={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!t;var s={x:{min:0,max:0},y:{min:0,max:0}},l=null===i||void 0===i?void 0:i.isShared,c=((null===(n=this.getStack())||void 0===n?void 0:n.members.length)||0)<=1,f=Boolean(l&&!c&&!0===this.options.crossfade&&!this.path.some(sS));this.animationProgress=0,this.mixTargetDelta=function(t){var n,i=t/1e3;oS(u.x,e.x,i),oS(u.y,e.y,i),r.setTargetDelta(u),r.relativeTarget&&r.relativeTargetOrigin&&r.layout&&(null===(n=r.relativeParent)||void 0===n?void 0:n.layout)&&(E_(s,r.layout.actual,r.relativeParent.layout.actual),function(e,t,n,r){uS(e.x,t.x,n.x,r),uS(e.y,t.y,n.y,r)}(r.relativeTarget,r.relativeTargetOrigin,s,i)),l&&(r.animationValues=o,function(e,t,n,r,i,a){var o,u,s,l;i?(e.opacity=Ib(0,null!==(o=n.opacity)&&void 0!==o?o:1,$x(r)),e.opacityExit=Ib(null!==(u=t.opacity)&&void 0!==u?u:1,0,Jx(r))):a&&(e.opacity=Ib(null!==(s=t.opacity)&&void 0!==s?s:1,null!==(l=n.opacity)&&void 0!==l?l:1,r));for(var c=0;c<Wx;c++){var f="border".concat(Hx[c],"Radius"),h=Xx(t,f),d=Xx(n,f);void 0===h&&void 0===d||(h||(h=0),d||(d=0),0===h||0===d||Yx(h)===Yx(d)?(e[f]=Math.max(Ib(Qx(h),Qx(d),r),0),(sw.test(d)||sw.test(h))&&(e[f]+="%")):e[f]=d)}(t.rotate||n.rotate)&&(e.rotate=Ib(t.rotate||0,n.rotate||0,r))}(o,a,r.latestValues,i,f,c)),r.root.scheduleUpdateProjection(),r.scheduleRender(),r.animationProgress=i},this.mixTargetDelta(0)},e.prototype.startAnimation=function(e){var t,n,r=this;this.notifyListeners("animationStart"),null===(t=this.currentAnimation)||void 0===t||t.stop(),this.resumingFrom&&(null===(n=this.resumingFrom.currentAnimation)||void 0===n||n.stop()),this.pendingAnimation&&(bb.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tb.update((function(){Q_.hasAnimatedSinceResize=!0,r.currentAnimation=function(e,t,n){void 0===n&&(n={});var r=Lb(e)?e:Rb(e);return Gx("",r,t,n),{stop:function(){return r.stop()},isAnimating:function(){return r.isAnimating()}}}(0,1e3,Mk(Mk({},e),{onUpdate:function(t){var n;r.mixTargetDelta(t),null===(n=e.onUpdate)||void 0===n||n.call(e,t)},onComplete:function(){var t;null===(t=e.onComplete)||void 0===t||t.call(e),r.completeAnimation()}})),r.resumingFrom&&(r.resumingFrom.currentAnimation=r.currentAnimation),r.pendingAnimation=void 0}))},e.prototype.completeAnimation=function(){var e;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(e=this.getStack())||void 0===e||e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},e.prototype.finishAnimation=function(){var e;this.currentAnimation&&(null===(e=this.mixTargetDelta)||void 0===e||e.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},e.prototype.applyTransformsToTarget=function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;t&&n&&r&&(t_(t,n),v_(t,i),x_(this.projectionDeltaWithTransform,this.layoutCorrected,t,i))},e.prototype.registerSharedNode=function(e,t){var n,r,i;this.sharedNodes.has(e)||this.sharedNodes.set(e,new L_),this.sharedNodes.get(e).add(t),t.promote({transition:null===(n=t.options.initialPromotionConfig)||void 0===n?void 0:n.transition,preserveFollowOpacity:null===(i=null===(r=t.options.initialPromotionConfig)||void 0===r?void 0:r.shouldPreserveFollowOpacity)||void 0===i?void 0:i.call(r,t)})},e.prototype.isLead=function(){var e=this.getStack();return!e||e.lead===this},e.prototype.getLead=function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this},e.prototype.getPrevLead=function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0},e.prototype.getStack=function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)},e.prototype.promote=function(e){var t=void 0===e?{}:e,n=t.needsReset,r=t.transition,i=t.preserveFollowOpacity,a=this.getStack();a&&a.promote(this,i),n&&(this.projectionDelta=void 0,this.needsReset=!0),r&&this.setOptions({transition:r})},e.prototype.relegate=function(){var e=this.getStack();return!!e&&e.relegate(this)},e.prototype.resetRotation=function(){var e=this.options.visualElement;if(e){for(var t=!1,n={},r=0;r<F_.length;r++){var i="rotate"+F_[r];e.getStaticValue(i)&&(t=!0,n[i]=e.getStaticValue(i),e.setStaticValue(i,0))}if(t){for(var i in null===e||void 0===e||e.syncRender(),n)e.setStaticValue(i,n[i]);e.scheduleRender()}}},e.prototype.getProjectionStyles=function(e){var t,n,r,i,a,o;void 0===e&&(e={});var u={};if(!this.instance||this.isSVG)return u;if(!this.isVisible)return{visibility:"hidden"};u.visibility="";var s=null===(t=this.options.visualElement)||void 0===t?void 0:t.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=W_(e.pointerEvents)||"",u.transform=s?s(this.latestValues,""):"none",u;var l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){var c={};return this.options.layoutId&&(c.opacity=null!==(n=this.latestValues.opacity)&&void 0!==n?n:1,c.pointerEvents=W_(e.pointerEvents)||""),this.hasProjected&&!i_(this.latestValues)&&(c.transform=s?s({},""):"none",this.hasProjected=!1),c}var f=l.animationValues||l.latestValues;this.applyTransformsToTarget(),u.transform=M_(this.projectionDeltaWithTransform,this.treeScale,f),s&&(u.transform=s(f,u.transform));var h=this.projectionDelta,d=h.x,v=h.y;for(var p in u.transformOrigin="".concat(100*d.origin,"% ").concat(100*v.origin,"% 0"),l.animationValues?u.opacity=l===this?null!==(i=null!==(r=f.opacity)&&void 0!==r?r:this.latestValues.opacity)&&void 0!==i?i:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=l===this?null!==(a=f.opacity)&&void 0!==a?a:"":null!==(o=f.opacityExit)&&void 0!==o?o:0,O_)if(void 0!==f[p]){var y=O_[p],m=y.correct,g=y.applyTo,k=m(f[p],l);if(g)for(var b=g.length,w=0;w<b;w++)u[g[w]]=k;else u[p]=k}return this.options.layoutId&&(u.pointerEvents=l===this?W_(e.pointerEvents)||"":"none"),u},e.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},e.prototype.resetTree=function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Z_),this.root.sharedNodes.clear()},e}()}function X_(e){e.updateLayout()}function $_(e){var t,n,r,i,a=null!==(n=null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)&&void 0!==n?n:e.snapshot;if(e.isLead()&&e.layout&&a&&e.hasListeners("didUpdate")){var o=e.layout,u=o.actual,s=o.measured;"size"===e.options.animationType?V_((function(e){var t=a.isShared?a.measured[e]:a.layout[e],n=k_(t);t.min=u[e].min,t.max=t.min+n})):"position"===e.options.animationType&&V_((function(e){var t=a.isShared?a.measured[e]:a.layout[e],n=k_(u[e]);t.max=t.min+n}));var l={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};x_(l,u,a.layout);var c={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a.isShared?x_(c,e.applyTransform(s,!0),a.measured):x_(c,u,a.layout);var f=!P_(l),h=!1;if(!e.resumeFrom&&(e.relativeParent=e.getClosestProjectingParent(),e.relativeParent&&!e.relativeParent.resumeFrom)){var d=e.relativeParent,v=d.snapshot,p=d.layout;if(v&&p){var y={x:{min:0,max:0},y:{min:0,max:0}};E_(y,a.layout,v.layout);var m={x:{min:0,max:0},y:{min:0,max:0}};E_(m,u,p.actual),R_(y,m)||(h=!0)}}e.notifyListeners("didUpdate",{layout:u,snapshot:a,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeTargetChanged:h})}else e.isLead()&&(null===(i=(r=e.options).onExitComplete)||void 0===i||i.call(r));e.options.transition=void 0}function J_(e){e.clearSnapshot()}function Z_(e){e.clearMeasurements()}function eS(e){var t=e.options.visualElement;(null===t||void 0===t?void 0:t.getProps().onBeforeLayoutMeasure)&&t.notifyBeforeLayoutMeasure(),e.resetTransform()}function tS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function nS(e){e.resolveTargetDelta()}function rS(e){e.calcProjection()}function iS(e){e.resetRotation()}function aS(e){e.removeLeadSnapshot()}function oS(e,t,n){e.translate=Ib(t.translate,0,n),e.scale=Ib(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function uS(e,t,n,r){e.min=Ib(t.min,n.min,r),e.max=Ib(t.max,n.max,r)}function sS(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var lS={duration:.45,ease:[.4,0,.1,1]};function cS(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function fS(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function hS(e){fS(e.x),fS(e.y)}var dS=1;var vS=(0,t.createContext)({}),pS=(0,t.createContext)({});var yS=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ok(t,e),t.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},t.prototype.componentDidUpdate=function(){},t.prototype.updateProps=function(){var e=this.props,t=e.visualElement,n=e.props;t&&t.setProps(n)},t.prototype.render=function(){return this.props.children},t}(t.Component);function mS(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.projectionNodeConstructor,a=e.useRender,o=e.useVisualState,u=e.Component;return n&&function(e){for(var t in e)null!==e[t]&&("projectionNodeConstructor"===t?jk.projectionNodeConstructor=e[t]:jk[t].Component=e[t])}(n),(0,t.forwardRef)((function(e,n){var s=function(e){var n,r=e.layoutId,i=null===(n=(0,t.useContext)(vS))||void 0===n?void 0:n.id;return i&&void 0!==r?i+"-"+r:r}(e);e=Mk(Mk({},e),{layoutId:s});var l=(0,t.useContext)(Gk),c=null,f=ub(e),h=l.isStatic?void 0:lb((function(){if(Q_.hasEverUpdated)return dS++})),d=o(e,l.isStatic);return!l.isStatic&&Qk&&(f.visualElement=Zk(u,d,Mk(Mk({},l),e),r),function(e,n,r,i){var a,o=n.layoutId,u=n.layout,s=n.drag,l=n.dragConstraints,c=n.layoutScroll,f=(0,t.useContext)(pS);i&&r&&!(null===r||void 0===r?void 0:r.projection)&&(r.projection=new i(e,r.getLatestValues(),null===(a=r.parent)||void 0===a?void 0:a.projection),r.projection.setOptions({layoutId:o,layout:u,alwaysMeasureLayout:Boolean(s)||l&&eb(l),visualElement:r,scheduleRender:function(){return r.scheduleRender()},animationType:"string"===typeof u?u:"both",initialPromotionConfig:f,layoutScroll:c}))}(h,e,f.visualElement,i||jk.projectionNodeConstructor),c=function(e,n,r){var i=[];if((0,t.useContext)(zk),!n)return null;for(var a=0;a<Kk;a++){var o=qk[a],u=jk[o],s=u.isEnabled,l=u.Component;s(e)&&l&&i.push(t.createElement(l,Mk({key:o},e,{visualElement:n})))}return i}(e,f.visualElement)),t.createElement(yS,{visualElement:f.visualElement,props:Mk(Mk({},l),e)},c,t.createElement(Hk.Provider,{value:f},a(u,e,h,function(e,n,r){return(0,t.useCallback)((function(t){var i;t&&(null===(i=e.mount)||void 0===i||i.call(e,t)),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):eb(r)&&(r.current=t))}),[n])}(d,f.visualElement,n),d,l.isStatic,f.visualElement)))}))}function gS(e){function t(t,n){return void 0===n&&(n={}),mS(e(t,n))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var kS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function bS(e){return"string"===typeof e&&!e.includes("-")&&!!(kS.indexOf(e)>-1||/[A-Z]/.test(e))}function wS(e,t){var n=t.layout,r=t.layoutId;return z_(e)||K_(e)||(n||void 0!==r)&&(!!O_[e]||"opacity"===e)}var xS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function _S(e){return e.startsWith("--")}var SS=function(e,t){return t&&"number"===typeof e?t.transform(e):e};function ES(e,t,n,r){var i,a=e.style,o=e.vars,u=e.transform,s=e.transformKeys,l=e.transformOrigin;s.length=0;var c=!1,f=!1,h=!0;for(var d in t){var v=t[d];if(_S(d))o[d]=v;else{var p=Rx[d],y=SS(v,p);if(z_(d)){if(c=!0,u[d]=y,s.push(d),!h)continue;v!==(null!==(i=p.default)&&void 0!==i?i:0)&&(h=!1)}else K_(d)?(l[d]=y,f=!0):a[d]=y}}c?a.transform=function(e,t,n,r){var i=e.transform,a=e.transformKeys,o=t.enableHardwareAcceleration,u=void 0===o||o,s=t.allowTransformNone,l=void 0===s||s,c="";a.sort(B_);for(var f=!1,h=a.length,d=0;d<h;d++){var v=a[d];c+="".concat(xS[v]||v,"(").concat(i[v],") "),"z"===v&&(f=!0)}return!f&&u?c+="translateZ(0)":c=c.trim(),r?c=r(i,n?"":c):l&&n&&(c="none"),c}(e,n,h,r):r?a.transform=r({},""):!t.transform&&a.transform&&(a.transform="none"),f&&(a.transformOrigin=function(e){var t=e.originX,n=void 0===t?"50%":t,r=e.originY,i=void 0===r?"50%":r,a=e.originZ,o=void 0===a?0:a;return"".concat(n," ").concat(i," ").concat(o)}(l))}var TS=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function IS(e,t,n){for(var r in t)Lb(t[r])||wS(r,n)||(e[r]=t[r])}function CS(e,n,r){var i={};return IS(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};ES(e,n,{enableHardwareAcceleration:!r},i);var t=e.style;return Mk(Mk({},e.vars),t)}),[n])}(e,n,r)),e.transformValues&&(i=e.transformValues(i)),i}function AS(e,t,n){var r={},i=CS(e,t,n);return Boolean(e.drag)&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),r.style=i,r}var DS=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function NS(e){return DS.has(e)}var PS,RS=function(e){return!NS(e)};try{(PS=require("@emotion/is-prop-valid").default)&&(RS=function(e){return e.startsWith("on")?!NS(e):PS(e)})}catch(hy){}function LS(e,t,n){return"string"===typeof e?e:lw.transform(t+n*e)}var OS={offset:"stroke-dashoffset",array:"stroke-dasharray"},MS={offset:"strokeDashoffset",array:"strokeDasharray"};function VS(e,t,n,r){var i=t.attrX,a=t.attrY,o=t.originX,u=t.originY,s=t.pathLength,l=t.pathSpacing,c=void 0===l?1:l,f=t.pathOffset,h=void 0===f?0:f;ES(e,Vk(t,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r),e.attrs=e.style,e.style={};var d=e.attrs,v=e.style,p=e.dimensions;d.transform&&(p&&(v.transform=d.transform),delete d.transform),p&&(void 0!==o||void 0!==u||v.transform)&&(v.transformOrigin=function(e,t,n){var r=LS(t,e.x,e.width),i=LS(n,e.y,e.height);return"".concat(r," ").concat(i)}(p,void 0!==o?o:.5,void 0!==u?u:.5)),void 0!==i&&(d.x=i),void 0!==a&&(d.y=a),void 0!==s&&function(e,t,n,r,i){void 0===n&&(n=1),void 0===r&&(r=0),void 0===i&&(i=!0),e.pathLength=1;var a=i?OS:MS;e[a.offset]=lw.transform(-r);var o=lw.transform(t),u=lw.transform(n);e[a.array]="".concat(o," ").concat(u)}(d,s,c,h,!1)}var FS=function(){return Mk(Mk({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function US(e,n){var r=(0,t.useMemo)((function(){var t=FS();return VS(t,n,{enableHardwareAcceleration:!1},e.transformTemplate),Mk(Mk({},t.attrs),{style:Mk({},t.style)})}),[n]);if(e.style){var i={};IS(i,e.style,e),r.style=Mk(Mk({},i),r.style)}return r}function BS(e){void 0===e&&(e=!1);return function(n,r,i,a,o,u){var s=o.latestValues,l=(bS(n)?US:AS)(r,s,u),c=function(e,t,n){var r={};for(var i in e)(RS(i)||!0===n&&NS(i)||!t&&!NS(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),f=Mk(Mk(Mk({},c),l),{ref:a});return i&&(f["data-projection-id"]=i),(0,t.createElement)(n,f)}}var jS=/([a-z])([A-Z])/g,zS=function(e){return e.replace(jS,"$1-$2").toLowerCase()};function qS(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var KS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function GS(e,t,n,r){for(var i in qS(e,t,void 0,r),t.attrs)e.setAttribute(KS.has(i)?i:zS(i),t.attrs[i])}function HS(e){var t=e.style,n={};for(var r in t)(Lb(t[r])||wS(r,e))&&(n[r]=t[r]);return n}function WS(e){var t=HS(e);for(var n in e){if(Lb(e[n]))t["x"===n||"y"===n?"attr"+n.toUpperCase():n]=e[n]}return t}function QS(e){return"object"===typeof e&&"function"===typeof e.start}function YS(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,u={latestValues:$S(t,n,r,i),renderState:a()};return o&&(u.mount=function(e){return o(t,e,u)}),u}var XS=function(e){return function(n,r){var i=(0,t.useContext)(Hk),a=(0,t.useContext)(Wk);return r?YS(e,n,i,a):lb((function(){return YS(e,n,i,a)}))}};function $S(e,t,n,r){var i={},a=!1===(null===n||void 0===n?void 0:n.initial),o=r(e);for(var u in o)i[u]=W_(o[u]);var s=e.initial,l=e.animate,c=ab(e),f=ob(e);t&&f&&!c&&!1!==e.inherit&&(null!==s&&void 0!==s||(s=t.initial),null!==l&&void 0!==l||(l=t.animate));var h=a||!1===s,d=h?l:s;d&&"boolean"!==typeof d&&!QS(d)&&(Array.isArray(d)?d:[d]).forEach((function(t){var n=rb(e,t);if(n){var r=n.transitionEnd;n.transition;var a=Vk(n,["transitionEnd","transition"]);for(var o in a){var u=a[o];if(Array.isArray(u))u=u[h?u.length-1:0];null!==u&&(i[o]=u)}for(var o in r)i[o]=r[o]}}));return i}var JS,ZS={useVisualState:XS({scrapeMotionValuesFromProps:WS,createRenderState:FS,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(a){r.dimensions={x:0,y:0,width:0,height:0}}VS(r,i,{enableHardwareAcceleration:!1},e.transformTemplate),GS(t,r)}})},eE={useVisualState:XS({scrapeMotionValuesFromProps:HS,createRenderState:TS})};function tE(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function nE(e,n,r,i){(0,t.useEffect)((function(){var t=e.current;if(r&&t)return tE(t,n,r,i)}),[e,n,r,i])}function rE(e){return"undefined"!==typeof PointerEvent&&e instanceof PointerEvent?!("mouse"!==e.pointerType):e instanceof MouseEvent}function iE(e){return!!e.touches}!function(e){e.Animate="animate",e.Hover="whileHover",e.Tap="whileTap",e.Drag="whileDrag",e.Focus="whileFocus",e.InView="whileInView",e.Exit="exit"}(JS||(JS={}));var aE={pageX:0,pageY:0};function oE(e,t){void 0===t&&(t="page");var n=e.touches[0]||e.changedTouches[0]||aE;return{x:n[t+"X"],y:n[t+"Y"]}}function uE(e,t){return void 0===t&&(t="page"),{x:e[t+"X"],y:e[t+"Y"]}}function sE(e,t){return void 0===t&&(t="page"),{point:iE(e)?oE(e,t):uE(e,t)}}var lE=function(e,t){void 0===t&&(t=!1);var n,r=function(t){return e(t,sE(t))};return t?(n=r,function(e){var t=e instanceof MouseEvent;(!t||t&&0===e.button)&&n(e)}):r},cE={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},fE={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function hE(e){return Qk&&null===window.onpointerdown?e:Qk&&null===window.ontouchstart?fE[e]:Qk&&null===window.onmousedown?cE[e]:e}function dE(e,t,n,r){return tE(e,hE(t),lE(n,"pointerdown"===t),r)}function vE(e,t,n,r){return nE(e,hE(t),n&&lE(n,"pointerdown"===t),r)}function pE(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var yE=pE("dragHorizontal"),mE=pE("dragVertical");function gE(e){var t=!1;if("y"===e)t=mE();else if("x"===e)t=yE();else{var n=yE(),r=mE();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function kE(){var e=gE(!0);return!e||(e(),!1)}function bE(e,t,n){return function(r,i){var a;rE(r)&&!kE()&&(null===(a=e.animationState)||void 0===a||a.setActive(JS.Hover,t),null===n||void 0===n||n(r,i))}}var wE=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))};function xE(e){return(0,t.useEffect)((function(){return function(){return e()}}),[])}var _E=new WeakMap,SE=new WeakMap,EE=function(e){var t;null===(t=_E.get(e.target))||void 0===t||t(e)},TE=function(e){e.forEach(EE)};function IE(e,t,n){var r=function(e){var t=e.root,n=Vk(e,["root"]),r=t||document;SE.has(r)||SE.set(r,{});var i=SE.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(TE,Mk({root:t},n))),i[a]}(t);return _E.set(e,n),r.observe(e),function(){_E.delete(e),r.unobserve(e)}}var CE={some:0,all:1};function AE(e,n,r,i){var a=i.root,o=i.margin,u=i.amount,s=void 0===u?"some":u,l=i.once;(0,t.useEffect)((function(){if(e){var t={root:null===a||void 0===a?void 0:a.current,rootMargin:o,threshold:"number"===typeof s?s:CE[s]};return IE(r.getInstance(),t,(function(e){var t,i=e.isIntersecting;if(n.isInView!==i&&(n.isInView=i,!l||i||!n.hasEnteredView)){i&&(n.hasEnteredView=!0),null===(t=r.animationState)||void 0===t||t.setActive(JS.InView,i);var a=r.getProps(),o=i?a.onViewportEnter:a.onViewportLeave;null===o||void 0===o||o(e)}}))}}),[e,a,o,s])}function DE(e,n,r,i){var a=i.fallback,o=void 0===a||a;(0,t.useEffect)((function(){e&&o&&requestAnimationFrame((function(){var e;n.hasEnteredView=!0;var t=r.getProps().onViewportEnter;null===t||void 0===t||t(null),null===(e=r.animationState)||void 0===e||e.setActive(JS.InView,!0)}))}),[e])}var NE=function(e){return function(t){return e(t),null}},PE={inView:NE((function(e){var n=e.visualElement,r=e.whileInView,i=e.onViewportEnter,a=e.onViewportLeave,o=e.viewport,u=void 0===o?{}:o,s=(0,t.useRef)({hasEnteredView:!1,isInView:!1}),l=Boolean(r||i||a);u.once&&s.current.hasEnteredView&&(l=!1),("undefined"===typeof IntersectionObserver?DE:AE)(l,s.current,n,u)})),tap:NE((function(e){var n=e.onTap,r=e.onTapStart,i=e.onTapCancel,a=e.whileTap,o=e.visualElement,u=n||r||i||a,s=(0,t.useRef)(!1),l=(0,t.useRef)(null);function c(){var e;null===(e=l.current)||void 0===e||e.call(l),l.current=null}function f(){var e;return c(),s.current=!1,null===(e=o.animationState)||void 0===e||e.setActive(JS.Tap,!1),!kE()}function h(e,t){f()&&(wE(o.getInstance(),e.target)?null===n||void 0===n||n(e,t):null===i||void 0===i||i(e,t))}function d(e,t){f()&&(null===i||void 0===i||i(e,t))}vE(o,"pointerdown",u?function(e,t){var n;c(),s.current||(s.current=!0,l.current=Nw(dE(window,"pointerup",h),dE(window,"pointercancel",d)),null===(n=o.animationState)||void 0===n||n.setActive(JS.Tap,!0),null===r||void 0===r||r(e,t))}:void 0),xE(c)})),focus:NE((function(e){var t=e.whileFocus,n=e.visualElement;nE(n,"focus",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(JS.Focus,!0)}:void 0),nE(n,"blur",t?function(){var e;null===(e=n.animationState)||void 0===e||e.setActive(JS.Focus,!1)}:void 0)})),hover:NE((function(e){var t=e.onHoverStart,n=e.onHoverEnd,r=e.whileHover,i=e.visualElement;vE(i,"pointerenter",t||r?bE(i,!0,t):void 0),vE(i,"pointerleave",n||r?bE(i,!1,n):void 0)}))},RE=0,LE=function(){return RE++};function OE(){var e=(0,t.useContext)(Wk);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=lb(LE);(0,t.useEffect)((function(){return i(a)}),[]);return!n&&r?[!1,function(){return null===r||void 0===r?void 0:r(a)}]:[!0]}function ME(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}var VE=function(e){return/^\-?\d*\.?\d+$/.test(e)},FE=function(e){return/^0[^.\s]+$/.test(e)},UE=function(e){return function(t){return t.test(e)}},BE=[$b,lw,sw,uw,fw,cw,{test:function(e){return"auto"===e},parse:function(e){return e}}],jE=function(e){return BE.find(UE(e))},zE=Uk(Uk([],Fk(BE),!1),[ww,Cw],!1),qE=function(e){return zE.find(UE(e))};function KE(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Rb(n))}function GE(e,t){var n=ib(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i;r.transition;var o=Vk(r,["transitionEnd","transition"]);for(var u in o=Mk(Mk({},o),a)){KE(e,u,Fx(o[u]))}}function HE(e,t){if(t)return(t[e]||t.default||t).from}function WE(e,t,n){var r;void 0===n&&(n={});var i=ib(e,t,n.custom),a=(i||{}).transition,o=void 0===a?e.getDefaultTransition()||{}:a;n.transitionOverride&&(o=n.transitionOverride);var u=i?function(){return QE(e,i,n)}:function(){return Promise.resolve()},s=(null===(r=e.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=o.delayChildren,a=void 0===i?0:i,u=o.staggerChildren,s=o.staggerDirection;return function(e,t,n,r,i,a){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);var o=[],u=(e.variantChildren.size-1)*r,s=1===i?function(e){return void 0===e&&(e=0),e*r}:function(e){return void 0===e&&(e=0),u-e*r};return Array.from(e.variantChildren).sort(YE).forEach((function(e,r){o.push(WE(e,t,Mk(Mk({},a),{delay:n+s(r)})).then((function(){return e.notifyAnimationComplete(t)})))})),Promise.all(o)}(e,t,a+r,u,s,n)}:function(){return Promise.resolve()},l=o.when;if(l){var c=Fk("beforeChildren"===l?[u,s]:[s,u],2),f=c[0],h=c[1];return f().then(h)}return Promise.all([u(),s(n.delay)])}function QE(e,t,n){var r,i=void 0===n?{}:n,a=i.delay,o=void 0===a?0:a,u=i.transitionOverride,s=i.type,l=e.makeTargetAnimatable(t),c=l.transition,f=void 0===c?e.getDefaultTransition():c,h=l.transitionEnd,d=Vk(l,["transition","transitionEnd"]);u&&(f=u);var v=[],p=s&&(null===(r=e.animationState)||void 0===r?void 0:r.getState()[s]);for(var y in d){var m=e.getValue(y),g=d[y];if(!(!m||void 0===g||p&&XE(p,y))){var k=Mk({delay:o},f);e.shouldReduceMotion&&z_(y)&&(k=Mk(Mk({},k),{type:!1,delay:0}));var b=Gx(y,m,g,k);v.push(b)}}return Promise.all(v).then((function(){h&&GE(e,h)}))}function YE(e,t){return e.sortNodePosition(t)}function XE(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}var $E=[JS.Animate,JS.InView,JS.Focus,JS.Hover,JS.Tap,JS.Drag,JS.Exit],JE=Uk([],Fk($E),!1).reverse(),ZE=$E.length;function eT(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t,n){var r;if(void 0===n&&(n={}),e.notifyAnimationStart(t),Array.isArray(t)){var i=t.map((function(t){return WE(e,t,n)}));r=Promise.all(i)}else if("string"===typeof t)r=WE(e,t,n);else{var a="function"===typeof t?ib(e,t,n.custom):t;r=QE(e,a,n)}return r.then((function(){return e.notifyAnimationComplete(t)}))}(e,n,r)})))}}function tT(e){var t=eT(e),n=function(){var e;return(e={})[JS.Animate]=nT(!0),e[JS.InView]=nT(),e[JS.Hover]=nT(),e[JS.Tap]=nT(),e[JS.Drag]=nT(),e[JS.Focus]=nT(),e[JS.Exit]=nT(),e}(),r={},i=!0,a=function(t,n){var r=ib(e,n);if(r){r.transition;var i=r.transitionEnd,a=Vk(r,["transition","transitionEnd"]);t=Mk(Mk(Mk({},t),a),i)}return t};function o(o,u){for(var s,l=e.getProps(),c=e.getVariantContext(!0)||{},f=[],h=new Set,d={},v=1/0,p=function(t){var r=JE[t],p=n[r],y=null!==(s=l[r])&&void 0!==s?s:c[r],m=nb(y),g=r===u?p.isActive:null;!1===g&&(v=t);var k=y===c[r]&&y!==l[r]&&m;if(k&&i&&e.manuallyAnimateOnMount&&(k=!1),p.protectedKeys=Mk({},d),!p.isActive&&null===g||!y&&!p.prevProp||QS(y)||"boolean"===typeof y)return"continue";var b=function(e,t){if("string"===typeof t)return t!==e;if(tb(t))return!ME(t,e);return!1}(p.prevProp,y),w=b||r===u&&p.isActive&&!k&&m||t>v&&m,x=Array.isArray(y)?y:[y],_=x.reduce(a,{});!1===g&&(_={});var S=p.prevResolvedValues,E=void 0===S?{}:S,T=Mk(Mk({},E),_),I=function(e){w=!0,h.delete(e),p.needsAnimating[e]=!0};for(var C in T){var A=_[C],D=E[C];d.hasOwnProperty(C)||(A!==D?xx(A)&&xx(D)?!ME(A,D)||b?I(C):p.protectedKeys[C]=!0:void 0!==A?I(C):h.add(C):void 0!==A&&h.has(C)?I(C):p.protectedKeys[C]=!0)}p.prevProp=y,p.prevResolvedValues=_,p.isActive&&(d=Mk(Mk({},d),_)),i&&e.blockInitialAnimation&&(w=!1),w&&!k&&f.push.apply(f,Uk([],Fk(x.map((function(e){return{animation:e,options:Mk({type:r},o)}}))),!1))},y=0;y<ZE;y++)p(y);if(r=Mk({},d),h.size){var m={};h.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(m[t]=n)})),f.push({animation:m})}var g=Boolean(f.length);return i&&!1===l.initial&&!e.manuallyAnimateOnMount&&(g=!1),i=!1,g?t(f):Promise.resolve()}return{isAnimated:function(e){return void 0!==r[e]},animateChanges:o,setActive:function(t,r,i){var a;if(n[t].isActive===r)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var u=o(i,t);for(var s in n)n[s].protectedKeys={};return u},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function nT(e){return void 0===e&&(e=!1),{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var rT={animation:NE((function(e){var n=e.visualElement,r=e.animate;n.animationState||(n.animationState=tT(n)),QS(r)&&(0,t.useEffect)((function(){return r.subscribe(n)}),[r])})),exit:NE((function(e){var n=e.custom,r=e.visualElement,i=Fk(OE(),2),a=i[0],o=i[1],u=(0,t.useContext)(Wk);(0,t.useEffect)((function(){var e,t;r.isPresent=a;var i=null===(e=r.animationState)||void 0===e?void 0:e.setActive(JS.Exit,!a,{custom:null!==(t=null===u||void 0===u?void 0:u.custom)&&void 0!==t?t:n});!a&&(null===i||void 0===i||i.then(o))}),[a])}))},iT=function(){function e(e,t,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=uT(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=g_(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=Eb().timestamp;r.history.push(Mk(Mk({},i),{timestamp:a}));var o=r.handlers,u=o.onStart,s=o.onMove;t||(u&&u(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),s&&s(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=aT(t,r.transformPagePoint),rE(e)&&0===e.buttons?r.handlePointerUp(e,t):Tb.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){r.end();var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=uT(aT(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)},!(iE(e)&&e.touches.length>1)){this.handlers=t,this.transformPagePoint=i;var a=aT(sE(e),this.transformPagePoint),o=a.point,u=Eb().timestamp;this.history=[Mk(Mk({},o),{timestamp:u})];var s=t.onSessionStart;s&&s(e,uT(a,this.history)),this.removeListeners=Nw(dE(window,"pointermove",this.handlePointerMove),dE(window,"pointerup",this.handlePointerUp),dE(window,"pointercancel",this.handlePointerUp))}}return e.prototype.updateHandlers=function(e){this.handlers=e},e.prototype.end=function(){this.removeListeners&&this.removeListeners(),bb.update(this.updatePoint)},e}();function aT(e,t){return t?{point:t(e.point)}:e}function oT(e,t){return{x:e.x-t.x,y:e.y-t.y}}function uT(e,t){var n=e.point;return{point:n,delta:oT(n,lT(t)),offset:oT(n,sT(t)),velocity:cT(t,.1)}}function sT(e){return e[0]}function lT(e){return e[e.length-1]}function cT(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=lT(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>fx(t)));)n--;if(!r)return{x:0,y:0};var a=(i.timestamp-r.timestamp)/1e3;if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function fT(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function hT(e,t){var n,r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&(r=(n=Fk([i,r],2))[0],i=n[1]),{min:r,max:i}}var dT=.35;function vT(e,t,n){return{min:pT(e,t),max:pT(e,n)}}function pT(e,t){var n;return"number"===typeof e?e:null!==(n=e[t])&&void 0!==n?n:0}function yT(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function mT(e,t){return yT(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var gT=new WeakMap,kT=function(){function e(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}return e.prototype.start=function(e,t){var n=this,r=(void 0===t?{}:t).snapToCursor,i=void 0!==r&&r;if(!1!==this.visualElement.isPresent){this.panSession=new iT(e,{onSessionStart:function(e){n.stopAnimation(),i&&n.snapToCursor(sE(e,"page").point)},onStart:function(e,t){var r,i=n.getProps(),a=i.drag,o=i.dragPropagation,u=i.onDragStart;(!a||o||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=gE(a),n.openGlobalLock))&&(n.isDragging=!0,n.currentDirection=null,n.resolveConstraints(),n.visualElement.projection&&(n.visualElement.projection.isAnimationBlocked=!0,n.visualElement.projection.target=void 0),V_((function(e){var t,r,i=n.getAxisMotionValue(e).get()||0;if(sw.test(i)){var a=null===(r=null===(t=n.visualElement.projection)||void 0===t?void 0:t.layout)||void 0===r?void 0:r.actual[e];if(a)i=k_(a)*(parseFloat(i)/100)}n.originPoint[e]=i})),null===u||void 0===u||u(e,t),null===(r=n.visualElement.animationState)||void 0===r||r.setActive(JS.Drag,!0))},onMove:function(e,t){var r=n.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,u=r.onDrag;if(i||n.openGlobalLock){var s=t.offset;if(a&&null===n.currentDirection)return n.currentDirection=function(e,t){void 0===t&&(t=10);var n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==n.currentDirection&&(null===o||void 0===o||o(n.currentDirection)));n.updateAxis("x",t.point,s),n.updateAxis("y",t.point,s),n.visualElement.syncRender(),null===u||void 0===u||u(e,t)}},onSessionEnd:function(e,t){return n.stop(e,t)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},e.prototype.stop=function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;null===i||void 0===i||i(e,t)}},e.prototype.cancel=function(){var e,t;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(e=this.panSession)||void 0===e||e.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(JS.Drag,!1)},e.prototype.updateAxis=function(e,t,n){var r=this.getProps().drag;if(n&&bT(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?Ib(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?Ib(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}},e.prototype.resolveConstraints=function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&eb(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:fT(e.x,r,a),y:fT(e.y,n,i)}}(i.actual,n),this.elastic=function(e){return void 0===e&&(e=dT),!1===e?e=0:!0===e&&(e=dT),{x:vT(e,"left","right"),y:vT(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&V_((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.actual[t],e.constraints[t]))}))},e.prototype.resolveRefConstraints=function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!eb(t))return!1;var r=t.current,i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=mT(e,n),i=t.scroll;return i&&(c_(r.x,i.x),c_(r.y,i.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:hT(e.x,t.x),y:hT(e.y,t.y)}}(i.layout.actual,a);if(n){var u=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!u,u&&(o=yT(u))}return o},e.prototype.startAnimation=function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,u=n.dragSnapToOrigin,s=n.onDragTransitionEnd,l=this.constraints||{},c=V_((function(n){var s;if(bT(n,r,t.currentDirection)){var c=null!==(s=null===l||void 0===l?void 0:l[n])&&void 0!==s?s:{};u&&(c={min:0,max:0});var f=a?200:1e6,h=a?40:1e7,d=Mk(Mk({type:"inertia",velocity:i?e[n]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},o),c);return t.startAxisValueAnimation(n,d)}}));return Promise.all(c).then(s)},e.prototype.startAxisValueAnimation=function(e,t){return Gx(e,this.getAxisMotionValue(e),0,t)},e.prototype.stopAnimation=function(){var e=this;V_((function(t){return e.getAxisMotionValue(t).stop()}))},e.prototype.getAxisMotionValue=function(e){var t,n,r="_drag"+e.toUpperCase(),i=this.visualElement.getProps()[r];return i||this.visualElement.getValue(e,null!==(n=null===(t=this.visualElement.getProps().initial)||void 0===t?void 0:t[e])&&void 0!==n?n:0)},e.prototype.snapToCursor=function(e){var t=this;V_((function(n){if(bT(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.actual[n],o=a.min,u=a.max;i.set(e[n]-Ib(o,u,.5))}}}))},e.prototype.scalePositionWithinConstraints=function(){var e,t=this,n=this.getProps(),r=n.drag,i=n.dragConstraints,a=this.visualElement.projection;if(eb(i)&&a&&this.constraints){this.stopAnimation();var o={x:0,y:0};V_((function(e){var n=t.getAxisMotionValue(e);if(n){var r=n.get();o[e]=function(e,t){var n=.5,r=k_(e),i=k_(t);return i>r?n=Kb(t.min,t.max-r,e.min):r>i&&(n=Kb(e.min,e.max-i,t.min)),Ob(0,1,n)}({min:r,max:r},t.constraints[e])}}));var u=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=u?u({},""):"none",null===(e=a.root)||void 0===e||e.updateScroll(),a.updateLayout(),this.resolveConstraints(),V_((function(e){if(bT(e,r,null)){var n=t.getAxisMotionValue(e),i=t.constraints[e],a=i.min,u=i.max;n.set(Ib(a,u,o[e]))}}))}},e.prototype.addListeners=function(){var e,t=this;gT.set(this.visualElement,this);var n=dE(this.visualElement.getInstance(),"pointerdown",(function(e){var n=t.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&t.start(e)})),r=function(){eb(t.getProps().dragConstraints)&&(t.constraints=t.resolveRefConstraints())},i=this.visualElement.projection,a=i.addEventListener("measure",r);i&&!i.layout&&(null===(e=i.root)||void 0===e||e.updateScroll(),i.updateLayout()),r();var o=tE(window,"resize",(function(){t.scalePositionWithinConstraints()}));return i.addEventListener("didUpdate",(function(e){var n=e.delta,r=e.hasLayoutChanged;t.isDragging&&r&&(V_((function(e){var r=t.getAxisMotionValue(e);r&&(t.originPoint[e]+=n[e].translate,r.set(r.get()+n[e].translate))})),t.visualElement.syncRender())})),function(){o(),n(),a()}},e.prototype.getProps=function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,u=e.dragConstraints,s=void 0!==u&&u,l=e.dragElastic,c=void 0===l?dT:l,f=e.dragMomentum,h=void 0===f||f;return Mk(Mk({},e),{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:c,dragMomentum:h})},e}();function bT(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var wT={pan:NE((function(e){var n=e.onPan,r=e.onPanStart,i=e.onPanEnd,a=e.onPanSessionStart,o=e.visualElement,u=n||r||i||a,s=(0,t.useRef)(null),l=(0,t.useContext)(Gk).transformPagePoint,c={onSessionStart:a,onStart:r,onMove:n,onEnd:function(e,t){s.current=null,i&&i(e,t)}};(0,t.useEffect)((function(){null!==s.current&&s.current.updateHandlers(c)})),vE(o,"pointerdown",u&&function(e){s.current=new iT(e,c,{transformPagePoint:l})}),xE((function(){return s.current&&s.current.end()}))})),drag:NE((function(e){var n=e.dragControls,r=e.visualElement,i=lb((function(){return new kT(r)}));(0,t.useEffect)((function(){return n&&n.subscribe(i)}),[i,n]),(0,t.useEffect)((function(){return i.addListeners()}),[i])}))},xT=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];var _T=function(e){var t=e.treeType,n=void 0===t?"":t,r=e.build,i=e.getBaseTarget,a=e.makeTargetAnimatable,o=e.measureViewportBox,u=e.render,s=e.readValueFromInstance,l=e.removeValueFromRenderState,c=e.sortNodePosition,f=e.scrapeMotionValuesFromProps;return function(e,t){var h=e.parent,d=e.props,v=e.presenceId,p=e.blockInitialAnimation,y=e.visualState,m=e.shouldReduceMotion;void 0===t&&(t={});var g,k,b=!1,w=y.latestValues,x=y.renderState,_=function(){var e=xT.map((function(){return new Nb})),t={},n={clearAllListeners:function(){return e.forEach((function(e){return e.clear()}))},updatePropListeners:function(e){xT.forEach((function(r){var i,a="on"+r,o=e[a];null===(i=t[r])||void 0===i||i.call(t),o&&(t[r]=n[a](o))}))}};return e.forEach((function(e,t){n["on"+xT[t]]=function(t){return e.add(t)},n["notify"+xT[t]]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.notify.apply(e,Uk([],Fk(t),!1))}})),n}(),S=new Map,E=new Map,T={},I=Mk({},w);function C(){g&&b&&(A(),u(g,x,d.style,V.projection))}function A(){r(V,x,w,t,d)}function D(){_.notifyUpdate(w)}function N(e,t){var n=t.onChange((function(t){w[e]=t,d.onUpdate&&Tb.update(D,!1,!0)})),r=t.onRenderRequest(V.scheduleRender);E.set(e,(function(){n(),r()}))}var P=f(d);for(var R in P){var L=P[R];void 0!==w[R]&&Lb(L)&&L.set(w[R],!1)}var O=ab(d),M=ob(d),V=Mk(Mk({treeType:n,current:null,depth:h?h.depth+1:0,parent:h,children:new Set,presenceId:v,shouldReduceMotion:m,variantChildren:M?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===h||void 0===h?void 0:h.isMounted()),blockInitialAnimation:p,isMounted:function(){return Boolean(g)},mount:function(e){b=!0,g=V.current=e,V.projection&&V.projection.mount(e),M&&h&&!O&&(k=null===h||void 0===h?void 0:h.addVariantChild(V)),S.forEach((function(e,t){return N(t,e)})),null===h||void 0===h||h.children.add(V),V.setProps(d)},unmount:function(){var e;null===(e=V.projection)||void 0===e||e.unmount(),bb.update(D),bb.render(C),E.forEach((function(e){return e()})),null===k||void 0===k||k(),null===h||void 0===h||h.children.delete(V),_.clearAllListeners(),g=void 0,b=!1},addVariantChild:function(e){var t,n=V.getClosestVariantNode();if(n)return null===(t=n.variantChildren)||void 0===t||t.add(e),function(){return n.variantChildren.delete(e)}},sortNodePosition:function(e){return c&&n===e.treeType?c(V.getInstance(),e.getInstance()):0},getClosestVariantNode:function(){return M?V:null===h||void 0===h?void 0:h.getClosestVariantNode()},getLayoutId:function(){return d.layoutId},getInstance:function(){return g},getStaticValue:function(e){return w[e]},setStaticValue:function(e,t){return w[e]=t},getLatestValues:function(){return w},setVisibility:function(e){V.isVisible!==e&&(V.isVisible=e,V.scheduleRender())},makeTargetAnimatable:function(e,t){return void 0===t&&(t=!0),a(V,e,d,t)},measureViewportBox:function(){return o(g,d)},addValue:function(e,t){V.hasValue(e)&&V.removeValue(e),S.set(e,t),w[e]=t.get(),N(e,t)},removeValue:function(e){var t;S.delete(e),null===(t=E.get(e))||void 0===t||t(),E.delete(e),delete w[e],l(e,x)},hasValue:function(e){return S.has(e)},getValue:function(e,t){var n=S.get(e);return void 0===n&&void 0!==t&&(n=Rb(t),V.addValue(e,n)),n},forEachValue:function(e){return S.forEach(e)},readValue:function(e){var n;return null!==(n=w[e])&&void 0!==n?n:s(g,e,t)},setBaseTarget:function(e,t){I[e]=t},getBaseTarget:function(e){if(i){var t=i(d,e);if(void 0!==t&&!Lb(t))return t}return I[e]}},_),{build:function(){return A(),x},scheduleRender:function(){Tb.render(C,!1,!0)},syncRender:C,setProps:function(e){(e.transformTemplate||d.transformTemplate)&&V.scheduleRender(),d=e,_.updatePropListeners(e),T=function(e,t,n){var r;for(var i in t){var a=t[i],o=n[i];if(Lb(a))e.addValue(i,a);else if(Lb(o))e.addValue(i,Rb(a));else if(o!==a)if(e.hasValue(i)){var u=e.getValue(i);!u.hasAnimated&&u.set(a)}else e.addValue(i,Rb(null!==(r=e.getStaticValue(i))&&void 0!==r?r:a))}for(var i in n)void 0===t[i]&&e.removeValue(i);return t}(V,f(d),T)},getProps:function(){return d},getVariant:function(e){var t;return null===(t=d.variants)||void 0===t?void 0:t[e]},getDefaultTransition:function(){return d.transition},getTransformPagePoint:function(){return d.transformPagePoint},getVariantContext:function(e){if(void 0===e&&(e=!1),e)return null===h||void 0===h?void 0:h.getVariantContext();if(!O){var t=(null===h||void 0===h?void 0:h.getVariantContext())||{};return void 0!==d.initial&&(t.initial=d.initial),t}for(var n={},r=0;r<ET;r++){var i=ST[r],a=d[i];(nb(a)||!1===a)&&(n[i]=a)}return n}});return V}},ST=Uk(["initial"],Fk($E),!1),ET=ST.length;function TT(e){return"string"===typeof e&&e.startsWith("var(--")}var IT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function CT(e,t,n){void 0===n&&(n=1),'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.');var r=Fk(function(e){var t=IT.exec(e);if(!t)return[,];var n=Fk(t,3);return[n[1],n[2]]}(e),2),i=r[0],a=r[1];if(i){var o=window.getComputedStyle(t).getPropertyValue(i);return o?o.trim():TT(a)?CT(a,t,n+1):a}}var AT,DT=new Set(["width","height","top","left","right","bottom","x","y"]),NT=function(e){return DT.has(e)},PT=function(e,t){e.set(t,!1),e.set(t)},RT=function(e){return e===$b||e===lw};!function(e){e.width="width",e.height="height",e.left="left",e.right="right",e.top="top",e.bottom="bottom"}(AT||(AT={}));var LT=function(e,t){return parseFloat(e.split(", ")[t])},OT=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return LT(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?LT(o[1],e):0}},MT=new Set(["x","y","z"]),VT=U_.filter((function(e){return!MT.has(e)}));var FT={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:OT(4,13),y:OT(5,14)},UT=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r={}),t=Mk({},t),r=Mk({},r);var i=Object.keys(t).filter(NT),a=[],o=!1,u=[];if(i.forEach((function(i){var s=e.getValue(i);if(e.hasValue(i)){var l,c=n[i],f=jE(c),h=t[i];if(xx(h)){var d=h.length,v=null===h[0]?1:0;c=h[v],f=jE(c);for(var p=v;p<d;p++)l?jE(h[p]):(l=jE(h[p]))===f||RT(f)&&RT(l)}else l=jE(h);if(f!==l)if(RT(f)&&RT(l)){var y=s.get();"string"===typeof y&&s.set(parseFloat(y)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&l===lw&&(t[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===l||void 0===l?void 0:l.transform)&&(0===c||0===h)?0===c?s.set(l.transform(c)):t[i]=f.transform(h):(o||(a=function(e){var t=[];return VT.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.syncRender(),t}(e),o=!0),u.push(i),r[i]=void 0!==r[i]?r[i]:t[i],PT(s,h))}})),u.length){var s=function(e,t,n){var r=t.measureViewportBox(),i=t.getInstance(),a=getComputedStyle(i),o=a.display,u={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){u[e]=FT[e](r,a)})),t.syncRender();var s=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);PT(r,u[n]),e[n]=FT[n](s,a)})),e}(t,e,u);return a.length&&a.forEach((function(t){var n=Fk(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.syncRender(),{target:s,transitionEnd:r}}return{target:t,transitionEnd:r}};function BT(e,t,n,r){return function(e){return Object.keys(e).some(NT)}(t)?UT(e,t,n,r):{target:t,transitionEnd:r}}var jT=function(e,t,n,r){var i=function(e,t,n){var r,i=Vk(t,[]),a=e.getInstance();if(!(a instanceof Element))return{target:i,transitionEnd:n};for(var o in n&&(n=Mk({},n)),e.forEachValue((function(e){var t=e.get();if(TT(t)){var n=CT(t,a);n&&e.set(n)}})),i){var u=i[o];if(TT(u)){var s=CT(u,a);s&&(i[o]=s,n&&(null!==(r=n[o])&&void 0!==r||(n[o]=u)))}}return{target:i,transitionEnd:n}}(e,t,r);return BT(e,t=i.target,n,r=i.transitionEnd)};var zT={treeType:"dom",readValueFromInstance:function(e,t){if(z_(t)){var n=Ox(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r));return(_S(t)?i.getPropertyValue(t):i[t])||0},sortNodePosition:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1},getBaseTarget:function(e,t){var n;return null===(n=e.style)||void 0===n?void 0:n[t]},measureViewportBox:function(e,t){return mT(e,t.transformPagePoint)},resetTransform:function(e,t,n){var r=n.transformTemplate;t.style.transform=r?r({},""):"none",e.scheduleRender()},restoreTransform:function(e,t){e.style.transform=t.style.transform},removeValueFromRenderState:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]},makeTargetAnimatable:function(e,t,n,r){var i=n.transformValues;void 0===r&&(r=!0);var a=t.transition,o=t.transitionEnd,u=Vk(t,["transition","transitionEnd"]),s=function(e,t,n){var r,i,a={};for(var o in e)a[o]=null!==(r=HE(o,t))&&void 0!==r?r:null===(i=n.getValue(o))||void 0===i?void 0:i.get();return a}(u,a||{},e);if(i&&(o&&(o=i(o)),u&&(u=i(u)),s&&(s=i(s))),r){!function(e,t,n){var r,i,a,o,u=Object.keys(t).filter((function(t){return!e.hasValue(t)})),s=u.length;if(s)for(var l=0;l<s;l++){var c=u[l],f=t[c],h=null;Array.isArray(f)&&(h=f[0]),null===h&&(h=null!==(i=null!==(r=n[c])&&void 0!==r?r:e.readValue(c))&&void 0!==i?i:t[c]),void 0!==h&&null!==h&&("string"===typeof h&&(VE(h)||FE(h))?h=parseFloat(h):!qE(h)&&Cw.test(f)&&(h=Mx(c,f)),e.addValue(c,Rb(h)),null!==(a=(o=n)[c])&&void 0!==a||(o[c]=h),e.setBaseTarget(c,h))}}(e,u,s);var l=jT(e,u,s,o);o=l.transitionEnd,u=l.target}return Mk({transition:a,transitionEnd:o},u)},scrapeMotionValuesFromProps:HS,build:function(e,t,n,r,i){void 0!==e.isVisible&&(t.style.visibility=e.isVisible?"visible":"hidden"),ES(t,n,r,i.transformTemplate)},render:qS},qT=_T(zT),KT=_T(Mk(Mk({},zT),{getBaseTarget:function(e,t){return e[t]},readValueFromInstance:function(e,t){var n;return z_(t)?(null===(n=Ox(t))||void 0===n?void 0:n.default)||0:(t=KS.has(t)?t:zS(t),e.getAttribute(t))},scrapeMotionValuesFromProps:WS,build:function(e,t,n,r,i){VS(t,n,r,i.transformTemplate)},render:GS})),GT=function(e,t){return bS(e)?KT(t,{enableHardwareAcceleration:!1}):qT(t,{enableHardwareAcceleration:!0})};function HT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var WT={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!lw.test(e))return e;e=parseFloat(e)}var n=HT(e,t.target.x),r=HT(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},QT="_$css",YT={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=e.includes("var("),o=[];a&&(e=e.replace(IT,(function(e){return o.push(e),QT})));var u=Cw.parse(e);if(u.length>5)return i;var s=Cw.createTransformer(e),l="number"!==typeof u[0]?1:0,c=r.x.scale*n.x,f=r.y.scale*n.y;u[0+l]/=c,u[1+l]/=f;var h=Ib(c,f,.5);"number"===typeof u[2+l]&&(u[2+l]/=h),"number"===typeof u[3+l]&&(u[3+l]/=h);var d=s(u);if(a){var v=0;d=d.replace(QT,(function(){var e=o[v];return v++,e}))}return d}},XT=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ok(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,u=r.projection;e=$T,Object.assign(O_,e),u&&((null===i||void 0===i?void 0:i.group)&&i.group.add(u),(null===a||void 0===a?void 0:a.register)&&o&&a.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",(function(){t.safeToRemove()})),u.setOptions(Mk(Mk({},u.options),{onExitComplete:function(){return t.safeToRemove()}}))),Q_.hasEverUpdated=!0},t.prototype.getSnapshotBeforeUpdate=function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,u=i.projection;return u?(u.isPresent=o,a||e.layoutDependency!==r||void 0===r?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Tb.postRender((function(){var e;(null===(e=u.getStack())||void 0===e?void 0:e.members.length)||t.safeToRemove()}))),null):null},t.prototype.componentDidUpdate=function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),(null===n||void 0===n?void 0:n.group)&&n.group.remove(i),(null===r||void 0===r?void 0:r.deregister)&&r.deregister(i))},t.prototype.safeToRemove=function(){var e=this.props.safeToRemove;null===e||void 0===e||e()},t.prototype.render=function(){return null},t}(t.Component);var $T={borderRadius:Mk(Mk({},WT),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:WT,borderTopRightRadius:WT,borderBottomLeftRadius:WT,borderBottomRightRadius:WT,boxShadow:YT},JT={measureLayout:function(e){var n=Fk(OE(),2),r=n[0],i=n[1],a=(0,t.useContext)(vS);return t.createElement(XT,Mk({},e,{layoutGroup:a,switchLayoutGroup:(0,t.useContext)(pS),isPresent:r,safeToRemove:i}))}},ZT=Y_({attachResizeListener:function(e,t){return e.addEventListener("resize",t,{passive:!0}),function(){return e.removeEventListener("resize",t)}},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),eI={current:void 0},tI=Y_({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!eI.current){var e=new ZT(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),eI.current=e}return eI.current},resetTransform:function(e,t){e.style.transform=null!==t&&void 0!==t?t:"none"}}),nI=Mk(Mk(Mk(Mk({},rT),PE),wT),JT),rI=gS((function(e,t){return function(e,t,n,r,i){var a=t.forwardMotionProps,o=void 0!==a&&a,u=bS(e)?ZS:eE;return Mk(Mk({},u),{preloadedFeatures:n,useRender:BS(o),createVisualElement:r,projectionNodeConstructor:i,Component:e})}(e,t,nI,GT,tI)}));var iI=function(e){var n=e.file,r=e.setFile,i=Rk(n),a=i.url,o=i.progress;return(0,t.useEffect)((function(){a&&r(null)}),[a,r]),(0,s.jsx)(rI.div,{className:"progress-bar",initial:{width:0},animate:{width:o+"%"},children:(0,s.jsx)("h2",{className:"progressH2",children:o.toFixed(1)+"%"})})},aI=function(){var e=o((0,t.useState)(null),2),n=e[0],r=e[1],i=o((0,t.useState)(null),2),a=i[0],u=i[1],l=["image/png","image/jpeg","image/gif","image/jpg"];return(0,s.jsxs)("form",{children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&l.includes(t.type)?(r(t),u("")):(r(null),u("Please, Select an image file type (png, jpeg, gif, or jpg)"))}}),(0,s.jsx)("span",{children:"+"})]}),(0,s.jsxs)("div",{className:"output",children:[a&&(0,s.jsx)("div",{className:"error",children:a}),n&&(0,s.jsx)("div",{children:n.name}),n&&(0,s.jsx)(iI,{file:n,setFile:r})]})]})};function oI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oI(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sI=function(e){var n=o((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=Nk.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(uI(uI({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return t()}}),[e]),{docs:r}},lI=function(e){var t=e.setSelectedImg,n=sI("images").docs;return console.log(n),(0,s.jsx)("div",{className:"img-grid",children:n&&n.map((function(e){return(0,s.jsx)(rI.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},onClick:function(){return t(e.url)},children:(0,s.jsx)(rI.img,{src:e.url,alt:"uploades pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},e.id)}))})},cI=function(e){var t=e.selectedImg,n=e.setSelectedImg;return(0,s.jsx)(rI.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&n(null)},initial:{opacity:0},animate:{opacity:1},children:(0,s.jsx)(rI.img,{src:t,alt:"enlarged pic",initial:{y:"-150vh"},animate:{y:"10vh"}})})};var fI=function(){var e=o((0,t.useState)(null),2),n=e[0],r=e[1];return(0,s.jsxs)("div",{className:"App",children:[(0,s.jsx)(l,{}),(0,s.jsx)(aI,{}),(0,s.jsx)(lI,{setSelectedImg:r}),n&&(0,s.jsx)(cI,{selectedImg:n,setSelectedImg:r})]})};r.render((0,s.jsx)(t.StrictMode,{children:(0,s.jsx)(fI,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.3e43e409.js.map